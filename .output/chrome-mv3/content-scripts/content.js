var content=(function(){"use strict";function v(t){return t}const u={matches:["<all_urls>"],main(){console.log("Baize content script loaded"),chrome.runtime.onMessage.addListener((t,n,e)=>{if(t.action==="read_content"){const i=document.body.innerText||document.body.textContent;e({content:i})}else if(t.action==="click_element"){const i=document.querySelector(t.selector);i?(i.click(),e({success:!0,message:`Clicked element ${t.selector}`})):e({success:!1,message:`Element ${t.selector} not found`})}else if(t.action==="input_text"){const i=document.querySelector(t.selector);i?(i.value=t.text,i.dispatchEvent(new Event("input",{bubbles:!0})),i.dispatchEvent(new Event("change",{bubbles:!0})),e({success:!0,message:`Input text into ${t.selector}`})):e({success:!1,message:`Element ${t.selector} not found`})}else t.action==="get_html"&&e({content:document.documentElement.outerHTML});return!0})}},d=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome;function s(t,...n){}const h={debug:(...t)=>s(console.debug,...t),log:(...t)=>s(console.log,...t),warn:(...t)=>s(console.warn,...t),error:(...t)=>s(console.error,...t)};class c extends Event{constructor(n,e){super(c.EVENT_NAME,{}),this.newUrl=n,this.oldUrl=e}static EVENT_NAME=l("wxt:locationchange")}function l(t){return`${d?.runtime?.id}:content:${t}`}function m(t){let n,e;return{run(){n==null&&(e=new URL(location.href),n=t.setInterval(()=>{let i=new URL(location.href);i.href!==e.href&&(window.dispatchEvent(new c(i,e)),e=i)},1e3))}}}class o{constructor(n,e){this.contentScriptName=n,this.options=e,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=l("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=m(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(n){return this.abortController.abort(n)}get isInvalid(){return d.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(n){return this.signal.addEventListener("abort",n),()=>this.signal.removeEventListener("abort",n)}block(){return new Promise(()=>{})}setInterval(n,e){const i=setInterval(()=>{this.isValid&&n()},e);return this.onInvalidated(()=>clearInterval(i)),i}setTimeout(n,e){const i=setTimeout(()=>{this.isValid&&n()},e);return this.onInvalidated(()=>clearTimeout(i)),i}requestAnimationFrame(n){const e=requestAnimationFrame((...i)=>{this.isValid&&n(...i)});return this.onInvalidated(()=>cancelAnimationFrame(e)),e}requestIdleCallback(n,e){const i=requestIdleCallback((...r)=>{this.signal.aborted||n(...r)},e);return this.onInvalidated(()=>cancelIdleCallback(i)),i}addEventListener(n,e,i,r){e==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),n.addEventListener?.(e.startsWith("wxt:")?l(e):e,i,{...r,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),h.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:o.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(n){const e=n.data?.type===o.SCRIPT_STARTED_MESSAGE_TYPE,i=n.data?.contentScriptName===this.contentScriptName,r=!this.receivedMessageIds.has(n.data?.messageId);return e&&i&&r}listenForNewerScripts(n){let e=!0;const i=r=>{if(this.verifyScriptStartedEvent(r)){this.receivedMessageIds.add(r.data.messageId);const f=e;if(e=!1,f&&n?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",i),this.onInvalidated(()=>removeEventListener("message",i))}}function w(){}function a(t,...n){}const g={debug:(...t)=>a(console.debug,...t),log:(...t)=>a(console.log,...t),warn:(...t)=>a(console.warn,...t),error:(...t)=>a(console.error,...t)};return(async()=>{try{const{main:t,...n}=u,e=new o("content",n);return await t(e)}catch(t){throw g.error('The content script "content" crashed on startup!',t),t}})()})();
content;