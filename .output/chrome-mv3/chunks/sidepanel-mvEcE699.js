(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function i(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(s){if(s.ep)return;s.ep=!0;const u=i(s);fetch(s.href,u)}})();try{}catch(t){console.error("[wxt] Failed to initialize plugins",t)}function oy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pc={exports:{}},Dl={};var Lh;function xT(){if(Lh)return Dl;Lh=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function i(l,s,u){var d=null;if(u!==void 0&&(d=""+u),s.key!==void 0&&(d=""+s.key),"key"in s){u={};for(var p in s)p!=="key"&&(u[p]=s[p])}else u=s;return s=u.ref,{$$typeof:t,type:l,key:d,ref:s!==void 0?s:null,props:u}}return Dl.Fragment=a,Dl.jsx=i,Dl.jsxs=i,Dl}var Gh;function AT(){return Gh||(Gh=1,Pc.exports=xT()),Pc.exports}var Se=AT(),Fc={exports:{}},Re={};var Vh;function OT(){if(Vh)return Re;Vh=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),b=Symbol.iterator;function w(C){return C===null||typeof C!="object"?null:(C=b&&C[b]||C["@@iterator"],typeof C=="function"?C:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,N={};function X(C,L,oe){this.props=C,this.context=L,this.refs=N,this.updater=oe||z}X.prototype.isReactComponent={},X.prototype.setState=function(C,L){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,L,"setState")},X.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function K(){}K.prototype=X.prototype;function x(C,L,oe){this.props=C,this.context=L,this.refs=N,this.updater=oe||z}var W=x.prototype=new K;W.constructor=x,O(W,X.prototype),W.isPureReactComponent=!0;var ne=Array.isArray;function E(){}var $={H:null,A:null,T:null,S:null},ge=Object.prototype.hasOwnProperty;function le(C,L,oe){var re=oe.ref;return{$$typeof:t,type:C,key:L,ref:re!==void 0?re:null,props:oe}}function ke(C,L){return le(C.type,L,C.props)}function ae(C){return typeof C=="object"&&C!==null&&C.$$typeof===t}function ee(C){var L={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(oe){return L[oe]})}var ue=/\/+/g;function se(C,L){return typeof C=="object"&&C!==null&&C.key!=null?ee(""+C.key):L.toString(36)}function te(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(E,E):(C.status="pending",C.then(function(L){C.status==="pending"&&(C.status="fulfilled",C.value=L)},function(L){C.status==="pending"&&(C.status="rejected",C.reason=L)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function k(C,L,oe,re,Q){var pe=typeof C;(pe==="undefined"||pe==="boolean")&&(C=null);var xe=!1;if(C===null)xe=!0;else switch(pe){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(C.$$typeof){case t:case a:xe=!0;break;case y:return xe=C._init,k(xe(C._payload),L,oe,re,Q)}}if(xe)return Q=Q(C),xe=re===""?"."+se(C,0):re,ne(Q)?(oe="",xe!=null&&(oe=xe.replace(ue,"$&/")+"/"),k(Q,L,oe,"",function(tn){return tn})):Q!=null&&(ae(Q)&&(Q=ke(Q,oe+(Q.key==null||C&&C.key===Q.key?"":(""+Q.key).replace(ue,"$&/")+"/")+xe)),L.push(Q)),1;xe=0;var Ee=re===""?".":re+":";if(ne(C))for(var tt=0;tt<C.length;tt++)re=C[tt],pe=Ee+se(re,tt),xe+=k(re,L,oe,pe,Q);else if(tt=w(C),typeof tt=="function")for(C=tt.call(C),tt=0;!(re=C.next()).done;)re=re.value,pe=Ee+se(re,tt++),xe+=k(re,L,oe,pe,Q);else if(pe==="object"){if(typeof C.then=="function")return k(te(C),L,oe,re,Q);throw L=String(C),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return xe}function B(C,L,oe){if(C==null)return C;var re=[],Q=0;return k(C,re,"","",function(pe){return L.call(oe,pe,Q++)}),re}function P(C){if(C._status===-1){var L=C._result;L=L(),L.then(function(oe){(C._status===0||C._status===-1)&&(C._status=1,C._result=oe)},function(oe){(C._status===0||C._status===-1)&&(C._status=2,C._result=oe)}),C._status===-1&&(C._status=0,C._result=L)}if(C._status===1)return C._result.default;throw C._result}var we=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},ce={map:B,forEach:function(C,L,oe){B(C,function(){L.apply(this,arguments)},oe)},count:function(C){var L=0;return B(C,function(){L++}),L},toArray:function(C){return B(C,function(L){return L})||[]},only:function(C){if(!ae(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Re.Activity=T,Re.Children=ce,Re.Component=X,Re.Fragment=i,Re.Profiler=s,Re.PureComponent=x,Re.StrictMode=l,Re.Suspense=m,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,Re.__COMPILER_RUNTIME={__proto__:null,c:function(C){return $.H.useMemoCache(C)}},Re.cache=function(C){return function(){return C.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(C,L,oe){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var re=O({},C.props),Q=C.key;if(L!=null)for(pe in L.key!==void 0&&(Q=""+L.key),L)!ge.call(L,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&L.ref===void 0||(re[pe]=L[pe]);var pe=arguments.length-2;if(pe===1)re.children=oe;else if(1<pe){for(var xe=Array(pe),Ee=0;Ee<pe;Ee++)xe[Ee]=arguments[Ee+2];re.children=xe}return le(C.type,Q,re)},Re.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},Re.createElement=function(C,L,oe){var re,Q={},pe=null;if(L!=null)for(re in L.key!==void 0&&(pe=""+L.key),L)ge.call(L,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(Q[re]=L[re]);var xe=arguments.length-2;if(xe===1)Q.children=oe;else if(1<xe){for(var Ee=Array(xe),tt=0;tt<xe;tt++)Ee[tt]=arguments[tt+2];Q.children=Ee}if(C&&C.defaultProps)for(re in xe=C.defaultProps,xe)Q[re]===void 0&&(Q[re]=xe[re]);return le(C,pe,Q)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(C){return{$$typeof:p,render:C}},Re.isValidElement=ae,Re.lazy=function(C){return{$$typeof:y,_payload:{_status:-1,_result:C},_init:P}},Re.memo=function(C,L){return{$$typeof:h,type:C,compare:L===void 0?null:L}},Re.startTransition=function(C){var L=$.T,oe={};$.T=oe;try{var re=C(),Q=$.S;Q!==null&&Q(oe,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(E,we)}catch(pe){we(pe)}finally{L!==null&&oe.types!==null&&(L.types=oe.types),$.T=L}},Re.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},Re.use=function(C){return $.H.use(C)},Re.useActionState=function(C,L,oe){return $.H.useActionState(C,L,oe)},Re.useCallback=function(C,L){return $.H.useCallback(C,L)},Re.useContext=function(C){return $.H.useContext(C)},Re.useDebugValue=function(){},Re.useDeferredValue=function(C,L){return $.H.useDeferredValue(C,L)},Re.useEffect=function(C,L){return $.H.useEffect(C,L)},Re.useEffectEvent=function(C){return $.H.useEffectEvent(C)},Re.useId=function(){return $.H.useId()},Re.useImperativeHandle=function(C,L,oe){return $.H.useImperativeHandle(C,L,oe)},Re.useInsertionEffect=function(C,L){return $.H.useInsertionEffect(C,L)},Re.useLayoutEffect=function(C,L){return $.H.useLayoutEffect(C,L)},Re.useMemo=function(C,L){return $.H.useMemo(C,L)},Re.useOptimistic=function(C,L){return $.H.useOptimistic(C,L)},Re.useReducer=function(C,L,oe){return $.H.useReducer(C,L,oe)},Re.useRef=function(C){return $.H.useRef(C)},Re.useState=function(C){return $.H.useState(C)},Re.useSyncExternalStore=function(C,L,oe){return $.H.useSyncExternalStore(C,L,oe)},Re.useTransition=function(){return $.H.useTransition()},Re.version="19.2.3",Re}var Yh;function Md(){return Yh||(Yh=1,Fc.exports=OT()),Fc.exports}var Mt=Md();const CT=oy(Mt);var Wc={exports:{}},Ul={},ed={exports:{}},td={};var Jh;function RT(){return Jh||(Jh=1,(function(t){function a(k,B){var P=k.length;k.push(B);e:for(;0<P;){var we=P-1>>>1,ce=k[we];if(0<s(ce,B))k[we]=B,k[P]=ce,P=we;else break e}}function i(k){return k.length===0?null:k[0]}function l(k){if(k.length===0)return null;var B=k[0],P=k.pop();if(P!==B){k[0]=P;e:for(var we=0,ce=k.length,C=ce>>>1;we<C;){var L=2*(we+1)-1,oe=k[L],re=L+1,Q=k[re];if(0>s(oe,P))re<ce&&0>s(Q,oe)?(k[we]=Q,k[re]=P,we=re):(k[we]=oe,k[L]=P,we=L);else if(re<ce&&0>s(Q,P))k[we]=Q,k[re]=P,we=re;else break e}}return B}function s(k,B){var P=k.sortIndex-B.sortIndex;return P!==0?P:k.id-B.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();t.unstable_now=function(){return d.now()-p}}var m=[],h=[],y=1,T=null,b=3,w=!1,z=!1,O=!1,N=!1,X=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function W(k){for(var B=i(h);B!==null;){if(B.callback===null)l(h);else if(B.startTime<=k)l(h),B.sortIndex=B.expirationTime,a(m,B);else break;B=i(h)}}function ne(k){if(O=!1,W(k),!z)if(i(m)!==null)z=!0,E||(E=!0,ee());else{var B=i(h);B!==null&&te(ne,B.startTime-k)}}var E=!1,$=-1,ge=5,le=-1;function ke(){return N?!0:!(t.unstable_now()-le<ge)}function ae(){if(N=!1,E){var k=t.unstable_now();le=k;var B=!0;try{e:{z=!1,O&&(O=!1,K($),$=-1),w=!0;var P=b;try{t:{for(W(k),T=i(m);T!==null&&!(T.expirationTime>k&&ke());){var we=T.callback;if(typeof we=="function"){T.callback=null,b=T.priorityLevel;var ce=we(T.expirationTime<=k);if(k=t.unstable_now(),typeof ce=="function"){T.callback=ce,W(k),B=!0;break t}T===i(m)&&l(m),W(k)}else l(m);T=i(m)}if(T!==null)B=!0;else{var C=i(h);C!==null&&te(ne,C.startTime-k),B=!1}}break e}finally{T=null,b=P,w=!1}B=void 0}}finally{B?ee():E=!1}}}var ee;if(typeof x=="function")ee=function(){x(ae)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,se=ue.port2;ue.port1.onmessage=ae,ee=function(){se.postMessage(null)}}else ee=function(){X(ae,0)};function te(k,B){$=X(function(){k(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(k){switch(b){case 1:case 2:case 3:var B=3;break;default:B=b}var P=b;b=B;try{return k()}finally{b=P}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(k,B){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var P=b;b=k;try{return B()}finally{b=P}},t.unstable_scheduleCallback=function(k,B,P){var we=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?we+P:we):P=we,k){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=P+ce,k={id:y++,callback:B,priorityLevel:k,startTime:P,expirationTime:ce,sortIndex:-1},P>we?(k.sortIndex=P,a(h,k),i(m)===null&&k===i(h)&&(O?(K($),$=-1):O=!0,te(ne,P-we))):(k.sortIndex=ce,a(m,k),z||w||(z=!0,E||(E=!0,ee()))),k},t.unstable_shouldYield=ke,t.unstable_wrapCallback=function(k){var B=b;return function(){var P=b;b=B;try{return k.apply(this,arguments)}finally{b=P}}}})(td)),td}var Xh;function MT(){return Xh||(Xh=1,ed.exports=RT()),ed.exports}var nd={exports:{}},Xt={};var Qh;function NT(){if(Qh)return Xt;Qh=1;var t=Md();function a(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var l={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function u(m,h,y){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:T==null?null:""+T,children:m,containerInfo:h,implementation:y}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Xt.createPortal=function(m,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(a(299));return u(m,h,null,y)},Xt.flushSync=function(m){var h=d.T,y=l.p;try{if(d.T=null,l.p=2,m)return m()}finally{d.T=h,l.p=y,l.d.f()}},Xt.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,l.d.C(m,h))},Xt.prefetchDNS=function(m){typeof m=="string"&&l.d.D(m)},Xt.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var y=h.as,T=p(y,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?l.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:w}):y==="script"&&l.d.X(m,{crossOrigin:T,integrity:b,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Xt.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=p(h.as,h.crossOrigin);l.d.M(m,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&l.d.M(m)},Xt.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,T=p(y,h.crossOrigin);l.d.L(m,y,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Xt.preloadModule=function(m,h){if(typeof m=="string")if(h){var y=p(h.as,h.crossOrigin);l.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else l.d.m(m)},Xt.requestFormReset=function(m){l.d.r(m)},Xt.unstable_batchedUpdates=function(m,h){return m(h)},Xt.useFormState=function(m,h,y){return d.H.useFormState(m,h,y)},Xt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Xt.version="19.2.3",Xt}var Kh;function zT(){if(Kh)return nd.exports;Kh=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),nd.exports=NT(),nd.exports}var Ph;function IT(){if(Ph)return Ul;Ph=1;var t=MT(),a=Md(),i=zT();function l(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,o=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(o=n.return),e=n.return;while(e)}return n.tag===3?o:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(l(188))}function h(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(l(188));return n!==e?null:e}for(var o=e,r=n;;){var c=o.return;if(c===null)break;var f=c.alternate;if(f===null){if(r=c.return,r!==null){o=r;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===o)return m(c),e;if(f===r)return m(c),n;f=f.sibling}throw Error(l(188))}if(o.return!==r.return)o=c,r=f;else{for(var g=!1,_=c.child;_;){if(_===o){g=!0,o=c,r=f;break}if(_===r){g=!0,r=c,o=f;break}_=_.sibling}if(!g){for(_=f.child;_;){if(_===o){g=!0,o=f,r=c;break}if(_===r){g=!0,r=f,o=c;break}_=_.sibling}if(!g)throw Error(l(189))}}if(o.alternate!==r)throw Error(l(190))}if(o.tag!==3)throw Error(l(188));return o.stateNode.current===o?e:n}function y(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=y(e),n!==null)return n;e=e.sibling}return null}var T=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),x=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),ke=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function ee(e){return e===null||typeof e!="object"?null:(e=ae&&e[ae]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Symbol.for("react.client.reference");function se(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ue?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case X:return"Profiler";case N:return"StrictMode";case ne:return"Suspense";case E:return"SuspenseList";case le:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case z:return"Portal";case x:return e.displayName||"Context";case K:return(e._context.displayName||"Context")+".Consumer";case W:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return n=e.displayName||null,n!==null?n:se(e.type)||"Memo";case ge:n=e._payload,e=e._init;try{return se(e(n))}catch{}}return null}var te=Array.isArray,k=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},we=[],ce=-1;function C(e){return{current:e}}function L(e){0>ce||(e.current=we[ce],we[ce]=null,ce--)}function oe(e,n){ce++,we[ce]=e.current,e.current=n}var re=C(null),Q=C(null),pe=C(null),xe=C(null);function Ee(e,n){switch(oe(pe,n),oe(Q,e),oe(re,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?fh(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=fh(n),e=ph(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(re),oe(re,e)}function tt(){L(re),L(Q),L(pe)}function tn(e){e.memoizedState!==null&&oe(xe,e);var n=re.current,o=ph(n,e.type);n!==o&&(oe(Q,e),oe(re,o))}function fa(e){Q.current===e&&(L(re),L(Q)),xe.current===e&&(L(xe),Nl._currentValue=P)}var na,ho;function An(e){if(na===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);na=n&&n[1]||"",ho=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+na+e+ho}var Hn=!1;function Vt(e,n){if(!e||Hn)return"";Hn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(n){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(H){var j=H}Reflect.construct(e,[],J)}else{try{J.call()}catch(H){j=H}e.call(J.prototype)}}else{try{throw Error()}catch(H){j=H}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(H){if(H&&j&&typeof H.stack=="string")return[H.stack,j.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=r.DetermineComponentFrameRoot(),g=f[0],_=f[1];if(g&&_){var A=g.split(`
`),q=_.split(`
`);for(c=r=0;r<A.length&&!A[r].includes("DetermineComponentFrameRoot");)r++;for(;c<q.length&&!q[c].includes("DetermineComponentFrameRoot");)c++;if(r===A.length||c===q.length)for(r=A.length-1,c=q.length-1;1<=r&&0<=c&&A[r]!==q[c];)c--;for(;1<=r&&0<=c;r--,c--)if(A[r]!==q[c]){if(r!==1||c!==1)do if(r--,c--,0>c||A[r]!==q[c]){var V=`
`+A[r].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=r&&0<=c);break}}}finally{Hn=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?An(o):""}function R(e,n){switch(e.tag){case 26:case 27:case 5:return An(e.type);case 16:return An("Lazy");case 13:return e.child!==n&&n!==null?An("Suspense Fallback"):An("Suspense");case 19:return An("SuspenseList");case 0:case 15:return Vt(e.type,!1);case 11:return Vt(e.type.render,!1);case 1:return Vt(e.type,!0);case 31:return An("Activity");default:return""}}function ie(e){try{var n="",o=null;do n+=R(e,o),o=e,e=e.return;while(e);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Me=Object.prototype.hasOwnProperty,Ze=t.unstable_scheduleCallback,nt=t.unstable_cancelCallback,$e=t.unstable_shouldYield,Yt=t.unstable_requestPaint,St=t.unstable_now,de=t.unstable_getCurrentPriorityLevel,Ke=t.unstable_ImmediatePriority,Ln=t.unstable_UserBlockingPriority,aa=t.unstable_NormalPriority,Ho=t.unstable_LowPriority,Pt=t.unstable_IdlePriority,Lo=t.log,kt=t.unstable_setDisableYieldValue,Tt=null,Le=null;function fn(e){if(typeof Lo=="function"&&kt(e),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(Tt,e)}catch{}}var Jt=Math.clz32?Math.clz32:Ls,ka=Math.log,Hs=Math.LN2;function Ls(e){return e>>>=0,e===0?32:31-(ka(e)/Hs|0)|0}var Go=256,oa=262144,Nt=4194304;function nn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function vo(e,n,o){var r=e.pendingLanes;if(r===0)return 0;var c=0,f=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var _=r&134217727;return _!==0?(r=_&~f,r!==0?c=nn(r):(g&=_,g!==0?c=nn(g):o||(o=_&~e,o!==0&&(c=nn(o))))):(_=r&~f,_!==0?c=nn(_):g!==0?c=nn(g):o||(o=r&~e,o!==0&&(c=nn(o)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,o=n&-n,f>=o||f===32&&(o&4194048)!==0)?n:c}function pa(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Li(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tr(){var e=Nt;return Nt<<=1,(Nt&62914560)===0&&(Nt=4194304),e}function Gi(e){for(var n=[],o=0;31>o;o++)n.push(e);return n}function Da(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function nr(e,n,o,r,c,f){var g=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var _=e.entanglements,A=e.expirationTimes,q=e.hiddenUpdates;for(o=g&~o;0<o;){var V=31-Jt(o),J=1<<V;_[V]=0,A[V]=-1;var j=q[V];if(j!==null)for(q[V]=null,V=0;V<j.length;V++){var H=j[V];H!==null&&(H.lane&=-536870913)}o&=~J}r!==0&&ma(e,r,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(g&~n))}function ma(e,n,o){e.pendingLanes|=n,e.suspendedLanes&=~n;var r=31-Jt(n);e.entangledLanes|=n,e.entanglements[r]=e.entanglements[r]|1073741824|o&261930}function Vi(e,n){var o=e.entangledLanes|=n;for(e=e.entanglements;o;){var r=31-Jt(o),c=1<<r;c&n|e[r]&n&&(e[r]|=n),o&=~c}}function ar(e,n){var o=n&-n;return o=(o&42)!==0?1:Yi(o),(o&(e.suspendedLanes|n))!==0?0:o}function Yi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ha(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ua(){var e=B.p;return e!==0?e:(e=window.event,e===void 0?32:Uh(e.type))}function Vo(e,n){var o=B.p;try{return B.p=e,n()}finally{B.p=o}}var On=Math.random().toString(36).slice(2),ft="__reactFiber$"+On,Dt="__reactProps$"+On,Ut="__reactContainer$"+On,go="__reactEvents$"+On,or="__reactListeners$"+On,Cn="__reactHandles$"+On,Ji="__reactResources$"+On,_e="__reactMarker$"+On;function wt(e){delete e[ft],delete e[Dt],delete e[go],delete e[or],delete e[Cn]}function Rn(e){var n=e[ft];if(n)return n;for(var o=e.parentNode;o;){if(n=o[Ut]||o[ft]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(e=bh(e);e!==null;){if(o=e[ft])return o;e=bh(e)}return n}e=o,o=e.parentNode}return null}function Mn(e){if(e=e[ft]||e[Ut]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function ia(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(l(33))}function rt(e){var n=e[Ji];return n||(n=e[Ji]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function st(e){e[_e]=!0}var Yo=new Set,ht={};function Gn(e,n){Jo(e,n),Jo(e+"Capture",n)}function Jo(e,n){for(ht[e]=n,e=0;e<n.length;e++)Yo.add(n[e])}var vb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tf={},nf={};function gb(e){return Me.call(nf,e)?!0:Me.call(tf,e)?!1:vb.test(e)?nf[e]=!0:(tf[e]=!0,!1)}function ir(e,n,o){if(gb(n))if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var r=n.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+o)}}function lr(e,n,o){if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+o)}}function va(e,n,o,r){if(r===null)e.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(n,o,""+r)}}function Nn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function af(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function yb(e,n,o){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,f=r.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(g){o=""+g,f.call(this,g)}}),Object.defineProperty(e,n,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(g){o=""+g},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Gs(e){if(!e._valueTracker){var n=af(e)?"checked":"value";e._valueTracker=yb(e,n,""+e[n])}}function of(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var o=n.getValue(),r="";return e&&(r=af(e)?e.checked?"true":"false":e.value),e=r,e!==o?(n.setValue(e),!0):!1}function rr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var _b=/[\n"\\]/g;function zn(e){return e.replace(_b,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Vs(e,n,o,r,c,f,g,_){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),n!=null?g==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Nn(n)):e.value!==""+Nn(n)&&(e.value=""+Nn(n)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),n!=null?Ys(e,g,Nn(n)):o!=null?Ys(e,g,Nn(o)):r!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+Nn(_):e.removeAttribute("name")}function lf(e,n,o,r,c,f,g,_){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||o!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){Gs(e);return}o=o!=null?""+Nn(o):"",n=n!=null?""+Nn(n):o,_||n===e.value||(e.value=n),e.defaultValue=n}r=r??c,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=_?e.checked:!!r,e.defaultChecked=!!r,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Gs(e)}function Ys(e,n,o){n==="number"&&rr(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Xo(e,n,o,r){if(e=e.options,n){n={};for(var c=0;c<o.length;c++)n["$"+o[c]]=!0;for(o=0;o<e.length;o++)c=n.hasOwnProperty("$"+e[o].value),e[o].selected!==c&&(e[o].selected=c),c&&r&&(e[o].defaultSelected=!0)}else{for(o=""+Nn(o),n=null,c=0;c<e.length;c++){if(e[c].value===o){e[c].selected=!0,r&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function rf(e,n,o){if(n!=null&&(n=""+Nn(n),n!==e.value&&(e.value=n),o==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=o!=null?""+Nn(o):""}function sf(e,n,o,r){if(n==null){if(r!=null){if(o!=null)throw Error(l(92));if(te(r)){if(1<r.length)throw Error(l(93));r=r[0]}o=r}o==null&&(o=""),n=o}o=Nn(n),e.defaultValue=o,r=e.textContent,r===o&&r!==""&&r!==null&&(e.value=r),Gs(e)}function Qo(e,n){if(n){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=n;return}}e.textContent=n}var bb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uf(e,n,o){var r=n.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?r?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":r?e.setProperty(n,o):typeof o!="number"||o===0||bb.has(n)?n==="float"?e.cssFloat=o:e[n]=(""+o).trim():e[n]=o+"px"}function cf(e,n,o){if(n!=null&&typeof n!="object")throw Error(l(62));if(e=e.style,o!=null){for(var r in o)!o.hasOwnProperty(r)||n!=null&&n.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var c in n)r=n[c],n.hasOwnProperty(c)&&o[c]!==r&&uf(e,c,r)}else for(var f in n)n.hasOwnProperty(f)&&uf(e,f,n[f])}function Js(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sr(e){return Tb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ga(){}var Xs=null;function Qs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ko=null,Po=null;function df(e){var n=Mn(e);if(n&&(e=n.stateNode)){var o=e[Dt]||null;e:switch(e=n.stateNode,n.type){case"input":if(Vs(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),n=o.name,o.type==="radio"&&n!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+zn(""+n)+'"][type="radio"]'),n=0;n<o.length;n++){var r=o[n];if(r!==e&&r.form===e.form){var c=r[Dt]||null;if(!c)throw Error(l(90));Vs(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<o.length;n++)r=o[n],r.form===e.form&&of(r)}break e;case"textarea":rf(e,o.value,o.defaultValue);break e;case"select":n=o.value,n!=null&&Xo(e,!!o.multiple,n,!1)}}}var Ks=!1;function ff(e,n,o){if(Ks)return e(n,o);Ks=!0;try{var r=e(n);return r}finally{if(Ks=!1,(Ko!==null||Po!==null)&&(Qr(),Ko&&(n=Ko,e=Po,Po=Ko=null,df(n),e)))for(n=0;n<e.length;n++)df(e[n])}}function Xi(e,n){var o=e.stateNode;if(o===null)return null;var r=o[Dt]||null;if(r===null)return null;o=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(l(231,n,typeof o));return o}var ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if(ya)try{var Qi={};Object.defineProperty(Qi,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",Qi,Qi),window.removeEventListener("test",Qi,Qi)}catch{Ps=!1}var qa=null,Fs=null,ur=null;function pf(){if(ur)return ur;var e,n=Fs,o=n.length,r,c="value"in qa?qa.value:qa.textContent,f=c.length;for(e=0;e<o&&n[e]===c[e];e++);var g=o-e;for(r=1;r<=g&&n[o-r]===c[f-r];r++);return ur=c.slice(e,1<r?1-r:void 0)}function cr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function dr(){return!0}function mf(){return!1}function an(e){function n(o,r,c,f,g){this._reactName=o,this._targetInst=c,this.type=r,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(o=e[_],this[_]=o?o(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?dr:mf,this.isPropagationStopped=mf,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),n}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fr=an(yo),Ki=T({},yo,{view:0,detail:0}),wb=an(Ki),Ws,eu,Pi,pr=T({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pi&&(Pi&&e.type==="mousemove"?(Ws=e.screenX-Pi.screenX,eu=e.screenY-Pi.screenY):eu=Ws=0,Pi=e),Ws)},movementY:function(e){return"movementY"in e?e.movementY:eu}}),hf=an(pr),Eb=T({},pr,{dataTransfer:0}),xb=an(Eb),Ab=T({},Ki,{relatedTarget:0}),tu=an(Ab),Ob=T({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),Cb=an(Ob),Rb=T({},yo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mb=an(Rb),Nb=T({},yo,{data:0}),vf=an(Nb),zb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ib={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Db(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=kb[e])?!!n[e]:!1}function nu(){return Db}var Ub=T({},Ki,{key:function(e){if(e.key){var n=zb[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=cr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ib[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nu,charCode:function(e){return e.type==="keypress"?cr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qb=an(Ub),jb=T({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gf=an(jb),Zb=T({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nu}),$b=an(Zb),Bb=T({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hb=an(Bb),Lb=T({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Gb=an(Lb),Vb=T({},yo,{newState:0,oldState:0}),Yb=an(Vb),Jb=[9,13,27,32],au=ya&&"CompositionEvent"in window,Fi=null;ya&&"documentMode"in document&&(Fi=document.documentMode);var Xb=ya&&"TextEvent"in window&&!Fi,yf=ya&&(!au||Fi&&8<Fi&&11>=Fi),_f=" ",bf=!1;function Sf(e,n){switch(e){case"keyup":return Jb.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fo=!1;function Qb(e,n){switch(e){case"compositionend":return Tf(n);case"keypress":return n.which!==32?null:(bf=!0,_f);case"textInput":return e=n.data,e===_f&&bf?null:e;default:return null}}function Kb(e,n){if(Fo)return e==="compositionend"||!au&&Sf(e,n)?(e=pf(),ur=Fs=qa=null,Fo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return yf&&n.locale!=="ko"?null:n.data;default:return null}}var Pb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Pb[e.type]:n==="textarea"}function Ef(e,n,o,r){Ko?Po?Po.push(r):Po=[r]:Ko=r,n=ns(n,"onChange"),0<n.length&&(o=new fr("onChange","change",null,o,r),e.push({event:o,listeners:n}))}var Wi=null,el=null;function Fb(e){lh(e,0)}function mr(e){var n=ia(e);if(of(n))return e}function xf(e,n){if(e==="change")return n}var Af=!1;if(ya){var ou;if(ya){var iu="oninput"in document;if(!iu){var Of=document.createElement("div");Of.setAttribute("oninput","return;"),iu=typeof Of.oninput=="function"}ou=iu}else ou=!1;Af=ou&&(!document.documentMode||9<document.documentMode)}function Cf(){Wi&&(Wi.detachEvent("onpropertychange",Rf),el=Wi=null)}function Rf(e){if(e.propertyName==="value"&&mr(el)){var n=[];Ef(n,el,e,Qs(e)),ff(Fb,n)}}function Wb(e,n,o){e==="focusin"?(Cf(),Wi=n,el=o,Wi.attachEvent("onpropertychange",Rf)):e==="focusout"&&Cf()}function eS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mr(el)}function tS(e,n){if(e==="click")return mr(n)}function nS(e,n){if(e==="input"||e==="change")return mr(n)}function aS(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var pn=typeof Object.is=="function"?Object.is:aS;function tl(e,n){if(pn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var o=Object.keys(e),r=Object.keys(n);if(o.length!==r.length)return!1;for(r=0;r<o.length;r++){var c=o[r];if(!Me.call(n,c)||!pn(e[c],n[c]))return!1}return!0}function Mf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nf(e,n){var o=Mf(e);e=0;for(var r;o;){if(o.nodeType===3){if(r=e+o.textContent.length,e<=n&&r>=n)return{node:o,offset:n-e};e=r}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Mf(o)}}function zf(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?zf(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function If(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=rr(e.document);n instanceof e.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)e=n.contentWindow;else break;n=rr(e.document)}return n}function lu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var oS=ya&&"documentMode"in document&&11>=document.documentMode,Wo=null,ru=null,nl=null,su=!1;function kf(e,n,o){var r=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;su||Wo==null||Wo!==rr(r)||(r=Wo,"selectionStart"in r&&lu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nl&&tl(nl,r)||(nl=r,r=ns(ru,"onSelect"),0<r.length&&(n=new fr("onSelect","select",null,n,o),e.push({event:n,listeners:r}),n.target=Wo)))}function _o(e,n){var o={};return o[e.toLowerCase()]=n.toLowerCase(),o["Webkit"+e]="webkit"+n,o["Moz"+e]="moz"+n,o}var ei={animationend:_o("Animation","AnimationEnd"),animationiteration:_o("Animation","AnimationIteration"),animationstart:_o("Animation","AnimationStart"),transitionrun:_o("Transition","TransitionRun"),transitionstart:_o("Transition","TransitionStart"),transitioncancel:_o("Transition","TransitionCancel"),transitionend:_o("Transition","TransitionEnd")},uu={},Df={};ya&&(Df=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function bo(e){if(uu[e])return uu[e];if(!ei[e])return e;var n=ei[e],o;for(o in n)if(n.hasOwnProperty(o)&&o in Df)return uu[e]=n[o];return e}var Uf=bo("animationend"),qf=bo("animationiteration"),jf=bo("animationstart"),iS=bo("transitionrun"),lS=bo("transitionstart"),rS=bo("transitioncancel"),Zf=bo("transitionend"),$f=new Map,cu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cu.push("scrollEnd");function Vn(e,n){$f.set(e,n),Gn(n,[e])}var hr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},In=[],ti=0,du=0;function vr(){for(var e=ti,n=du=ti=0;n<e;){var o=In[n];In[n++]=null;var r=In[n];In[n++]=null;var c=In[n];In[n++]=null;var f=In[n];if(In[n++]=null,r!==null&&c!==null){var g=r.pending;g===null?c.next=c:(c.next=g.next,g.next=c),r.pending=c}f!==0&&Bf(o,c,f)}}function gr(e,n,o,r){In[ti++]=e,In[ti++]=n,In[ti++]=o,In[ti++]=r,du|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function fu(e,n,o,r){return gr(e,n,o,r),yr(e)}function So(e,n){return gr(e,null,null,n),yr(e)}function Bf(e,n,o){e.lanes|=o;var r=e.alternate;r!==null&&(r.lanes|=o);for(var c=!1,f=e.return;f!==null;)f.childLanes|=o,r=f.alternate,r!==null&&(r.childLanes|=o),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&n!==null&&(c=31-Jt(o),e=f.hiddenUpdates,r=e[c],r===null?e[c]=[n]:r.push(n),n.lane=o|536870912),f):null}function yr(e){if(50<El)throw El=0,Sc=null,Error(l(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ni={};function sS(e,n,o,r){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(e,n,o,r){return new sS(e,n,o,r)}function pu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _a(e,n){var o=e.alternate;return o===null?(o=mn(e.tag,n,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=n,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,n=e.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Hf(e,n){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,n=o.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function _r(e,n,o,r,c,f){var g=0;if(r=e,typeof e=="function")pu(e)&&(g=1);else if(typeof e=="string")g=pT(e,o,re.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case le:return e=mn(31,o,n,c),e.elementType=le,e.lanes=f,e;case O:return To(o.children,c,f,n);case N:g=8,c|=24;break;case X:return e=mn(12,o,n,c|2),e.elementType=X,e.lanes=f,e;case ne:return e=mn(13,o,n,c),e.elementType=ne,e.lanes=f,e;case E:return e=mn(19,o,n,c),e.elementType=E,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case x:g=10;break e;case K:g=9;break e;case W:g=11;break e;case $:g=14;break e;case ge:g=16,r=null;break e}g=29,o=Error(l(130,e===null?"null":typeof e,"")),r=null}return n=mn(g,o,n,c),n.elementType=e,n.type=r,n.lanes=f,n}function To(e,n,o,r){return e=mn(7,e,r,n),e.lanes=o,e}function mu(e,n,o){return e=mn(6,e,null,n),e.lanes=o,e}function Lf(e){var n=mn(18,null,null,0);return n.stateNode=e,n}function hu(e,n,o){return n=mn(4,e.children!==null?e.children:[],e.key,n),n.lanes=o,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Gf=new WeakMap;function kn(e,n){if(typeof e=="object"&&e!==null){var o=Gf.get(e);return o!==void 0?o:(n={value:e,source:n,stack:ie(n)},Gf.set(e,n),n)}return{value:e,source:n,stack:ie(n)}}var ai=[],oi=0,br=null,al=0,Dn=[],Un=0,ja=null,la=1,ra="";function ba(e,n){ai[oi++]=al,ai[oi++]=br,br=e,al=n}function Vf(e,n,o){Dn[Un++]=la,Dn[Un++]=ra,Dn[Un++]=ja,ja=e;var r=la;e=ra;var c=32-Jt(r)-1;r&=~(1<<c),o+=1;var f=32-Jt(n)+c;if(30<f){var g=c-c%5;f=(r&(1<<g)-1).toString(32),r>>=g,c-=g,la=1<<32-Jt(n)+c|o<<c|r,ra=f+e}else la=1<<f|o<<c|r,ra=e}function vu(e){e.return!==null&&(ba(e,1),Vf(e,1,0))}function gu(e){for(;e===br;)br=ai[--oi],ai[oi]=null,al=ai[--oi],ai[oi]=null;for(;e===ja;)ja=Dn[--Un],Dn[Un]=null,ra=Dn[--Un],Dn[Un]=null,la=Dn[--Un],Dn[Un]=null}function Yf(e,n){Dn[Un++]=la,Dn[Un++]=ra,Dn[Un++]=ja,la=n.id,ra=n.overflow,ja=e}var $t=null,ut=null,Be=!1,Za=null,qn=!1,yu=Error(l(519));function $a(e){var n=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ol(kn(n,e)),yu}function Jf(e){var n=e.stateNode,o=e.type,r=e.memoizedProps;switch(n[ft]=e,n[Dt]=r,o){case"dialog":Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":case"embed":Ue("load",n);break;case"video":case"audio":for(o=0;o<Al.length;o++)Ue(Al[o],n);break;case"source":Ue("error",n);break;case"img":case"image":case"link":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"input":Ue("invalid",n),lf(n,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Ue("invalid",n);break;case"textarea":Ue("invalid",n),sf(n,r.value,r.defaultValue,r.children)}o=r.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||n.textContent===""+o||r.suppressHydrationWarning===!0||ch(n.textContent,o)?(r.popover!=null&&(Ue("beforetoggle",n),Ue("toggle",n)),r.onScroll!=null&&Ue("scroll",n),r.onScrollEnd!=null&&Ue("scrollend",n),r.onClick!=null&&(n.onclick=ga),n=!0):n=!1,n||$a(e,!0)}function Xf(e){for($t=e.return;$t;)switch($t.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:$t=$t.return}}function ii(e){if(e!==$t)return!1;if(!Be)return Xf(e),Be=!0,!1;var n=e.tag,o;if((o=n!==3&&n!==27)&&((o=n===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||Uc(e.type,e.memoizedProps)),o=!o),o&&ut&&$a(e),Xf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ut=_h(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ut=_h(e)}else n===27?(n=ut,eo(e.type)?(e=Bc,Bc=null,ut=e):ut=n):ut=$t?Zn(e.stateNode.nextSibling):null;return!0}function wo(){ut=$t=null,Be=!1}function _u(){var e=Za;return e!==null&&(sn===null?sn=e:sn.push.apply(sn,e),Za=null),e}function ol(e){Za===null?Za=[e]:Za.push(e)}var bu=C(null),Eo=null,Sa=null;function Ba(e,n,o){oe(bu,n._currentValue),n._currentValue=o}function Ta(e){e._currentValue=bu.current,L(bu)}function Su(e,n,o){for(;e!==null;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===o)break;e=e.return}}function Tu(e,n,o,r){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var g=c.child;f=f.firstContext;e:for(;f!==null;){var _=f;f=c;for(var A=0;A<n.length;A++)if(_.context===n[A]){f.lanes|=o,_=f.alternate,_!==null&&(_.lanes|=o),Su(f.return,o,e),r||(g=null);break e}f=_.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(l(341));g.lanes|=o,f=g.alternate,f!==null&&(f.lanes|=o),Su(g,o,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function li(e,n,o,r){e=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(l(387));if(g=g.memoizedProps,g!==null){var _=c.type;pn(c.pendingProps.value,g.value)||(e!==null?e.push(_):e=[_])}}else if(c===xe.current){if(g=c.alternate,g===null)throw Error(l(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Nl):e=[Nl])}c=c.return}e!==null&&Tu(n,e,o,r),n.flags|=262144}function Sr(e){for(e=e.firstContext;e!==null;){if(!pn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function xo(e){Eo=e,Sa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Bt(e){return Qf(Eo,e)}function Tr(e,n){return Eo===null&&xo(e),Qf(e,n)}function Qf(e,n){var o=n._currentValue;if(n={context:n,memoizedValue:o,next:null},Sa===null){if(e===null)throw Error(l(308));Sa=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Sa=Sa.next=n;return o}var uS=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(o,r){e.push(r)}};this.abort=function(){n.aborted=!0,e.forEach(function(o){return o()})}},cS=t.unstable_scheduleCallback,dS=t.unstable_NormalPriority,At={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wu(){return{controller:new uS,data:new Map,refCount:0}}function il(e){e.refCount--,e.refCount===0&&cS(dS,function(){e.controller.abort()})}var ll=null,Eu=0,ri=0,si=null;function fS(e,n){if(ll===null){var o=ll=[];Eu=0,ri=Oc(),si={status:"pending",value:void 0,then:function(r){o.push(r)}}}return Eu++,n.then(Kf,Kf),n}function Kf(){if(--Eu===0&&ll!==null){si!==null&&(si.status="fulfilled");var e=ll;ll=null,ri=0,si=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function pS(e,n){var o=[],r={status:"pending",value:null,reason:null,then:function(c){o.push(c)}};return e.then(function(){r.status="fulfilled",r.value=n;for(var c=0;c<o.length;c++)(0,o[c])(n)},function(c){for(r.status="rejected",r.reason=c,c=0;c<o.length;c++)(0,o[c])(void 0)}),r}var Pf=k.S;k.S=function(e,n){km=St(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&fS(e,n),Pf!==null&&Pf(e,n)};var Ao=C(null);function xu(){var e=Ao.current;return e!==null?e:et.pooledCache}function wr(e,n){n===null?oe(Ao,Ao.current):oe(Ao,n.pool)}function Ff(){var e=xu();return e===null?null:{parent:At._currentValue,pool:e}}var ui=Error(l(460)),Au=Error(l(474)),Er=Error(l(542)),xr={then:function(){}};function Wf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ep(e,n,o){switch(o=e[o],o===void 0?e.push(n):o!==n&&(n.then(ga,ga),n=o),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,np(e),e;default:if(typeof n.status=="string")n.then(ga,ga);else{if(e=et,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=n,e.status="pending",e.then(function(r){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=r}},function(r){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=r}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,np(e),e}throw Co=n,ui}}function Oo(e){try{var n=e._init;return n(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Co=o,ui):o}}var Co=null;function tp(){if(Co===null)throw Error(l(459));var e=Co;return Co=null,e}function np(e){if(e===ui||e===Er)throw Error(l(483))}var ci=null,rl=0;function Ar(e){var n=rl;return rl+=1,ci===null&&(ci=[]),ep(ci,e,n)}function sl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Or(e,n){throw n.$$typeof===b?Error(l(525)):(e=Object.prototype.toString.call(n),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function ap(e){function n(I,M){if(e){var U=I.deletions;U===null?(I.deletions=[M],I.flags|=16):U.push(M)}}function o(I,M){if(!e)return null;for(;M!==null;)n(I,M),M=M.sibling;return null}function r(I){for(var M=new Map;I!==null;)I.key!==null?M.set(I.key,I):M.set(I.index,I),I=I.sibling;return M}function c(I,M){return I=_a(I,M),I.index=0,I.sibling=null,I}function f(I,M,U){return I.index=U,e?(U=I.alternate,U!==null?(U=U.index,U<M?(I.flags|=67108866,M):U):(I.flags|=67108866,M)):(I.flags|=1048576,M)}function g(I){return e&&I.alternate===null&&(I.flags|=67108866),I}function _(I,M,U,Y){return M===null||M.tag!==6?(M=mu(U,I.mode,Y),M.return=I,M):(M=c(M,U),M.return=I,M)}function A(I,M,U,Y){var be=U.type;return be===O?V(I,M,U.props.children,Y,U.key):M!==null&&(M.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===ge&&Oo(be)===M.type)?(M=c(M,U.props),sl(M,U),M.return=I,M):(M=_r(U.type,U.key,U.props,null,I.mode,Y),sl(M,U),M.return=I,M)}function q(I,M,U,Y){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=hu(U,I.mode,Y),M.return=I,M):(M=c(M,U.children||[]),M.return=I,M)}function V(I,M,U,Y,be){return M===null||M.tag!==7?(M=To(U,I.mode,Y,be),M.return=I,M):(M=c(M,U),M.return=I,M)}function J(I,M,U){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=mu(""+M,I.mode,U),M.return=I,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case w:return U=_r(M.type,M.key,M.props,null,I.mode,U),sl(U,M),U.return=I,U;case z:return M=hu(M,I.mode,U),M.return=I,M;case ge:return M=Oo(M),J(I,M,U)}if(te(M)||ee(M))return M=To(M,I.mode,U,null),M.return=I,M;if(typeof M.then=="function")return J(I,Ar(M),U);if(M.$$typeof===x)return J(I,Tr(I,M),U);Or(I,M)}return null}function j(I,M,U,Y){var be=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return be!==null?null:_(I,M,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case w:return U.key===be?A(I,M,U,Y):null;case z:return U.key===be?q(I,M,U,Y):null;case ge:return U=Oo(U),j(I,M,U,Y)}if(te(U)||ee(U))return be!==null?null:V(I,M,U,Y,null);if(typeof U.then=="function")return j(I,M,Ar(U),Y);if(U.$$typeof===x)return j(I,M,Tr(I,U),Y);Or(I,U)}return null}function H(I,M,U,Y,be){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return I=I.get(U)||null,_(M,I,""+Y,be);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return I=I.get(Y.key===null?U:Y.key)||null,A(M,I,Y,be);case z:return I=I.get(Y.key===null?U:Y.key)||null,q(M,I,Y,be);case ge:return Y=Oo(Y),H(I,M,U,Y,be)}if(te(Y)||ee(Y))return I=I.get(U)||null,V(M,I,Y,be,null);if(typeof Y.then=="function")return H(I,M,U,Ar(Y),be);if(Y.$$typeof===x)return H(I,M,U,Tr(M,Y),be);Or(M,Y)}return null}function fe(I,M,U,Y){for(var be=null,Ge=null,me=M,Ie=M=0,je=null;me!==null&&Ie<U.length;Ie++){me.index>Ie?(je=me,me=null):je=me.sibling;var Ve=j(I,me,U[Ie],Y);if(Ve===null){me===null&&(me=je);break}e&&me&&Ve.alternate===null&&n(I,me),M=f(Ve,M,Ie),Ge===null?be=Ve:Ge.sibling=Ve,Ge=Ve,me=je}if(Ie===U.length)return o(I,me),Be&&ba(I,Ie),be;if(me===null){for(;Ie<U.length;Ie++)me=J(I,U[Ie],Y),me!==null&&(M=f(me,M,Ie),Ge===null?be=me:Ge.sibling=me,Ge=me);return Be&&ba(I,Ie),be}for(me=r(me);Ie<U.length;Ie++)je=H(me,I,Ie,U[Ie],Y),je!==null&&(e&&je.alternate!==null&&me.delete(je.key===null?Ie:je.key),M=f(je,M,Ie),Ge===null?be=je:Ge.sibling=je,Ge=je);return e&&me.forEach(function(io){return n(I,io)}),Be&&ba(I,Ie),be}function Te(I,M,U,Y){if(U==null)throw Error(l(151));for(var be=null,Ge=null,me=M,Ie=M=0,je=null,Ve=U.next();me!==null&&!Ve.done;Ie++,Ve=U.next()){me.index>Ie?(je=me,me=null):je=me.sibling;var io=j(I,me,Ve.value,Y);if(io===null){me===null&&(me=je);break}e&&me&&io.alternate===null&&n(I,me),M=f(io,M,Ie),Ge===null?be=io:Ge.sibling=io,Ge=io,me=je}if(Ve.done)return o(I,me),Be&&ba(I,Ie),be;if(me===null){for(;!Ve.done;Ie++,Ve=U.next())Ve=J(I,Ve.value,Y),Ve!==null&&(M=f(Ve,M,Ie),Ge===null?be=Ve:Ge.sibling=Ve,Ge=Ve);return Be&&ba(I,Ie),be}for(me=r(me);!Ve.done;Ie++,Ve=U.next())Ve=H(me,I,Ie,Ve.value,Y),Ve!==null&&(e&&Ve.alternate!==null&&me.delete(Ve.key===null?Ie:Ve.key),M=f(Ve,M,Ie),Ge===null?be=Ve:Ge.sibling=Ve,Ge=Ve);return e&&me.forEach(function(ET){return n(I,ET)}),Be&&ba(I,Ie),be}function We(I,M,U,Y){if(typeof U=="object"&&U!==null&&U.type===O&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case w:e:{for(var be=U.key;M!==null;){if(M.key===be){if(be=U.type,be===O){if(M.tag===7){o(I,M.sibling),Y=c(M,U.props.children),Y.return=I,I=Y;break e}}else if(M.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===ge&&Oo(be)===M.type){o(I,M.sibling),Y=c(M,U.props),sl(Y,U),Y.return=I,I=Y;break e}o(I,M);break}else n(I,M);M=M.sibling}U.type===O?(Y=To(U.props.children,I.mode,Y,U.key),Y.return=I,I=Y):(Y=_r(U.type,U.key,U.props,null,I.mode,Y),sl(Y,U),Y.return=I,I=Y)}return g(I);case z:e:{for(be=U.key;M!==null;){if(M.key===be)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){o(I,M.sibling),Y=c(M,U.children||[]),Y.return=I,I=Y;break e}else{o(I,M);break}else n(I,M);M=M.sibling}Y=hu(U,I.mode,Y),Y.return=I,I=Y}return g(I);case ge:return U=Oo(U),We(I,M,U,Y)}if(te(U))return fe(I,M,U,Y);if(ee(U)){if(be=ee(U),typeof be!="function")throw Error(l(150));return U=be.call(U),Te(I,M,U,Y)}if(typeof U.then=="function")return We(I,M,Ar(U),Y);if(U.$$typeof===x)return We(I,M,Tr(I,U),Y);Or(I,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,M!==null&&M.tag===6?(o(I,M.sibling),Y=c(M,U),Y.return=I,I=Y):(o(I,M),Y=mu(U,I.mode,Y),Y.return=I,I=Y),g(I)):o(I,M)}return function(I,M,U,Y){try{rl=0;var be=We(I,M,U,Y);return ci=null,be}catch(me){if(me===ui||me===Er)throw me;var Ge=mn(29,me,null,I.mode);return Ge.lanes=Y,Ge.return=I,Ge}}}var Ro=ap(!0),op=ap(!1),Ha=!1;function Ou(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function La(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ga(e,n,o){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Ye&2)!==0){var c=r.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),r.pending=n,n=yr(e),Bf(e,null,o),n}return gr(e,r,n,o),yr(e)}function ul(e,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194048)!==0)){var r=n.lanes;r&=e.pendingLanes,o|=r,n.lanes=o,Vi(e,o)}}function Ru(e,n){var o=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,o===r)){var c=null,f=null;if(o=o.firstBaseUpdate,o!==null){do{var g={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};f===null?c=f=g:f=f.next=g,o=o.next}while(o!==null);f===null?c=f=n:f=f.next=n}else c=f=n;o={baseState:r.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:r.shared,callbacks:r.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=n:e.next=n,o.lastBaseUpdate=n}var Mu=!1;function cl(){if(Mu){var e=si;if(e!==null)throw e}}function dl(e,n,o,r){Mu=!1;var c=e.updateQueue;Ha=!1;var f=c.firstBaseUpdate,g=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var A=_,q=A.next;A.next=null,g===null?f=q:g.next=q,g=A;var V=e.alternate;V!==null&&(V=V.updateQueue,_=V.lastBaseUpdate,_!==g&&(_===null?V.firstBaseUpdate=q:_.next=q,V.lastBaseUpdate=A))}if(f!==null){var J=c.baseState;g=0,V=q=A=null,_=f;do{var j=_.lane&-536870913,H=j!==_.lane;if(H?(qe&j)===j:(r&j)===j){j!==0&&j===ri&&(Mu=!0),V!==null&&(V=V.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var fe=e,Te=_;j=n;var We=o;switch(Te.tag){case 1:if(fe=Te.payload,typeof fe=="function"){J=fe.call(We,J,j);break e}J=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=Te.payload,j=typeof fe=="function"?fe.call(We,J,j):fe,j==null)break e;J=T({},J,j);break e;case 2:Ha=!0}}j=_.callback,j!==null&&(e.flags|=64,H&&(e.flags|=8192),H=c.callbacks,H===null?c.callbacks=[j]:H.push(j))}else H={lane:j,tag:_.tag,payload:_.payload,callback:_.callback,next:null},V===null?(q=V=H,A=J):V=V.next=H,g|=j;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;H=_,_=H.next,H.next=null,c.lastBaseUpdate=H,c.shared.pending=null}}while(!0);V===null&&(A=J),c.baseState=A,c.firstBaseUpdate=q,c.lastBaseUpdate=V,f===null&&(c.shared.lanes=0),Qa|=g,e.lanes=g,e.memoizedState=J}}function ip(e,n){if(typeof e!="function")throw Error(l(191,e));e.call(n)}function lp(e,n){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)ip(o[e],n)}var di=C(null),Cr=C(0);function rp(e,n){e=Na,oe(Cr,e),oe(di,n),Na=e|n.baseLanes}function Nu(){oe(Cr,Na),oe(di,di.current)}function zu(){Na=Cr.current,L(di),L(Cr)}var hn=C(null),jn=null;function Va(e){var n=e.alternate;oe(Et,Et.current&1),oe(hn,e),jn===null&&(n===null||di.current!==null||n.memoizedState!==null)&&(jn=e)}function Iu(e){oe(Et,Et.current),oe(hn,e),jn===null&&(jn=e)}function sp(e){e.tag===22?(oe(Et,Et.current),oe(hn,e),jn===null&&(jn=e)):Ya()}function Ya(){oe(Et,Et.current),oe(hn,hn.current)}function vn(e){L(hn),jn===e&&(jn=null),L(Et)}var Et=C(0);function Rr(e){for(var n=e;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Zc(o)||$c(o)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var wa=0,ze=null,Pe=null,Ot=null,Mr=!1,fi=!1,Mo=!1,Nr=0,fl=0,pi=null,mS=0;function yt(){throw Error(l(321))}function ku(e,n){if(n===null)return!1;for(var o=0;o<n.length&&o<e.length;o++)if(!pn(e[o],n[o]))return!1;return!0}function Du(e,n,o,r,c,f){return wa=f,ze=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,k.H=e===null||e.memoizedState===null?Vp:Ku,Mo=!1,f=o(r,c),Mo=!1,fi&&(f=cp(n,o,r,c)),up(e),f}function up(e){k.H=hl;var n=Pe!==null&&Pe.next!==null;if(wa=0,Ot=Pe=ze=null,Mr=!1,fl=0,pi=null,n)throw Error(l(300));e===null||Ct||(e=e.dependencies,e!==null&&Sr(e)&&(Ct=!0))}function cp(e,n,o,r){ze=e;var c=0;do{if(fi&&(pi=null),fl=0,fi=!1,25<=c)throw Error(l(301));if(c+=1,Ot=Pe=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}k.H=Yp,f=n(o,r)}while(fi);return f}function hS(){var e=k.H,n=e.useState()[0];return n=typeof n.then=="function"?pl(n):n,e=e.useState()[0],(Pe!==null?Pe.memoizedState:null)!==e&&(ze.flags|=1024),n}function Uu(){var e=Nr!==0;return Nr=0,e}function qu(e,n,o){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~o}function ju(e){if(Mr){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Mr=!1}wa=0,Ot=Pe=ze=null,fi=!1,fl=Nr=0,pi=null}function Ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ze.memoizedState=Ot=e:Ot=Ot.next=e,Ot}function xt(){if(Pe===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var n=Ot===null?ze.memoizedState:Ot.next;if(n!==null)Ot=n,Pe=e;else{if(e===null)throw ze.alternate===null?Error(l(467)):Error(l(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Ot===null?ze.memoizedState=Ot=e:Ot=Ot.next=e}return Ot}function zr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pl(e){var n=fl;return fl+=1,pi===null&&(pi=[]),e=ep(pi,e,n),n=ze,(Ot===null?n.memoizedState:Ot.next)===null&&(n=n.alternate,k.H=n===null||n.memoizedState===null?Vp:Ku),e}function Ir(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return pl(e);if(e.$$typeof===x)return Bt(e)}throw Error(l(438,String(e)))}function Zu(e){var n=null,o=ze.updateQueue;if(o!==null&&(n=o.memoCache),n==null){var r=ze.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(n={data:r.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),o===null&&(o=zr(),ze.updateQueue=o),o.memoCache=n,o=n.data[n.index],o===void 0)for(o=n.data[n.index]=Array(e),r=0;r<e;r++)o[r]=ke;return n.index++,o}function Ea(e,n){return typeof n=="function"?n(e):n}function kr(e){var n=xt();return $u(n,Pe,e)}function $u(e,n,o){var r=e.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=o;var c=e.baseQueue,f=r.pending;if(f!==null){if(c!==null){var g=c.next;c.next=f.next,f.next=g}n.baseQueue=c=f,r.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{n=c.next;var _=g=null,A=null,q=n,V=!1;do{var J=q.lane&-536870913;if(J!==q.lane?(qe&J)===J:(wa&J)===J){var j=q.revertLane;if(j===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),J===ri&&(V=!0);else if((wa&j)===j){q=q.next,j===ri&&(V=!0);continue}else J={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},A===null?(_=A=J,g=f):A=A.next=J,ze.lanes|=j,Qa|=j;J=q.action,Mo&&o(f,J),f=q.hasEagerState?q.eagerState:o(f,J)}else j={lane:J,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},A===null?(_=A=j,g=f):A=A.next=j,ze.lanes|=J,Qa|=J;q=q.next}while(q!==null&&q!==n);if(A===null?g=f:A.next=_,!pn(f,e.memoizedState)&&(Ct=!0,V&&(o=si,o!==null)))throw o;e.memoizedState=f,e.baseState=g,e.baseQueue=A,r.lastRenderedState=f}return c===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Bu(e){var n=xt(),o=n.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=e;var r=o.dispatch,c=o.pending,f=n.memoizedState;if(c!==null){o.pending=null;var g=c=c.next;do f=e(f,g.action),g=g.next;while(g!==c);pn(f,n.memoizedState)||(Ct=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),o.lastRenderedState=f}return[f,r]}function dp(e,n,o){var r=ze,c=xt(),f=Be;if(f){if(o===void 0)throw Error(l(407));o=o()}else o=n();var g=!pn((Pe||c).memoizedState,o);if(g&&(c.memoizedState=o,Ct=!0),c=c.queue,Gu(mp.bind(null,r,c,e),[e]),c.getSnapshot!==n||g||Ot!==null&&Ot.memoizedState.tag&1){if(r.flags|=2048,mi(9,{destroy:void 0},pp.bind(null,r,c,o,n),null),et===null)throw Error(l(349));f||(wa&127)!==0||fp(r,n,o)}return o}function fp(e,n,o){e.flags|=16384,e={getSnapshot:n,value:o},n=ze.updateQueue,n===null?(n=zr(),ze.updateQueue=n,n.stores=[e]):(o=n.stores,o===null?n.stores=[e]:o.push(e))}function pp(e,n,o,r){n.value=o,n.getSnapshot=r,hp(n)&&vp(e)}function mp(e,n,o){return o(function(){hp(n)&&vp(e)})}function hp(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!pn(e,o)}catch{return!0}}function vp(e){var n=So(e,2);n!==null&&un(n,e,2)}function Hu(e){var n=Ft();if(typeof e=="function"){var o=e;if(e=o(),Mo){fn(!0);try{o()}finally{fn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:e},n}function gp(e,n,o,r){return e.baseState=o,$u(e,Pe,typeof r=="function"?r:Ea)}function vS(e,n,o,r,c){if(qr(e))throw Error(l(485));if(e=n.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){f.listeners.push(g)}};k.T!==null?o(!0):f.isTransition=!1,r(f),o=n.pending,o===null?(f.next=n.pending=f,yp(n,f)):(f.next=o.next,n.pending=o.next=f)}}function yp(e,n){var o=n.action,r=n.payload,c=e.state;if(n.isTransition){var f=k.T,g={};k.T=g;try{var _=o(c,r),A=k.S;A!==null&&A(g,_),_p(e,n,_)}catch(q){Lu(e,n,q)}finally{f!==null&&g.types!==null&&(f.types=g.types),k.T=f}}else try{f=o(c,r),_p(e,n,f)}catch(q){Lu(e,n,q)}}function _p(e,n,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(r){bp(e,n,r)},function(r){return Lu(e,n,r)}):bp(e,n,o)}function bp(e,n,o){n.status="fulfilled",n.value=o,Sp(n),e.state=o,n=e.pending,n!==null&&(o=n.next,o===n?e.pending=null:(o=o.next,n.next=o,yp(e,o)))}function Lu(e,n,o){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do n.status="rejected",n.reason=o,Sp(n),n=n.next;while(n!==r)}e.action=null}function Sp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Tp(e,n){return n}function wp(e,n){if(Be){var o=et.formState;if(o!==null){e:{var r=ze;if(Be){if(ut){t:{for(var c=ut,f=qn;c.nodeType!==8;){if(!f){c=null;break t}if(c=Zn(c.nextSibling),c===null){c=null;break t}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){ut=Zn(c.nextSibling),r=c.data==="F!";break e}}$a(r)}r=!1}r&&(n=o[0])}}return o=Ft(),o.memoizedState=o.baseState=n,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:n},o.queue=r,o=Hp.bind(null,ze,r),r.dispatch=o,r=Hu(!1),f=Qu.bind(null,ze,!1,r.queue),r=Ft(),c={state:n,dispatch:null,action:e,pending:null},r.queue=c,o=vS.bind(null,ze,c,f,o),c.dispatch=o,r.memoizedState=e,[n,o,!1]}function Ep(e){var n=xt();return xp(n,Pe,e)}function xp(e,n,o){if(n=$u(e,n,Tp)[0],e=kr(Ea)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var r=pl(n)}catch(g){throw g===ui?Er:g}else r=n;n=xt();var c=n.queue,f=c.dispatch;return o!==n.memoizedState&&(ze.flags|=2048,mi(9,{destroy:void 0},gS.bind(null,c,o),null)),[r,f,e]}function gS(e,n){e.action=n}function Ap(e){var n=xt(),o=Pe;if(o!==null)return xp(n,o,e);xt(),n=n.memoizedState,o=xt();var r=o.queue.dispatch;return o.memoizedState=e,[n,r,!1]}function mi(e,n,o,r){return e={tag:e,create:o,deps:r,inst:n,next:null},n=ze.updateQueue,n===null&&(n=zr(),ze.updateQueue=n),o=n.lastEffect,o===null?n.lastEffect=e.next=e:(r=o.next,o.next=e,e.next=r,n.lastEffect=e),e}function Op(){return xt().memoizedState}function Dr(e,n,o,r){var c=Ft();ze.flags|=e,c.memoizedState=mi(1|n,{destroy:void 0},o,r===void 0?null:r)}function Ur(e,n,o,r){var c=xt();r=r===void 0?null:r;var f=c.memoizedState.inst;Pe!==null&&r!==null&&ku(r,Pe.memoizedState.deps)?c.memoizedState=mi(n,f,o,r):(ze.flags|=e,c.memoizedState=mi(1|n,f,o,r))}function Cp(e,n){Dr(8390656,8,e,n)}function Gu(e,n){Ur(2048,8,e,n)}function yS(e){ze.flags|=4;var n=ze.updateQueue;if(n===null)n=zr(),ze.updateQueue=n,n.events=[e];else{var o=n.events;o===null?n.events=[e]:o.push(e)}}function Rp(e){var n=xt().memoizedState;return yS({ref:n,nextImpl:e}),function(){if((Ye&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}function Mp(e,n){return Ur(4,2,e,n)}function Np(e,n){return Ur(4,4,e,n)}function zp(e,n){if(typeof n=="function"){e=e();var o=n(e);return function(){typeof o=="function"?o():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Ip(e,n,o){o=o!=null?o.concat([e]):null,Ur(4,4,zp.bind(null,n,e),o)}function Vu(){}function kp(e,n){var o=xt();n=n===void 0?null:n;var r=o.memoizedState;return n!==null&&ku(n,r[1])?r[0]:(o.memoizedState=[e,n],e)}function Dp(e,n){var o=xt();n=n===void 0?null:n;var r=o.memoizedState;if(n!==null&&ku(n,r[1]))return r[0];if(r=e(),Mo){fn(!0);try{e()}finally{fn(!1)}}return o.memoizedState=[r,n],r}function Yu(e,n,o){return o===void 0||(wa&1073741824)!==0&&(qe&261930)===0?e.memoizedState=n:(e.memoizedState=o,e=Um(),ze.lanes|=e,Qa|=e,o)}function Up(e,n,o,r){return pn(o,n)?o:di.current!==null?(e=Yu(e,o,r),pn(e,n)||(Ct=!0),e):(wa&42)===0||(wa&1073741824)!==0&&(qe&261930)===0?(Ct=!0,e.memoizedState=o):(e=Um(),ze.lanes|=e,Qa|=e,n)}function qp(e,n,o,r,c){var f=B.p;B.p=f!==0&&8>f?f:8;var g=k.T,_={};k.T=_,Qu(e,!1,n,o);try{var A=c(),q=k.S;if(q!==null&&q(_,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var V=pS(A,r);ml(e,n,V,_n(e))}else ml(e,n,r,_n(e))}catch(J){ml(e,n,{then:function(){},status:"rejected",reason:J},_n())}finally{B.p=f,g!==null&&_.types!==null&&(g.types=_.types),k.T=g}}function _S(){}function Ju(e,n,o,r){if(e.tag!==5)throw Error(l(476));var c=jp(e).queue;qp(e,c,n,P,o===null?_S:function(){return Zp(e),o(r)})}function jp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:P},next:null};var o={};return n.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:o},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Zp(e){var n=jp(e);n.next===null&&(n=e.alternate.memoizedState),ml(e,n.next.queue,{},_n())}function Xu(){return Bt(Nl)}function $p(){return xt().memoizedState}function Bp(){return xt().memoizedState}function bS(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var o=_n();e=La(o);var r=Ga(n,e,o);r!==null&&(un(r,n,o),ul(r,n,o)),n={cache:wu()},e.payload=n;return}n=n.return}}function SS(e,n,o){var r=_n();o={lane:r,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},qr(e)?Lp(n,o):(o=fu(e,n,o,r),o!==null&&(un(o,e,r),Gp(o,n,r)))}function Hp(e,n,o){var r=_n();ml(e,n,o,r)}function ml(e,n,o,r){var c={lane:r,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(qr(e))Lp(n,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var g=n.lastRenderedState,_=f(g,o);if(c.hasEagerState=!0,c.eagerState=_,pn(_,g))return gr(e,n,c,0),et===null&&vr(),!1}catch{}if(o=fu(e,n,c,r),o!==null)return un(o,e,r),Gp(o,n,r),!0}return!1}function Qu(e,n,o,r){if(r={lane:2,revertLane:Oc(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},qr(e)){if(n)throw Error(l(479))}else n=fu(e,o,r,2),n!==null&&un(n,e,2)}function qr(e){var n=e.alternate;return e===ze||n!==null&&n===ze}function Lp(e,n){fi=Mr=!0;var o=e.pending;o===null?n.next=n:(n.next=o.next,o.next=n),e.pending=n}function Gp(e,n,o){if((o&4194048)!==0){var r=n.lanes;r&=e.pendingLanes,o|=r,n.lanes=o,Vi(e,o)}}var hl={readContext:Bt,use:Ir,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};hl.useEffectEvent=yt;var Vp={readContext:Bt,use:Ir,useCallback:function(e,n){return Ft().memoizedState=[e,n===void 0?null:n],e},useContext:Bt,useEffect:Cp,useImperativeHandle:function(e,n,o){o=o!=null?o.concat([e]):null,Dr(4194308,4,zp.bind(null,n,e),o)},useLayoutEffect:function(e,n){return Dr(4194308,4,e,n)},useInsertionEffect:function(e,n){Dr(4,2,e,n)},useMemo:function(e,n){var o=Ft();n=n===void 0?null:n;var r=e();if(Mo){fn(!0);try{e()}finally{fn(!1)}}return o.memoizedState=[r,n],r},useReducer:function(e,n,o){var r=Ft();if(o!==void 0){var c=o(n);if(Mo){fn(!0);try{o(n)}finally{fn(!1)}}}else c=n;return r.memoizedState=r.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},r.queue=e,e=e.dispatch=SS.bind(null,ze,e),[r.memoizedState,e]},useRef:function(e){var n=Ft();return e={current:e},n.memoizedState=e},useState:function(e){e=Hu(e);var n=e.queue,o=Hp.bind(null,ze,n);return n.dispatch=o,[e.memoizedState,o]},useDebugValue:Vu,useDeferredValue:function(e,n){var o=Ft();return Yu(o,e,n)},useTransition:function(){var e=Hu(!1);return e=qp.bind(null,ze,e.queue,!0,!1),Ft().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,o){var r=ze,c=Ft();if(Be){if(o===void 0)throw Error(l(407));o=o()}else{if(o=n(),et===null)throw Error(l(349));(qe&127)!==0||fp(r,n,o)}c.memoizedState=o;var f={value:o,getSnapshot:n};return c.queue=f,Cp(mp.bind(null,r,f,e),[e]),r.flags|=2048,mi(9,{destroy:void 0},pp.bind(null,r,f,o,n),null),o},useId:function(){var e=Ft(),n=et.identifierPrefix;if(Be){var o=ra,r=la;o=(r&~(1<<32-Jt(r)-1)).toString(32)+o,n="_"+n+"R_"+o,o=Nr++,0<o&&(n+="H"+o.toString(32)),n+="_"}else o=mS++,n="_"+n+"r_"+o.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Xu,useFormState:wp,useActionState:wp,useOptimistic:function(e){var n=Ft();n.memoizedState=n.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=o,n=Qu.bind(null,ze,!0,o),o.dispatch=n,[e,n]},useMemoCache:Zu,useCacheRefresh:function(){return Ft().memoizedState=bS.bind(null,ze)},useEffectEvent:function(e){var n=Ft(),o={impl:e};return n.memoizedState=o,function(){if((Ye&2)!==0)throw Error(l(440));return o.impl.apply(void 0,arguments)}}},Ku={readContext:Bt,use:Ir,useCallback:kp,useContext:Bt,useEffect:Gu,useImperativeHandle:Ip,useInsertionEffect:Mp,useLayoutEffect:Np,useMemo:Dp,useReducer:kr,useRef:Op,useState:function(){return kr(Ea)},useDebugValue:Vu,useDeferredValue:function(e,n){var o=xt();return Up(o,Pe.memoizedState,e,n)},useTransition:function(){var e=kr(Ea)[0],n=xt().memoizedState;return[typeof e=="boolean"?e:pl(e),n]},useSyncExternalStore:dp,useId:$p,useHostTransitionStatus:Xu,useFormState:Ep,useActionState:Ep,useOptimistic:function(e,n){var o=xt();return gp(o,Pe,e,n)},useMemoCache:Zu,useCacheRefresh:Bp};Ku.useEffectEvent=Rp;var Yp={readContext:Bt,use:Ir,useCallback:kp,useContext:Bt,useEffect:Gu,useImperativeHandle:Ip,useInsertionEffect:Mp,useLayoutEffect:Np,useMemo:Dp,useReducer:Bu,useRef:Op,useState:function(){return Bu(Ea)},useDebugValue:Vu,useDeferredValue:function(e,n){var o=xt();return Pe===null?Yu(o,e,n):Up(o,Pe.memoizedState,e,n)},useTransition:function(){var e=Bu(Ea)[0],n=xt().memoizedState;return[typeof e=="boolean"?e:pl(e),n]},useSyncExternalStore:dp,useId:$p,useHostTransitionStatus:Xu,useFormState:Ap,useActionState:Ap,useOptimistic:function(e,n){var o=xt();return Pe!==null?gp(o,Pe,e,n):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:Zu,useCacheRefresh:Bp};Yp.useEffectEvent=Rp;function Pu(e,n,o,r){n=e.memoizedState,o=o(r,n),o=o==null?n:T({},n,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Fu={enqueueSetState:function(e,n,o){e=e._reactInternals;var r=_n(),c=La(r);c.payload=n,o!=null&&(c.callback=o),n=Ga(e,c,r),n!==null&&(un(n,e,r),ul(n,e,r))},enqueueReplaceState:function(e,n,o){e=e._reactInternals;var r=_n(),c=La(r);c.tag=1,c.payload=n,o!=null&&(c.callback=o),n=Ga(e,c,r),n!==null&&(un(n,e,r),ul(n,e,r))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var o=_n(),r=La(o);r.tag=2,n!=null&&(r.callback=n),n=Ga(e,r,o),n!==null&&(un(n,e,o),ul(n,e,o))}};function Jp(e,n,o,r,c,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,f,g):n.prototype&&n.prototype.isPureReactComponent?!tl(o,r)||!tl(c,f):!0}function Xp(e,n,o,r){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,r),n.state!==e&&Fu.enqueueReplaceState(n,n.state,null)}function No(e,n){var o=n;if("ref"in n){o={};for(var r in n)r!=="ref"&&(o[r]=n[r])}if(e=e.defaultProps){o===n&&(o=T({},o));for(var c in e)o[c]===void 0&&(o[c]=e[c])}return o}function Qp(e){hr(e)}function Kp(e){console.error(e)}function Pp(e){hr(e)}function jr(e,n){try{var o=e.onUncaughtError;o(n.value,{componentStack:n.stack})}catch(r){setTimeout(function(){throw r})}}function Fp(e,n,o){try{var r=e.onCaughtError;r(o.value,{componentStack:o.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Wu(e,n,o){return o=La(o),o.tag=3,o.payload={element:null},o.callback=function(){jr(e,n)},o}function Wp(e){return e=La(e),e.tag=3,e}function em(e,n,o,r){var c=o.type.getDerivedStateFromError;if(typeof c=="function"){var f=r.value;e.payload=function(){return c(f)},e.callback=function(){Fp(n,o,r)}}var g=o.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Fp(n,o,r),typeof c!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})})}function TS(e,n,o,r,c){if(o.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(n=o.alternate,n!==null&&li(n,o,c,!0),o=hn.current,o!==null){switch(o.tag){case 31:case 13:return jn===null?Kr():o.alternate===null&&_t===0&&(_t=3),o.flags&=-257,o.flags|=65536,o.lanes=c,r===xr?o.flags|=16384:(n=o.updateQueue,n===null?o.updateQueue=new Set([r]):n.add(r),Ec(e,r,c)),!1;case 22:return o.flags|=65536,r===xr?o.flags|=16384:(n=o.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([r])},o.updateQueue=n):(o=n.retryQueue,o===null?n.retryQueue=new Set([r]):o.add(r)),Ec(e,r,c)),!1}throw Error(l(435,o.tag))}return Ec(e,r,c),Kr(),!1}if(Be)return n=hn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,r!==yu&&(e=Error(l(422),{cause:r}),ol(kn(e,o)))):(r!==yu&&(n=Error(l(423),{cause:r}),ol(kn(n,o))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,r=kn(r,o),c=Wu(e.stateNode,r,c),Ru(e,c),_t!==4&&(_t=2)),!1;var f=Error(l(520),{cause:r});if(f=kn(f,o),wl===null?wl=[f]:wl.push(f),_t!==4&&(_t=2),n===null)return!0;r=kn(r,o),o=n;do{switch(o.tag){case 3:return o.flags|=65536,e=c&-c,o.lanes|=e,e=Wu(o.stateNode,r,e),Ru(o,e),!1;case 1:if(n=o.type,f=o.stateNode,(o.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ka===null||!Ka.has(f))))return o.flags|=65536,c&=-c,o.lanes|=c,c=Wp(c),em(c,e,o,r),Ru(o,c),!1}o=o.return}while(o!==null);return!1}var ec=Error(l(461)),Ct=!1;function Ht(e,n,o,r){n.child=e===null?op(n,null,o,r):Ro(n,e.child,o,r)}function tm(e,n,o,r,c){o=o.render;var f=n.ref;if("ref"in r){var g={};for(var _ in r)_!=="ref"&&(g[_]=r[_])}else g=r;return xo(n),r=Du(e,n,o,g,f,c),_=Uu(),e!==null&&!Ct?(qu(e,n,c),xa(e,n,c)):(Be&&_&&vu(n),n.flags|=1,Ht(e,n,r,c),n.child)}function nm(e,n,o,r,c){if(e===null){var f=o.type;return typeof f=="function"&&!pu(f)&&f.defaultProps===void 0&&o.compare===null?(n.tag=15,n.type=f,am(e,n,f,r,c)):(e=_r(o.type,null,r,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!sc(e,c)){var g=f.memoizedProps;if(o=o.compare,o=o!==null?o:tl,o(g,r)&&e.ref===n.ref)return xa(e,n,c)}return n.flags|=1,e=_a(f,r),e.ref=n.ref,e.return=n,n.child=e}function am(e,n,o,r,c){if(e!==null){var f=e.memoizedProps;if(tl(f,r)&&e.ref===n.ref)if(Ct=!1,n.pendingProps=r=f,sc(e,c))(e.flags&131072)!==0&&(Ct=!0);else return n.lanes=e.lanes,xa(e,n,c)}return tc(e,n,o,r,c)}function om(e,n,o,r){var c=r.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|o:o,e!==null){for(r=n.child=e.child,c=0;r!==null;)c=c|r.lanes|r.childLanes,r=r.sibling;r=c&~f}else r=0,n.child=null;return im(e,n,f,o,r)}if((o&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&wr(n,f!==null?f.cachePool:null),f!==null?rp(n,f):Nu(),sp(n);else return r=n.lanes=536870912,im(e,n,f!==null?f.baseLanes|o:o,o,r)}else f!==null?(wr(n,f.cachePool),rp(n,f),Ya(),n.memoizedState=null):(e!==null&&wr(n,null),Nu(),Ya());return Ht(e,n,c,o),n.child}function vl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function im(e,n,o,r,c){var f=xu();return f=f===null?null:{parent:At._currentValue,pool:f},n.memoizedState={baseLanes:o,cachePool:f},e!==null&&wr(n,null),Nu(),sp(n),e!==null&&li(e,n,r,!0),n.childLanes=c,null}function Zr(e,n){return n=Br({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function lm(e,n,o){return Ro(n,e.child,null,o),e=Zr(n,n.pendingProps),e.flags|=2,vn(n),n.memoizedState=null,e}function wS(e,n,o){var r=n.pendingProps,c=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Be){if(r.mode==="hidden")return e=Zr(n,r),n.lanes=536870912,vl(null,e);if(Iu(n),(e=ut)?(e=yh(e,qn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ja!==null?{id:la,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},o=Lf(e),o.return=n,n.child=o,$t=n,ut=null)):e=null,e===null)throw $a(n);return n.lanes=536870912,null}return Zr(n,r)}var f=e.memoizedState;if(f!==null){var g=f.dehydrated;if(Iu(n),c)if(n.flags&256)n.flags&=-257,n=lm(e,n,o);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(l(558));else if(Ct||li(e,n,o,!1),c=(o&e.childLanes)!==0,Ct||c){if(r=et,r!==null&&(g=ar(r,o),g!==0&&g!==f.retryLane))throw f.retryLane=g,So(e,g),un(r,e,g),ec;Kr(),n=lm(e,n,o)}else e=f.treeContext,ut=Zn(g.nextSibling),$t=n,Be=!0,Za=null,qn=!1,e!==null&&Yf(n,e),n=Zr(n,r),n.flags|=4096;return n}return e=_a(e.child,{mode:r.mode,children:r.children}),e.ref=n.ref,n.child=e,e.return=n,e}function $r(e,n){var o=n.ref;if(o===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(l(284));(e===null||e.ref!==o)&&(n.flags|=4194816)}}function tc(e,n,o,r,c){return xo(n),o=Du(e,n,o,r,void 0,c),r=Uu(),e!==null&&!Ct?(qu(e,n,c),xa(e,n,c)):(Be&&r&&vu(n),n.flags|=1,Ht(e,n,o,c),n.child)}function rm(e,n,o,r,c,f){return xo(n),n.updateQueue=null,o=cp(n,r,o,c),up(e),r=Uu(),e!==null&&!Ct?(qu(e,n,f),xa(e,n,f)):(Be&&r&&vu(n),n.flags|=1,Ht(e,n,o,f),n.child)}function sm(e,n,o,r,c){if(xo(n),n.stateNode===null){var f=ni,g=o.contextType;typeof g=="object"&&g!==null&&(f=Bt(g)),f=new o(r,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Fu,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=r,f.state=n.memoizedState,f.refs={},Ou(n),g=o.contextType,f.context=typeof g=="object"&&g!==null?Bt(g):ni,f.state=n.memoizedState,g=o.getDerivedStateFromProps,typeof g=="function"&&(Pu(n,o,g,r),f.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(g=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),g!==f.state&&Fu.enqueueReplaceState(f,f.state,null),dl(n,r,f,c),cl(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),r=!0}else if(e===null){f=n.stateNode;var _=n.memoizedProps,A=No(o,_);f.props=A;var q=f.context,V=o.contextType;g=ni,typeof V=="object"&&V!==null&&(g=Bt(V));var J=o.getDerivedStateFromProps;V=typeof J=="function"||typeof f.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,V||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_||q!==g)&&Xp(n,f,r,g),Ha=!1;var j=n.memoizedState;f.state=j,dl(n,r,f,c),cl(),q=n.memoizedState,_||j!==q||Ha?(typeof J=="function"&&(Pu(n,o,J,r),q=n.memoizedState),(A=Ha||Jp(n,o,A,r,j,q,g))?(V||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=q),f.props=r,f.state=q,f.context=g,r=A):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{f=n.stateNode,Cu(e,n),g=n.memoizedProps,V=No(o,g),f.props=V,J=n.pendingProps,j=f.context,q=o.contextType,A=ni,typeof q=="object"&&q!==null&&(A=Bt(q)),_=o.getDerivedStateFromProps,(q=typeof _=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==J||j!==A)&&Xp(n,f,r,A),Ha=!1,j=n.memoizedState,f.state=j,dl(n,r,f,c),cl();var H=n.memoizedState;g!==J||j!==H||Ha||e!==null&&e.dependencies!==null&&Sr(e.dependencies)?(typeof _=="function"&&(Pu(n,o,_,r),H=n.memoizedState),(V=Ha||Jp(n,o,V,r,j,H,A)||e!==null&&e.dependencies!==null&&Sr(e.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(r,H,A),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(r,H,A)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&j===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&j===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=H),f.props=r,f.state=H,f.context=A,r=V):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&j===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&j===e.memoizedState||(n.flags|=1024),r=!1)}return f=r,$r(e,n),r=(n.flags&128)!==0,f||r?(f=n.stateNode,o=r&&typeof o.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&r?(n.child=Ro(n,e.child,null,c),n.child=Ro(n,null,o,c)):Ht(e,n,o,c),n.memoizedState=f.state,e=n.child):e=xa(e,n,c),e}function um(e,n,o,r){return wo(),n.flags|=256,Ht(e,n,o,r),n.child}var nc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ac(e){return{baseLanes:e,cachePool:Ff()}}function oc(e,n,o){return e=e!==null?e.childLanes&~o:0,n&&(e|=yn),e}function cm(e,n,o){var r=n.pendingProps,c=!1,f=(n.flags&128)!==0,g;if((g=f)||(g=e!==null&&e.memoizedState===null?!1:(Et.current&2)!==0),g&&(c=!0,n.flags&=-129),g=(n.flags&32)!==0,n.flags&=-33,e===null){if(Be){if(c?Va(n):Ya(),(e=ut)?(e=yh(e,qn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ja!==null?{id:la,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},o=Lf(e),o.return=n,n.child=o,$t=n,ut=null)):e=null,e===null)throw $a(n);return $c(e)?n.lanes=32:n.lanes=536870912,null}var _=r.children;return r=r.fallback,c?(Ya(),c=n.mode,_=Br({mode:"hidden",children:_},c),r=To(r,c,o,null),_.return=n,r.return=n,_.sibling=r,n.child=_,r=n.child,r.memoizedState=ac(o),r.childLanes=oc(e,g,o),n.memoizedState=nc,vl(null,r)):(Va(n),ic(n,_))}var A=e.memoizedState;if(A!==null&&(_=A.dehydrated,_!==null)){if(f)n.flags&256?(Va(n),n.flags&=-257,n=lc(e,n,o)):n.memoizedState!==null?(Ya(),n.child=e.child,n.flags|=128,n=null):(Ya(),_=r.fallback,c=n.mode,r=Br({mode:"visible",children:r.children},c),_=To(_,c,o,null),_.flags|=2,r.return=n,_.return=n,r.sibling=_,n.child=r,Ro(n,e.child,null,o),r=n.child,r.memoizedState=ac(o),r.childLanes=oc(e,g,o),n.memoizedState=nc,n=vl(null,r));else if(Va(n),$c(_)){if(g=_.nextSibling&&_.nextSibling.dataset,g)var q=g.dgst;g=q,r=Error(l(419)),r.stack="",r.digest=g,ol({value:r,source:null,stack:null}),n=lc(e,n,o)}else if(Ct||li(e,n,o,!1),g=(o&e.childLanes)!==0,Ct||g){if(g=et,g!==null&&(r=ar(g,o),r!==0&&r!==A.retryLane))throw A.retryLane=r,So(e,r),un(g,e,r),ec;Zc(_)||Kr(),n=lc(e,n,o)}else Zc(_)?(n.flags|=192,n.child=e.child,n=null):(e=A.treeContext,ut=Zn(_.nextSibling),$t=n,Be=!0,Za=null,qn=!1,e!==null&&Yf(n,e),n=ic(n,r.children),n.flags|=4096);return n}return c?(Ya(),_=r.fallback,c=n.mode,A=e.child,q=A.sibling,r=_a(A,{mode:"hidden",children:r.children}),r.subtreeFlags=A.subtreeFlags&65011712,q!==null?_=_a(q,_):(_=To(_,c,o,null),_.flags|=2),_.return=n,r.return=n,r.sibling=_,n.child=r,vl(null,r),r=n.child,_=e.child.memoizedState,_===null?_=ac(o):(c=_.cachePool,c!==null?(A=At._currentValue,c=c.parent!==A?{parent:A,pool:A}:c):c=Ff(),_={baseLanes:_.baseLanes|o,cachePool:c}),r.memoizedState=_,r.childLanes=oc(e,g,o),n.memoizedState=nc,vl(e.child,r)):(Va(n),o=e.child,e=o.sibling,o=_a(o,{mode:"visible",children:r.children}),o.return=n,o.sibling=null,e!==null&&(g=n.deletions,g===null?(n.deletions=[e],n.flags|=16):g.push(e)),n.child=o,n.memoizedState=null,o)}function ic(e,n){return n=Br({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Br(e,n){return e=mn(22,e,null,n),e.lanes=0,e}function lc(e,n,o){return Ro(n,e.child,null,o),e=ic(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function dm(e,n,o){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n),Su(e.return,n,o)}function rc(e,n,o,r,c,f){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:o,tailMode:c,treeForkCount:f}:(g.isBackwards=n,g.rendering=null,g.renderingStartTime=0,g.last=r,g.tail=o,g.tailMode=c,g.treeForkCount=f)}function fm(e,n,o){var r=n.pendingProps,c=r.revealOrder,f=r.tail;r=r.children;var g=Et.current,_=(g&2)!==0;if(_?(g=g&1|2,n.flags|=128):g&=1,oe(Et,g),Ht(e,n,r,o),r=Be?al:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dm(e,o,n);else if(e.tag===19)dm(e,o,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(o=n.child,c=null;o!==null;)e=o.alternate,e!==null&&Rr(e)===null&&(c=o),o=o.sibling;o=c,o===null?(c=n.child,n.child=null):(c=o.sibling,o.sibling=null),rc(n,!1,c,o,f,r);break;case"backwards":case"unstable_legacy-backwards":for(o=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&Rr(e)===null){n.child=c;break}e=c.sibling,c.sibling=o,o=c,c=e}rc(n,!0,o,null,f,r);break;case"together":rc(n,!1,null,null,void 0,r);break;default:n.memoizedState=null}return n.child}function xa(e,n,o){if(e!==null&&(n.dependencies=e.dependencies),Qa|=n.lanes,(o&n.childLanes)===0)if(e!==null){if(li(e,n,o,!1),(o&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(l(153));if(n.child!==null){for(e=n.child,o=_a(e,e.pendingProps),n.child=o,o.return=n;e.sibling!==null;)e=e.sibling,o=o.sibling=_a(e,e.pendingProps),o.return=n;o.sibling=null}return n.child}function sc(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Sr(e)))}function ES(e,n,o){switch(n.tag){case 3:Ee(n,n.stateNode.containerInfo),Ba(n,At,e.memoizedState.cache),wo();break;case 27:case 5:tn(n);break;case 4:Ee(n,n.stateNode.containerInfo);break;case 10:Ba(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Iu(n),null;break;case 13:var r=n.memoizedState;if(r!==null)return r.dehydrated!==null?(Va(n),n.flags|=128,null):(o&n.child.childLanes)!==0?cm(e,n,o):(Va(n),e=xa(e,n,o),e!==null?e.sibling:null);Va(n);break;case 19:var c=(e.flags&128)!==0;if(r=(o&n.childLanes)!==0,r||(li(e,n,o,!1),r=(o&n.childLanes)!==0),c){if(r)return fm(e,n,o);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),oe(Et,Et.current),r)break;return null;case 22:return n.lanes=0,om(e,n,o,n.pendingProps);case 24:Ba(n,At,e.memoizedState.cache)}return xa(e,n,o)}function pm(e,n,o){if(e!==null)if(e.memoizedProps!==n.pendingProps)Ct=!0;else{if(!sc(e,o)&&(n.flags&128)===0)return Ct=!1,ES(e,n,o);Ct=(e.flags&131072)!==0}else Ct=!1,Be&&(n.flags&1048576)!==0&&Vf(n,al,n.index);switch(n.lanes=0,n.tag){case 16:e:{var r=n.pendingProps;if(e=Oo(n.elementType),n.type=e,typeof e=="function")pu(e)?(r=No(e,r),n.tag=1,n=sm(null,n,e,r,o)):(n.tag=0,n=tc(null,n,e,r,o));else{if(e!=null){var c=e.$$typeof;if(c===W){n.tag=11,n=tm(null,n,e,r,o);break e}else if(c===$){n.tag=14,n=nm(null,n,e,r,o);break e}}throw n=se(e)||e,Error(l(306,n,""))}}return n;case 0:return tc(e,n,n.type,n.pendingProps,o);case 1:return r=n.type,c=No(r,n.pendingProps),sm(e,n,r,c,o);case 3:e:{if(Ee(n,n.stateNode.containerInfo),e===null)throw Error(l(387));r=n.pendingProps;var f=n.memoizedState;c=f.element,Cu(e,n),dl(n,r,null,o);var g=n.memoizedState;if(r=g.cache,Ba(n,At,r),r!==f.cache&&Tu(n,[At],o,!0),cl(),r=g.element,f.isDehydrated)if(f={element:r,isDehydrated:!1,cache:g.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=um(e,n,r,o);break e}else if(r!==c){c=kn(Error(l(424)),n),ol(c),n=um(e,n,r,o);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,ut=Zn(e.firstChild),$t=n,Be=!0,Za=null,qn=!0,o=op(n,null,r,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(wo(),r===c){n=xa(e,n,o);break e}Ht(e,n,r,o)}n=n.child}return n;case 26:return $r(e,n),e===null?(o=Eh(n.type,null,n.pendingProps,null))?n.memoizedState=o:Be||(o=n.type,e=n.pendingProps,r=as(pe.current).createElement(o),r[ft]=n,r[Dt]=e,Lt(r,o,e),st(r),n.stateNode=r):n.memoizedState=Eh(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return tn(n),e===null&&Be&&(r=n.stateNode=Sh(n.type,n.pendingProps,pe.current),$t=n,qn=!0,c=ut,eo(n.type)?(Bc=c,ut=Zn(r.firstChild)):ut=c),Ht(e,n,n.pendingProps.children,o),$r(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Be&&((c=r=ut)&&(r=eT(r,n.type,n.pendingProps,qn),r!==null?(n.stateNode=r,$t=n,ut=Zn(r.firstChild),qn=!1,c=!0):c=!1),c||$a(n)),tn(n),c=n.type,f=n.pendingProps,g=e!==null?e.memoizedProps:null,r=f.children,Uc(c,f)?r=null:g!==null&&Uc(c,g)&&(n.flags|=32),n.memoizedState!==null&&(c=Du(e,n,hS,null,null,o),Nl._currentValue=c),$r(e,n),Ht(e,n,r,o),n.child;case 6:return e===null&&Be&&((e=o=ut)&&(o=tT(o,n.pendingProps,qn),o!==null?(n.stateNode=o,$t=n,ut=null,e=!0):e=!1),e||$a(n)),null;case 13:return cm(e,n,o);case 4:return Ee(n,n.stateNode.containerInfo),r=n.pendingProps,e===null?n.child=Ro(n,null,r,o):Ht(e,n,r,o),n.child;case 11:return tm(e,n,n.type,n.pendingProps,o);case 7:return Ht(e,n,n.pendingProps,o),n.child;case 8:return Ht(e,n,n.pendingProps.children,o),n.child;case 12:return Ht(e,n,n.pendingProps.children,o),n.child;case 10:return r=n.pendingProps,Ba(n,n.type,r.value),Ht(e,n,r.children,o),n.child;case 9:return c=n.type._context,r=n.pendingProps.children,xo(n),c=Bt(c),r=r(c),n.flags|=1,Ht(e,n,r,o),n.child;case 14:return nm(e,n,n.type,n.pendingProps,o);case 15:return am(e,n,n.type,n.pendingProps,o);case 19:return fm(e,n,o);case 31:return wS(e,n,o);case 22:return om(e,n,o,n.pendingProps);case 24:return xo(n),r=Bt(At),e===null?(c=xu(),c===null&&(c=et,f=wu(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=o),c=f),n.memoizedState={parent:r,cache:c},Ou(n),Ba(n,At,c)):((e.lanes&o)!==0&&(Cu(e,n),dl(n,null,null,o),cl()),c=e.memoizedState,f=n.memoizedState,c.parent!==r?(c={parent:r,cache:r},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),Ba(n,At,r)):(r=f.cache,Ba(n,At,r),r!==c.cache&&Tu(n,[At],o,!0))),Ht(e,n,n.pendingProps.children,o),n.child;case 29:throw n.pendingProps}throw Error(l(156,n.tag))}function Aa(e){e.flags|=4}function uc(e,n,o,r,c){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if($m())e.flags|=8192;else throw Co=xr,Au}else e.flags&=-16777217}function mm(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Rh(n))if($m())e.flags|=8192;else throw Co=xr,Au}function Hr(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?tr():536870912,e.lanes|=n,yi|=n)}function gl(e,n){if(!Be)switch(e.tailMode){case"hidden":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ct(e){var n=e.alternate!==null&&e.alternate.child===e.child,o=0,r=0;if(n)for(var c=e.child;c!==null;)o|=c.lanes|c.childLanes,r|=c.subtreeFlags&65011712,r|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)o|=c.lanes|c.childLanes,r|=c.subtreeFlags,r|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=r,e.childLanes=o,n}function xS(e,n,o){var r=n.pendingProps;switch(gu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(n),null;case 1:return ct(n),null;case 3:return o=n.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Ta(At),tt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(ii(n)?Aa(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,_u())),ct(n),null;case 26:var c=n.type,f=n.memoizedState;return e===null?(Aa(n),f!==null?(ct(n),mm(n,f)):(ct(n),uc(n,c,null,r,o))):f?f!==e.memoizedState?(Aa(n),ct(n),mm(n,f)):(ct(n),n.flags&=-16777217):(e=e.memoizedProps,e!==r&&Aa(n),ct(n),uc(n,c,e,r,o)),null;case 27:if(fa(n),o=pe.current,c=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==r&&Aa(n);else{if(!r){if(n.stateNode===null)throw Error(l(166));return ct(n),null}e=re.current,ii(n)?Jf(n):(e=Sh(c,r,o),n.stateNode=e,Aa(n))}return ct(n),null;case 5:if(fa(n),c=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==r&&Aa(n);else{if(!r){if(n.stateNode===null)throw Error(l(166));return ct(n),null}if(f=re.current,ii(n))Jf(n);else{var g=as(pe.current);switch(f){case 1:f=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:f=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":f=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":f=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":f=g.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof r.is=="string"?g.createElement("select",{is:r.is}):g.createElement("select"),r.multiple?f.multiple=!0:r.size&&(f.size=r.size);break;default:f=typeof r.is=="string"?g.createElement(c,{is:r.is}):g.createElement(c)}}f[ft]=n,f[Dt]=r;e:for(g=n.child;g!==null;){if(g.tag===5||g.tag===6)f.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===n)break e;for(;g.sibling===null;){if(g.return===null||g.return===n)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}n.stateNode=f;e:switch(Lt(f,c,r),c){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Aa(n)}}return ct(n),uc(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,o),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==r&&Aa(n);else{if(typeof r!="string"&&n.stateNode===null)throw Error(l(166));if(e=pe.current,ii(n)){if(e=n.stateNode,o=n.memoizedProps,r=null,c=$t,c!==null)switch(c.tag){case 27:case 5:r=c.memoizedProps}e[ft]=n,e=!!(e.nodeValue===o||r!==null&&r.suppressHydrationWarning===!0||ch(e.nodeValue,o)),e||$a(n,!0)}else e=as(e).createTextNode(r),e[ft]=n,n.stateNode=e}return ct(n),null;case 31:if(o=n.memoizedState,e===null||e.memoizedState!==null){if(r=ii(n),o!==null){if(e===null){if(!r)throw Error(l(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[ft]=n}else wo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ct(n),e=!1}else o=_u(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return n.flags&256?(vn(n),n):(vn(n),null);if((n.flags&128)!==0)throw Error(l(558))}return ct(n),null;case 13:if(r=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=ii(n),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[ft]=n}else wo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ct(n),c=!1}else c=_u(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(vn(n),n):(vn(n),null)}return vn(n),(n.flags&128)!==0?(n.lanes=o,n):(o=r!==null,e=e!==null&&e.memoizedState!==null,o&&(r=n.child,c=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(c=r.alternate.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==c&&(r.flags|=2048)),o!==e&&o&&(n.child.flags|=8192),Hr(n,n.updateQueue),ct(n),null);case 4:return tt(),e===null&&Nc(n.stateNode.containerInfo),ct(n),null;case 10:return Ta(n.type),ct(n),null;case 19:if(L(Et),r=n.memoizedState,r===null)return ct(n),null;if(c=(n.flags&128)!==0,f=r.rendering,f===null)if(c)gl(r,!1);else{if(_t!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=Rr(e),f!==null){for(n.flags|=128,gl(r,!1),e=f.updateQueue,n.updateQueue=e,Hr(n,e),n.subtreeFlags=0,e=o,o=n.child;o!==null;)Hf(o,e),o=o.sibling;return oe(Et,Et.current&1|2),Be&&ba(n,r.treeForkCount),n.child}e=e.sibling}r.tail!==null&&St()>Jr&&(n.flags|=128,c=!0,gl(r,!1),n.lanes=4194304)}else{if(!c)if(e=Rr(f),e!==null){if(n.flags|=128,c=!0,e=e.updateQueue,n.updateQueue=e,Hr(n,e),gl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!f.alternate&&!Be)return ct(n),null}else 2*St()-r.renderingStartTime>Jr&&o!==536870912&&(n.flags|=128,c=!0,gl(r,!1),n.lanes=4194304);r.isBackwards?(f.sibling=n.child,n.child=f):(e=r.last,e!==null?e.sibling=f:n.child=f,r.last=f)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=St(),e.sibling=null,o=Et.current,oe(Et,c?o&1|2:o&1),Be&&ba(n,r.treeForkCount),e):(ct(n),null);case 22:case 23:return vn(n),zu(),r=n.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(n.flags|=8192):r&&(n.flags|=8192),r?(o&536870912)!==0&&(n.flags&128)===0&&(ct(n),n.subtreeFlags&6&&(n.flags|=8192)):ct(n),o=n.updateQueue,o!==null&&Hr(n,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),r=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==o&&(n.flags|=2048),e!==null&&L(Ao),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Ta(At),ct(n),null;case 25:return null;case 30:return null}throw Error(l(156,n.tag))}function AS(e,n){switch(gu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ta(At),tt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return fa(n),null;case 31:if(n.memoizedState!==null){if(vn(n),n.alternate===null)throw Error(l(340));wo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(vn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(l(340));wo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return L(Et),null;case 4:return tt(),null;case 10:return Ta(n.type),null;case 22:case 23:return vn(n),zu(),e!==null&&L(Ao),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Ta(At),null;case 25:return null;default:return null}}function hm(e,n){switch(gu(n),n.tag){case 3:Ta(At),tt();break;case 26:case 27:case 5:fa(n);break;case 4:tt();break;case 31:n.memoizedState!==null&&vn(n);break;case 13:vn(n);break;case 19:L(Et);break;case 10:Ta(n.type);break;case 22:case 23:vn(n),zu(),e!==null&&L(Ao);break;case 24:Ta(At)}}function yl(e,n){try{var o=n.updateQueue,r=o!==null?o.lastEffect:null;if(r!==null){var c=r.next;o=c;do{if((o.tag&e)===e){r=void 0;var f=o.create,g=o.inst;r=f(),g.destroy=r}o=o.next}while(o!==c)}}catch(_){Xe(n,n.return,_)}}function Ja(e,n,o){try{var r=n.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&e)===e){var g=r.inst,_=g.destroy;if(_!==void 0){g.destroy=void 0,c=n;var A=o,q=_;try{q()}catch(V){Xe(c,A,V)}}}r=r.next}while(r!==f)}}catch(V){Xe(n,n.return,V)}}function vm(e){var n=e.updateQueue;if(n!==null){var o=e.stateNode;try{lp(n,o)}catch(r){Xe(e,e.return,r)}}}function gm(e,n,o){o.props=No(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(r){Xe(e,n,r)}}function _l(e,n){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof o=="function"?e.refCleanup=o(r):o.current=r}}catch(c){Xe(e,n,c)}}function sa(e,n){var o=e.ref,r=e.refCleanup;if(o!==null)if(typeof r=="function")try{r()}catch(c){Xe(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(c){Xe(e,n,c)}else o.current=null}function ym(e){var n=e.type,o=e.memoizedProps,r=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break e;case"img":o.src?r.src=o.src:o.srcSet&&(r.srcset=o.srcSet)}}catch(c){Xe(e,e.return,c)}}function cc(e,n,o){try{var r=e.stateNode;XS(r,e.type,o,n),r[Dt]=n}catch(c){Xe(e,e.return,c)}}function _m(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&eo(e.type)||e.tag===4}function dc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_m(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&eo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fc(e,n,o){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,n):(n=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,n.appendChild(e),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=ga));else if(r!==4&&(r===27&&eo(e.type)&&(o=e.stateNode,n=null),e=e.child,e!==null))for(fc(e,n,o),e=e.sibling;e!==null;)fc(e,n,o),e=e.sibling}function Lr(e,n,o){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?o.insertBefore(e,n):o.appendChild(e);else if(r!==4&&(r===27&&eo(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(Lr(e,n,o),e=e.sibling;e!==null;)Lr(e,n,o),e=e.sibling}function bm(e){var n=e.stateNode,o=e.memoizedProps;try{for(var r=e.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);Lt(n,r,o),n[ft]=e,n[Dt]=o}catch(f){Xe(e,e.return,f)}}var Oa=!1,Rt=!1,pc=!1,Sm=typeof WeakSet=="function"?WeakSet:Set,qt=null;function OS(e,n){if(e=e.containerInfo,kc=cs,e=If(e),lu(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var r=o.getSelection&&o.getSelection();if(r&&r.rangeCount!==0){o=r.anchorNode;var c=r.anchorOffset,f=r.focusNode;r=r.focusOffset;try{o.nodeType,f.nodeType}catch{o=null;break e}var g=0,_=-1,A=-1,q=0,V=0,J=e,j=null;t:for(;;){for(var H;J!==o||c!==0&&J.nodeType!==3||(_=g+c),J!==f||r!==0&&J.nodeType!==3||(A=g+r),J.nodeType===3&&(g+=J.nodeValue.length),(H=J.firstChild)!==null;)j=J,J=H;for(;;){if(J===e)break t;if(j===o&&++q===c&&(_=g),j===f&&++V===r&&(A=g),(H=J.nextSibling)!==null)break;J=j,j=J.parentNode}J=H}o=_===-1||A===-1?null:{start:_,end:A}}else o=null}o=o||{start:0,end:0}}else o=null;for(Dc={focusedElem:e,selectionRange:o},cs=!1,qt=n;qt!==null;)if(n=qt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,qt=e;else for(;qt!==null;){switch(n=qt,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)c=e[o],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,o=n,c=f.memoizedProps,f=f.memoizedState,r=o.stateNode;try{var fe=No(o.type,c);e=r.getSnapshotBeforeUpdate(fe,f),r.__reactInternalSnapshotBeforeUpdate=e}catch(Te){Xe(o,o.return,Te)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,o=e.nodeType,o===9)jc(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=n.sibling,e!==null){e.return=n.return,qt=e;break}qt=n.return}}function Tm(e,n,o){var r=o.flags;switch(o.tag){case 0:case 11:case 15:Ra(e,o),r&4&&yl(5,o);break;case 1:if(Ra(e,o),r&4)if(e=o.stateNode,n===null)try{e.componentDidMount()}catch(g){Xe(o,o.return,g)}else{var c=No(o.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Xe(o,o.return,g)}}r&64&&vm(o),r&512&&_l(o,o.return);break;case 3:if(Ra(e,o),r&64&&(e=o.updateQueue,e!==null)){if(n=null,o.child!==null)switch(o.child.tag){case 27:case 5:n=o.child.stateNode;break;case 1:n=o.child.stateNode}try{lp(e,n)}catch(g){Xe(o,o.return,g)}}break;case 27:n===null&&r&4&&bm(o);case 26:case 5:Ra(e,o),n===null&&r&4&&ym(o),r&512&&_l(o,o.return);break;case 12:Ra(e,o);break;case 31:Ra(e,o),r&4&&xm(e,o);break;case 13:Ra(e,o),r&4&&Am(e,o),r&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=US.bind(null,o),nT(e,o))));break;case 22:if(r=o.memoizedState!==null||Oa,!r){n=n!==null&&n.memoizedState!==null||Rt,c=Oa;var f=Rt;Oa=r,(Rt=n)&&!f?Ma(e,o,(o.subtreeFlags&8772)!==0):Ra(e,o),Oa=c,Rt=f}break;case 30:break;default:Ra(e,o)}}function wm(e){var n=e.alternate;n!==null&&(e.alternate=null,wm(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&wt(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var pt=null,on=!1;function Ca(e,n,o){for(o=o.child;o!==null;)Em(e,n,o),o=o.sibling}function Em(e,n,o){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(Tt,o)}catch{}switch(o.tag){case 26:Rt||sa(o,n),Ca(e,n,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Rt||sa(o,n);var r=pt,c=on;eo(o.type)&&(pt=o.stateNode,on=!1),Ca(e,n,o),Cl(o.stateNode),pt=r,on=c;break;case 5:Rt||sa(o,n);case 6:if(r=pt,c=on,pt=null,Ca(e,n,o),pt=r,on=c,pt!==null)if(on)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(o.stateNode)}catch(f){Xe(o,n,f)}else try{pt.removeChild(o.stateNode)}catch(f){Xe(o,n,f)}break;case 18:pt!==null&&(on?(e=pt,vh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),Ai(e)):vh(pt,o.stateNode));break;case 4:r=pt,c=on,pt=o.stateNode.containerInfo,on=!0,Ca(e,n,o),pt=r,on=c;break;case 0:case 11:case 14:case 15:Ja(2,o,n),Rt||Ja(4,o,n),Ca(e,n,o);break;case 1:Rt||(sa(o,n),r=o.stateNode,typeof r.componentWillUnmount=="function"&&gm(o,n,r)),Ca(e,n,o);break;case 21:Ca(e,n,o);break;case 22:Rt=(r=Rt)||o.memoizedState!==null,Ca(e,n,o),Rt=r;break;default:Ca(e,n,o)}}function xm(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ai(e)}catch(o){Xe(n,n.return,o)}}}function Am(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ai(e)}catch(o){Xe(n,n.return,o)}}function CS(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Sm),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Sm),n;default:throw Error(l(435,e.tag))}}function Gr(e,n){var o=CS(e);n.forEach(function(r){if(!o.has(r)){o.add(r);var c=qS.bind(null,e,r);r.then(c,c)}})}function ln(e,n){var o=n.deletions;if(o!==null)for(var r=0;r<o.length;r++){var c=o[r],f=e,g=n,_=g;e:for(;_!==null;){switch(_.tag){case 27:if(eo(_.type)){pt=_.stateNode,on=!1;break e}break;case 5:pt=_.stateNode,on=!1;break e;case 3:case 4:pt=_.stateNode.containerInfo,on=!0;break e}_=_.return}if(pt===null)throw Error(l(160));Em(f,g,c),pt=null,on=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Om(n,e),n=n.sibling}var Yn=null;function Om(e,n){var o=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ln(n,e),rn(e),r&4&&(Ja(3,e,e.return),yl(3,e),Ja(5,e,e.return));break;case 1:ln(n,e),rn(e),r&512&&(Rt||o===null||sa(o,o.return)),r&64&&Oa&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?r:o.concat(r))));break;case 26:var c=Yn;if(ln(n,e),rn(e),r&512&&(Rt||o===null||sa(o,o.return)),r&4){var f=o!==null?o.memoizedState:null;if(r=e.memoizedState,o===null)if(r===null)if(e.stateNode===null){e:{r=e.type,o=e.memoizedProps,c=c.ownerDocument||c;t:switch(r){case"title":f=c.getElementsByTagName("title")[0],(!f||f[_e]||f[ft]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(r),c.head.insertBefore(f,c.querySelector("head > title"))),Lt(f,r,o),f[ft]=e,st(f),r=f;break e;case"link":var g=Oh("link","href",c).get(r+(o.href||""));if(g){for(var _=0;_<g.length;_++)if(f=g[_],f.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&f.getAttribute("rel")===(o.rel==null?null:o.rel)&&f.getAttribute("title")===(o.title==null?null:o.title)&&f.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){g.splice(_,1);break t}}f=c.createElement(r),Lt(f,r,o),c.head.appendChild(f);break;case"meta":if(g=Oh("meta","content",c).get(r+(o.content||""))){for(_=0;_<g.length;_++)if(f=g[_],f.getAttribute("content")===(o.content==null?null:""+o.content)&&f.getAttribute("name")===(o.name==null?null:o.name)&&f.getAttribute("property")===(o.property==null?null:o.property)&&f.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&f.getAttribute("charset")===(o.charSet==null?null:o.charSet)){g.splice(_,1);break t}}f=c.createElement(r),Lt(f,r,o),c.head.appendChild(f);break;default:throw Error(l(468,r))}f[ft]=e,st(f),r=f}e.stateNode=r}else Ch(c,e.type,e.stateNode);else e.stateNode=Ah(c,r,e.memoizedProps);else f!==r?(f===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):f.count--,r===null?Ch(c,e.type,e.stateNode):Ah(c,r,e.memoizedProps)):r===null&&e.stateNode!==null&&cc(e,e.memoizedProps,o.memoizedProps)}break;case 27:ln(n,e),rn(e),r&512&&(Rt||o===null||sa(o,o.return)),o!==null&&r&4&&cc(e,e.memoizedProps,o.memoizedProps);break;case 5:if(ln(n,e),rn(e),r&512&&(Rt||o===null||sa(o,o.return)),e.flags&32){c=e.stateNode;try{Qo(c,"")}catch(fe){Xe(e,e.return,fe)}}r&4&&e.stateNode!=null&&(c=e.memoizedProps,cc(e,c,o!==null?o.memoizedProps:c)),r&1024&&(pc=!0);break;case 6:if(ln(n,e),rn(e),r&4){if(e.stateNode===null)throw Error(l(162));r=e.memoizedProps,o=e.stateNode;try{o.nodeValue=r}catch(fe){Xe(e,e.return,fe)}}break;case 3:if(ls=null,c=Yn,Yn=os(n.containerInfo),ln(n,e),Yn=c,rn(e),r&4&&o!==null&&o.memoizedState.isDehydrated)try{Ai(n.containerInfo)}catch(fe){Xe(e,e.return,fe)}pc&&(pc=!1,Cm(e));break;case 4:r=Yn,Yn=os(e.stateNode.containerInfo),ln(n,e),rn(e),Yn=r;break;case 12:ln(n,e),rn(e);break;case 31:ln(n,e),rn(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Gr(e,r)));break;case 13:ln(n,e),rn(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Yr=St()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Gr(e,r)));break;case 22:c=e.memoizedState!==null;var A=o!==null&&o.memoizedState!==null,q=Oa,V=Rt;if(Oa=q||c,Rt=V||A,ln(n,e),Rt=V,Oa=q,rn(e),r&8192)e:for(n=e.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(o===null||A||Oa||Rt||zo(e)),o=null,n=e;;){if(n.tag===5||n.tag===26){if(o===null){A=o=n;try{if(f=A.stateNode,c)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{_=A.stateNode;var J=A.memoizedProps.style,j=J!=null&&J.hasOwnProperty("display")?J.display:null;_.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(fe){Xe(A,A.return,fe)}}}else if(n.tag===6){if(o===null){A=n;try{A.stateNode.nodeValue=c?"":A.memoizedProps}catch(fe){Xe(A,A.return,fe)}}}else if(n.tag===18){if(o===null){A=n;try{var H=A.stateNode;c?gh(H,!0):gh(A.stateNode,!1)}catch(fe){Xe(A,A.return,fe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;o===n&&(o=null),n=n.return}o===n&&(o=null),n.sibling.return=n.return,n=n.sibling}r&4&&(r=e.updateQueue,r!==null&&(o=r.retryQueue,o!==null&&(r.retryQueue=null,Gr(e,o))));break;case 19:ln(n,e),rn(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Gr(e,r)));break;case 30:break;case 21:break;default:ln(n,e),rn(e)}}function rn(e){var n=e.flags;if(n&2){try{for(var o,r=e.return;r!==null;){if(_m(r)){o=r;break}r=r.return}if(o==null)throw Error(l(160));switch(o.tag){case 27:var c=o.stateNode,f=dc(e);Lr(e,f,c);break;case 5:var g=o.stateNode;o.flags&32&&(Qo(g,""),o.flags&=-33);var _=dc(e);Lr(e,_,g);break;case 3:case 4:var A=o.stateNode.containerInfo,q=dc(e);fc(e,q,A);break;default:throw Error(l(161))}}catch(V){Xe(e,e.return,V)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Cm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Cm(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ra(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Tm(e,n.alternate,n),n=n.sibling}function zo(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ja(4,n,n.return),zo(n);break;case 1:sa(n,n.return);var o=n.stateNode;typeof o.componentWillUnmount=="function"&&gm(n,n.return,o),zo(n);break;case 27:Cl(n.stateNode);case 26:case 5:sa(n,n.return),zo(n);break;case 22:n.memoizedState===null&&zo(n);break;case 30:zo(n);break;default:zo(n)}e=e.sibling}}function Ma(e,n,o){for(o=o&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var r=n.alternate,c=e,f=n,g=f.flags;switch(f.tag){case 0:case 11:case 15:Ma(c,f,o),yl(4,f);break;case 1:if(Ma(c,f,o),r=f,c=r.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(q){Xe(r,r.return,q)}if(r=f,c=r.updateQueue,c!==null){var _=r.stateNode;try{var A=c.shared.hiddenCallbacks;if(A!==null)for(c.shared.hiddenCallbacks=null,c=0;c<A.length;c++)ip(A[c],_)}catch(q){Xe(r,r.return,q)}}o&&g&64&&vm(f),_l(f,f.return);break;case 27:bm(f);case 26:case 5:Ma(c,f,o),o&&r===null&&g&4&&ym(f),_l(f,f.return);break;case 12:Ma(c,f,o);break;case 31:Ma(c,f,o),o&&g&4&&xm(c,f);break;case 13:Ma(c,f,o),o&&g&4&&Am(c,f);break;case 22:f.memoizedState===null&&Ma(c,f,o),_l(f,f.return);break;case 30:break;default:Ma(c,f,o)}n=n.sibling}}function mc(e,n){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&il(o))}function hc(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&il(e))}function Jn(e,n,o,r){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rm(e,n,o,r),n=n.sibling}function Rm(e,n,o,r){var c=n.flags;switch(n.tag){case 0:case 11:case 15:Jn(e,n,o,r),c&2048&&yl(9,n);break;case 1:Jn(e,n,o,r);break;case 3:Jn(e,n,o,r),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&il(e)));break;case 12:if(c&2048){Jn(e,n,o,r),e=n.stateNode;try{var f=n.memoizedProps,g=f.id,_=f.onPostCommit;typeof _=="function"&&_(g,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){Xe(n,n.return,A)}}else Jn(e,n,o,r);break;case 31:Jn(e,n,o,r);break;case 13:Jn(e,n,o,r);break;case 23:break;case 22:f=n.stateNode,g=n.alternate,n.memoizedState!==null?f._visibility&2?Jn(e,n,o,r):bl(e,n):f._visibility&2?Jn(e,n,o,r):(f._visibility|=2,hi(e,n,o,r,(n.subtreeFlags&10256)!==0||!1)),c&2048&&mc(g,n);break;case 24:Jn(e,n,o,r),c&2048&&hc(n.alternate,n);break;default:Jn(e,n,o,r)}}function hi(e,n,o,r,c){for(c=c&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,g=n,_=o,A=r,q=g.flags;switch(g.tag){case 0:case 11:case 15:hi(f,g,_,A,c),yl(8,g);break;case 23:break;case 22:var V=g.stateNode;g.memoizedState!==null?V._visibility&2?hi(f,g,_,A,c):bl(f,g):(V._visibility|=2,hi(f,g,_,A,c)),c&&q&2048&&mc(g.alternate,g);break;case 24:hi(f,g,_,A,c),c&&q&2048&&hc(g.alternate,g);break;default:hi(f,g,_,A,c)}n=n.sibling}}function bl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var o=e,r=n,c=r.flags;switch(r.tag){case 22:bl(o,r),c&2048&&mc(r.alternate,r);break;case 24:bl(o,r),c&2048&&hc(r.alternate,r);break;default:bl(o,r)}n=n.sibling}}var Sl=8192;function vi(e,n,o){if(e.subtreeFlags&Sl)for(e=e.child;e!==null;)Mm(e,n,o),e=e.sibling}function Mm(e,n,o){switch(e.tag){case 26:vi(e,n,o),e.flags&Sl&&e.memoizedState!==null&&mT(o,Yn,e.memoizedState,e.memoizedProps);break;case 5:vi(e,n,o);break;case 3:case 4:var r=Yn;Yn=os(e.stateNode.containerInfo),vi(e,n,o),Yn=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Sl,Sl=16777216,vi(e,n,o),Sl=r):vi(e,n,o));break;default:vi(e,n,o)}}function Nm(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Tl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var r=n[o];qt=r,Im(r,e)}Nm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)zm(e),e=e.sibling}function zm(e){switch(e.tag){case 0:case 11:case 15:Tl(e),e.flags&2048&&Ja(9,e,e.return);break;case 3:Tl(e);break;case 12:Tl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Vr(e)):Tl(e);break;default:Tl(e)}}function Vr(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var r=n[o];qt=r,Im(r,e)}Nm(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ja(8,n,n.return),Vr(n);break;case 22:o=n.stateNode,o._visibility&2&&(o._visibility&=-3,Vr(n));break;default:Vr(n)}e=e.sibling}}function Im(e,n){for(;qt!==null;){var o=qt;switch(o.tag){case 0:case 11:case 15:Ja(8,o,n);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var r=o.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:il(o.memoizedState.cache)}if(r=o.child,r!==null)r.return=o,qt=r;else e:for(o=e;qt!==null;){r=qt;var c=r.sibling,f=r.return;if(wm(r),r===o){qt=null;break e}if(c!==null){c.return=f,qt=c;break e}qt=f}}}var RS={getCacheForType:function(e){var n=Bt(At),o=n.data.get(e);return o===void 0&&(o=e(),n.data.set(e,o)),o},cacheSignal:function(){return Bt(At).controller.signal}},MS=typeof WeakMap=="function"?WeakMap:Map,Ye=0,et=null,De=null,qe=0,Je=0,gn=null,Xa=!1,gi=!1,vc=!1,Na=0,_t=0,Qa=0,Io=0,gc=0,yn=0,yi=0,wl=null,sn=null,yc=!1,Yr=0,km=0,Jr=1/0,Xr=null,Ka=null,zt=0,Pa=null,_i=null,za=0,_c=0,bc=null,Dm=null,El=0,Sc=null;function _n(){return(Ye&2)!==0&&qe!==0?qe&-qe:k.T!==null?Oc():Ua()}function Um(){if(yn===0)if((qe&536870912)===0||Be){var e=oa;oa<<=1,(oa&3932160)===0&&(oa=262144),yn=e}else yn=536870912;return e=hn.current,e!==null&&(e.flags|=32),yn}function un(e,n,o){(e===et&&(Je===2||Je===9)||e.cancelPendingCommit!==null)&&(bi(e,0),Fa(e,qe,yn,!1)),Da(e,o),((Ye&2)===0||e!==et)&&(e===et&&((Ye&2)===0&&(Io|=o),_t===4&&Fa(e,qe,yn,!1)),ua(e))}function qm(e,n,o){if((Ye&6)!==0)throw Error(l(327));var r=!o&&(n&127)===0&&(n&e.expiredLanes)===0||pa(e,n),c=r?IS(e,n):wc(e,n,!0),f=r;do{if(c===0){gi&&!r&&Fa(e,n,0,!1);break}else{if(o=e.current.alternate,f&&!NS(o)){c=wc(e,n,!1),f=!1;continue}if(c===2){if(f=n,e.errorRecoveryDisabledLanes&f)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){n=g;e:{var _=e;c=wl;var A=_.current.memoizedState.isDehydrated;if(A&&(bi(_,g).flags|=256),g=wc(_,g,!1),g!==2){if(vc&&!A){_.errorRecoveryDisabledLanes|=f,Io|=f,c=4;break e}f=sn,sn=c,f!==null&&(sn===null?sn=f:sn.push.apply(sn,f))}c=g}if(f=!1,c!==2)continue}}if(c===1){bi(e,0),Fa(e,n,0,!0);break}e:{switch(r=e,f=c,f){case 0:case 1:throw Error(l(345));case 4:if((n&4194048)!==n)break;case 6:Fa(r,n,yn,!Xa);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(l(329))}if((n&62914560)===n&&(c=Yr+300-St(),10<c)){if(Fa(r,n,yn,!Xa),vo(r,0,!0)!==0)break e;za=n,r.timeoutHandle=mh(jm.bind(null,r,o,sn,Xr,yc,n,yn,Io,yi,Xa,f,"Throttled",-0,0),c);break e}jm(r,o,sn,Xr,yc,n,yn,Io,yi,Xa,f,null,-0,0)}}break}while(!0);ua(e)}function jm(e,n,o,r,c,f,g,_,A,q,V,J,j,H){if(e.timeoutHandle=-1,J=n.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ga},Mm(n,f,J);var fe=(f&62914560)===f?Yr-St():(f&4194048)===f?km-St():0;if(fe=hT(J,fe),fe!==null){za=f,e.cancelPendingCommit=fe(Ym.bind(null,e,n,f,o,r,c,g,_,A,V,J,null,j,H)),Fa(e,f,g,!q);return}}Ym(e,n,f,o,r,c,g,_,A)}function NS(e){for(var n=e;;){var o=n.tag;if((o===0||o===11||o===15)&&n.flags&16384&&(o=n.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var r=0;r<o.length;r++){var c=o[r],f=c.getSnapshot;c=c.value;try{if(!pn(f(),c))return!1}catch{return!1}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Fa(e,n,o,r){n&=~gc,n&=~Io,e.suspendedLanes|=n,e.pingedLanes&=~n,r&&(e.warmLanes|=n),r=e.expirationTimes;for(var c=n;0<c;){var f=31-Jt(c),g=1<<f;r[f]=-1,c&=~g}o!==0&&ma(e,o,n)}function Qr(){return(Ye&6)===0?(xl(0),!1):!0}function Tc(){if(De!==null){if(Je===0)var e=De.return;else e=De,Sa=Eo=null,ju(e),ci=null,rl=0,e=De;for(;e!==null;)hm(e.alternate,e),e=e.return;De=null}}function bi(e,n){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,PS(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),za=0,Tc(),et=e,De=o=_a(e.current,null),qe=n,Je=0,gn=null,Xa=!1,gi=pa(e,n),vc=!1,yi=yn=gc=Io=Qa=_t=0,sn=wl=null,yc=!1,(n&8)!==0&&(n|=n&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=n;0<r;){var c=31-Jt(r),f=1<<c;n|=e[c],r&=~f}return Na=n,vr(),o}function Zm(e,n){ze=null,k.H=hl,n===ui||n===Er?(n=tp(),Je=3):n===Au?(n=tp(),Je=4):Je=n===ec?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,gn=n,De===null&&(_t=1,jr(e,kn(n,e.current)))}function $m(){var e=hn.current;return e===null?!0:(qe&4194048)===qe?jn===null:(qe&62914560)===qe||(qe&536870912)!==0?e===jn:!1}function Bm(){var e=k.H;return k.H=hl,e===null?hl:e}function Hm(){var e=k.A;return k.A=RS,e}function Kr(){_t=4,Xa||(qe&4194048)!==qe&&hn.current!==null||(gi=!0),(Qa&134217727)===0&&(Io&134217727)===0||et===null||Fa(et,qe,yn,!1)}function wc(e,n,o){var r=Ye;Ye|=2;var c=Bm(),f=Hm();(et!==e||qe!==n)&&(Xr=null,bi(e,n)),n=!1;var g=_t;e:do try{if(Je!==0&&De!==null){var _=De,A=gn;switch(Je){case 8:Tc(),g=6;break e;case 3:case 2:case 9:case 6:hn.current===null&&(n=!0);var q=Je;if(Je=0,gn=null,Si(e,_,A,q),o&&gi){g=0;break e}break;default:q=Je,Je=0,gn=null,Si(e,_,A,q)}}zS(),g=_t;break}catch(V){Zm(e,V)}while(!0);return n&&e.shellSuspendCounter++,Sa=Eo=null,Ye=r,k.H=c,k.A=f,De===null&&(et=null,qe=0,vr()),g}function zS(){for(;De!==null;)Lm(De)}function IS(e,n){var o=Ye;Ye|=2;var r=Bm(),c=Hm();et!==e||qe!==n?(Xr=null,Jr=St()+500,bi(e,n)):gi=pa(e,n);e:do try{if(Je!==0&&De!==null){n=De;var f=gn;t:switch(Je){case 1:Je=0,gn=null,Si(e,n,f,1);break;case 2:case 9:if(Wf(f)){Je=0,gn=null,Gm(n);break}n=function(){Je!==2&&Je!==9||et!==e||(Je=7),ua(e)},f.then(n,n);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:Wf(f)?(Je=0,gn=null,Gm(n)):(Je=0,gn=null,Si(e,n,f,7));break;case 5:var g=null;switch(De.tag){case 26:g=De.memoizedState;case 5:case 27:var _=De;if(g?Rh(g):_.stateNode.complete){Je=0,gn=null;var A=_.sibling;if(A!==null)De=A;else{var q=_.return;q!==null?(De=q,Pr(q)):De=null}break t}}Je=0,gn=null,Si(e,n,f,5);break;case 6:Je=0,gn=null,Si(e,n,f,6);break;case 8:Tc(),_t=6;break e;default:throw Error(l(462))}}kS();break}catch(V){Zm(e,V)}while(!0);return Sa=Eo=null,k.H=r,k.A=c,Ye=o,De!==null?0:(et=null,qe=0,vr(),_t)}function kS(){for(;De!==null&&!$e();)Lm(De)}function Lm(e){var n=pm(e.alternate,e,Na);e.memoizedProps=e.pendingProps,n===null?Pr(e):De=n}function Gm(e){var n=e,o=n.alternate;switch(n.tag){case 15:case 0:n=rm(o,n,n.pendingProps,n.type,void 0,qe);break;case 11:n=rm(o,n,n.pendingProps,n.type.render,n.ref,qe);break;case 5:ju(n);default:hm(o,n),n=De=Hf(n,Na),n=pm(o,n,Na)}e.memoizedProps=e.pendingProps,n===null?Pr(e):De=n}function Si(e,n,o,r){Sa=Eo=null,ju(n),ci=null,rl=0;var c=n.return;try{if(TS(e,c,n,o,qe)){_t=1,jr(e,kn(o,e.current)),De=null;return}}catch(f){if(c!==null)throw De=c,f;_t=1,jr(e,kn(o,e.current)),De=null;return}n.flags&32768?(Be||r===1?e=!0:gi||(qe&536870912)!==0?e=!1:(Xa=e=!0,(r===2||r===9||r===3||r===6)&&(r=hn.current,r!==null&&r.tag===13&&(r.flags|=16384))),Vm(n,e)):Pr(n)}function Pr(e){var n=e;do{if((n.flags&32768)!==0){Vm(n,Xa);return}e=n.return;var o=xS(n.alternate,n,Na);if(o!==null){De=o;return}if(n=n.sibling,n!==null){De=n;return}De=n=e}while(n!==null);_t===0&&(_t=5)}function Vm(e,n){do{var o=AS(e.alternate,e);if(o!==null){o.flags&=32767,De=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!n&&(e=e.sibling,e!==null)){De=e;return}De=e=o}while(e!==null);_t=6,De=null}function Ym(e,n,o,r,c,f,g,_,A){e.cancelPendingCommit=null;do Fr();while(zt!==0);if((Ye&6)!==0)throw Error(l(327));if(n!==null){if(n===e.current)throw Error(l(177));if(f=n.lanes|n.childLanes,f|=du,nr(e,o,f,g,_,A),e===et&&(De=et=null,qe=0),_i=n,Pa=e,za=o,_c=f,bc=c,Dm=r,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,jS(aa,function(){return Pm(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||r){r=k.T,k.T=null,c=B.p,B.p=2,g=Ye,Ye|=4;try{OS(e,n,o)}finally{Ye=g,B.p=c,k.T=r}}zt=1,Jm(),Xm(),Qm()}}function Jm(){if(zt===1){zt=0;var e=Pa,n=_i,o=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||o){o=k.T,k.T=null;var r=B.p;B.p=2;var c=Ye;Ye|=4;try{Om(n,e);var f=Dc,g=If(e.containerInfo),_=f.focusedElem,A=f.selectionRange;if(g!==_&&_&&_.ownerDocument&&zf(_.ownerDocument.documentElement,_)){if(A!==null&&lu(_)){var q=A.start,V=A.end;if(V===void 0&&(V=q),"selectionStart"in _)_.selectionStart=q,_.selectionEnd=Math.min(V,_.value.length);else{var J=_.ownerDocument||document,j=J&&J.defaultView||window;if(j.getSelection){var H=j.getSelection(),fe=_.textContent.length,Te=Math.min(A.start,fe),We=A.end===void 0?Te:Math.min(A.end,fe);!H.extend&&Te>We&&(g=We,We=Te,Te=g);var I=Nf(_,Te),M=Nf(_,We);if(I&&M&&(H.rangeCount!==1||H.anchorNode!==I.node||H.anchorOffset!==I.offset||H.focusNode!==M.node||H.focusOffset!==M.offset)){var U=J.createRange();U.setStart(I.node,I.offset),H.removeAllRanges(),Te>We?(H.addRange(U),H.extend(M.node,M.offset)):(U.setEnd(M.node,M.offset),H.addRange(U))}}}}for(J=[],H=_;H=H.parentNode;)H.nodeType===1&&J.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<J.length;_++){var Y=J[_];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}cs=!!kc,Dc=kc=null}finally{Ye=c,B.p=r,k.T=o}}e.current=n,zt=2}}function Xm(){if(zt===2){zt=0;var e=Pa,n=_i,o=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||o){o=k.T,k.T=null;var r=B.p;B.p=2;var c=Ye;Ye|=4;try{Tm(e,n.alternate,n)}finally{Ye=c,B.p=r,k.T=o}}zt=3}}function Qm(){if(zt===4||zt===3){zt=0,Yt();var e=Pa,n=_i,o=za,r=Dm;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?zt=5:(zt=0,_i=Pa=null,Km(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ka=null),ha(o),n=n.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(Tt,n,void 0,(n.current.flags&128)===128)}catch{}if(r!==null){n=k.T,c=B.p,B.p=2,k.T=null;try{for(var f=e.onRecoverableError,g=0;g<r.length;g++){var _=r[g];f(_.value,{componentStack:_.stack})}}finally{k.T=n,B.p=c}}(za&3)!==0&&Fr(),ua(e),c=e.pendingLanes,(o&261930)!==0&&(c&42)!==0?e===Sc?El++:(El=0,Sc=e):El=0,xl(0)}}function Km(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,il(n)))}function Fr(){return Jm(),Xm(),Qm(),Pm()}function Pm(){if(zt!==5)return!1;var e=Pa,n=_c;_c=0;var o=ha(za),r=k.T,c=B.p;try{B.p=32>o?32:o,k.T=null,o=bc,bc=null;var f=Pa,g=za;if(zt=0,_i=Pa=null,za=0,(Ye&6)!==0)throw Error(l(331));var _=Ye;if(Ye|=4,zm(f.current),Rm(f,f.current,g,o),Ye=_,xl(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(Tt,f)}catch{}return!0}finally{B.p=c,k.T=r,Km(e,n)}}function Fm(e,n,o){n=kn(o,n),n=Wu(e.stateNode,n,2),e=Ga(e,n,2),e!==null&&(Da(e,2),ua(e))}function Xe(e,n,o){if(e.tag===3)Fm(e,e,o);else for(;n!==null;){if(n.tag===3){Fm(n,e,o);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ka===null||!Ka.has(r))){e=kn(o,e),o=Wp(2),r=Ga(n,o,2),r!==null&&(em(o,r,n,e),Da(r,2),ua(r));break}}n=n.return}}function Ec(e,n,o){var r=e.pingCache;if(r===null){r=e.pingCache=new MS;var c=new Set;r.set(n,c)}else c=r.get(n),c===void 0&&(c=new Set,r.set(n,c));c.has(o)||(vc=!0,c.add(o),e=DS.bind(null,e,n,o),n.then(e,e))}function DS(e,n,o){var r=e.pingCache;r!==null&&r.delete(n),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,et===e&&(qe&o)===o&&(_t===4||_t===3&&(qe&62914560)===qe&&300>St()-Yr?(Ye&2)===0&&bi(e,0):gc|=o,yi===qe&&(yi=0)),ua(e)}function Wm(e,n){n===0&&(n=tr()),e=So(e,n),e!==null&&(Da(e,n),ua(e))}function US(e){var n=e.memoizedState,o=0;n!==null&&(o=n.retryLane),Wm(e,o)}function qS(e,n){var o=0;switch(e.tag){case 31:case 13:var r=e.stateNode,c=e.memoizedState;c!==null&&(o=c.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}r!==null&&r.delete(n),Wm(e,o)}function jS(e,n){return Ze(e,n)}var Wr=null,Ti=null,xc=!1,es=!1,Ac=!1,Wa=0;function ua(e){e!==Ti&&e.next===null&&(Ti===null?Wr=Ti=e:Ti=Ti.next=e),es=!0,xc||(xc=!0,$S())}function xl(e,n){if(!Ac&&es){Ac=!0;do for(var o=!1,r=Wr;r!==null;){if(e!==0){var c=r.pendingLanes;if(c===0)var f=0;else{var g=r.suspendedLanes,_=r.pingedLanes;f=(1<<31-Jt(42|e)+1)-1,f&=c&~(g&~_),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(o=!0,ah(r,f))}else f=qe,f=vo(r,r===et?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(f&3)===0||pa(r,f)||(o=!0,ah(r,f));r=r.next}while(o);Ac=!1}}function ZS(){eh()}function eh(){es=xc=!1;var e=0;Wa!==0&&KS()&&(e=Wa);for(var n=St(),o=null,r=Wr;r!==null;){var c=r.next,f=th(r,n);f===0?(r.next=null,o===null?Wr=c:o.next=c,c===null&&(Ti=o)):(o=r,(e!==0||(f&3)!==0)&&(es=!0)),r=c}zt!==0&&zt!==5||xl(e),Wa!==0&&(Wa=0)}function th(e,n){for(var o=e.suspendedLanes,r=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var g=31-Jt(f),_=1<<g,A=c[g];A===-1?((_&o)===0||(_&r)!==0)&&(c[g]=Li(_,n)):A<=n&&(e.expiredLanes|=_),f&=~_}if(n=et,o=qe,o=vo(e,e===n?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,o===0||e===n&&(Je===2||Je===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&nt(r),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||pa(e,o)){if(n=o&-o,n===e.callbackPriority)return n;switch(r!==null&&nt(r),ha(o)){case 2:case 8:o=Ln;break;case 32:o=aa;break;case 268435456:o=Pt;break;default:o=aa}return r=nh.bind(null,e),o=Ze(o,r),e.callbackPriority=n,e.callbackNode=o,n}return r!==null&&r!==null&&nt(r),e.callbackPriority=2,e.callbackNode=null,2}function nh(e,n){if(zt!==0&&zt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(Fr()&&e.callbackNode!==o)return null;var r=qe;return r=vo(e,e===et?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(qm(e,r,n),th(e,St()),e.callbackNode!=null&&e.callbackNode===o?nh.bind(null,e):null)}function ah(e,n){if(Fr())return null;qm(e,n,!0)}function $S(){FS(function(){(Ye&6)!==0?Ze(Ke,ZS):eh()})}function Oc(){if(Wa===0){var e=ri;e===0&&(e=Go,Go<<=1,(Go&261888)===0&&(Go=256)),Wa=e}return Wa}function oh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:sr(""+e)}function ih(e,n){var o=n.ownerDocument.createElement("input");return o.name=n.name,o.value=n.value,e.id&&o.setAttribute("form",e.id),n.parentNode.insertBefore(o,n),e=new FormData(e),o.parentNode.removeChild(o),e}function BS(e,n,o,r,c){if(n==="submit"&&o&&o.stateNode===c){var f=oh((c[Dt]||null).action),g=r.submitter;g&&(n=(n=g[Dt]||null)?oh(n.formAction):g.getAttribute("formAction"),n!==null&&(f=n,g=null));var _=new fr("action","action",null,r,c);e.push({event:_,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Wa!==0){var A=g?ih(c,g):new FormData(c);Ju(o,{pending:!0,data:A,method:c.method,action:f},null,A)}}else typeof f=="function"&&(_.preventDefault(),A=g?ih(c,g):new FormData(c),Ju(o,{pending:!0,data:A,method:c.method,action:f},f,A))},currentTarget:c}]})}}for(var Cc=0;Cc<cu.length;Cc++){var Rc=cu[Cc],HS=Rc.toLowerCase(),LS=Rc[0].toUpperCase()+Rc.slice(1);Vn(HS,"on"+LS)}Vn(Uf,"onAnimationEnd"),Vn(qf,"onAnimationIteration"),Vn(jf,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(iS,"onTransitionRun"),Vn(lS,"onTransitionStart"),Vn(rS,"onTransitionCancel"),Vn(Zf,"onTransitionEnd"),Jo("onMouseEnter",["mouseout","mouseover"]),Jo("onMouseLeave",["mouseout","mouseover"]),Jo("onPointerEnter",["pointerout","pointerover"]),Jo("onPointerLeave",["pointerout","pointerover"]),Gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function lh(e,n){n=(n&4)!==0;for(var o=0;o<e.length;o++){var r=e[o],c=r.event;r=r.listeners;e:{var f=void 0;if(n)for(var g=r.length-1;0<=g;g--){var _=r[g],A=_.instance,q=_.currentTarget;if(_=_.listener,A!==f&&c.isPropagationStopped())break e;f=_,c.currentTarget=q;try{f(c)}catch(V){hr(V)}c.currentTarget=null,f=A}else for(g=0;g<r.length;g++){if(_=r[g],A=_.instance,q=_.currentTarget,_=_.listener,A!==f&&c.isPropagationStopped())break e;f=_,c.currentTarget=q;try{f(c)}catch(V){hr(V)}c.currentTarget=null,f=A}}}}function Ue(e,n){var o=n[go];o===void 0&&(o=n[go]=new Set);var r=e+"__bubble";o.has(r)||(rh(n,e,2,!1),o.add(r))}function Mc(e,n,o){var r=0;n&&(r|=4),rh(o,e,r,n)}var ts="_reactListening"+Math.random().toString(36).slice(2);function Nc(e){if(!e[ts]){e[ts]=!0,Yo.forEach(function(o){o!=="selectionchange"&&(GS.has(o)||Mc(o,!1,e),Mc(o,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ts]||(n[ts]=!0,Mc("selectionchange",!1,n))}}function rh(e,n,o,r){switch(Uh(n)){case 2:var c=yT;break;case 8:c=_T;break;default:c=Yc}o=c.bind(null,n,o,e),c=void 0,!Ps||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),r?c!==void 0?e.addEventListener(n,o,{capture:!0,passive:c}):e.addEventListener(n,o,!0):c!==void 0?e.addEventListener(n,o,{passive:c}):e.addEventListener(n,o,!1)}function zc(e,n,o,r,c){var f=r;if((n&1)===0&&(n&2)===0&&r!==null)e:for(;;){if(r===null)return;var g=r.tag;if(g===3||g===4){var _=r.stateNode.containerInfo;if(_===c)break;if(g===4)for(g=r.return;g!==null;){var A=g.tag;if((A===3||A===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;_!==null;){if(g=Rn(_),g===null)return;if(A=g.tag,A===5||A===6||A===26||A===27){r=f=g;continue e}_=_.parentNode}}r=r.return}ff(function(){var q=f,V=Qs(o),J=[];e:{var j=$f.get(e);if(j!==void 0){var H=fr,fe=e;switch(e){case"keypress":if(cr(o)===0)break e;case"keydown":case"keyup":H=qb;break;case"focusin":fe="focus",H=tu;break;case"focusout":fe="blur",H=tu;break;case"beforeblur":case"afterblur":H=tu;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=xb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=$b;break;case Uf:case qf:case jf:H=Cb;break;case Zf:H=Hb;break;case"scroll":case"scrollend":H=wb;break;case"wheel":H=Gb;break;case"copy":case"cut":case"paste":H=Mb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=gf;break;case"toggle":case"beforetoggle":H=Yb}var Te=(n&4)!==0,We=!Te&&(e==="scroll"||e==="scrollend"),I=Te?j!==null?j+"Capture":null:j;Te=[];for(var M=q,U;M!==null;){var Y=M;if(U=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||U===null||I===null||(Y=Xi(M,I),Y!=null&&Te.push(Ol(M,Y,U))),We)break;M=M.return}0<Te.length&&(j=new H(j,fe,null,o,V),J.push({event:j,listeners:Te}))}}if((n&7)===0){e:{if(j=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",j&&o!==Xs&&(fe=o.relatedTarget||o.fromElement)&&(Rn(fe)||fe[Ut]))break e;if((H||j)&&(j=V.window===V?V:(j=V.ownerDocument)?j.defaultView||j.parentWindow:window,H?(fe=o.relatedTarget||o.toElement,H=q,fe=fe?Rn(fe):null,fe!==null&&(We=u(fe),Te=fe.tag,fe!==We||Te!==5&&Te!==27&&Te!==6)&&(fe=null)):(H=null,fe=q),H!==fe)){if(Te=hf,Y="onMouseLeave",I="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(Te=gf,Y="onPointerLeave",I="onPointerEnter",M="pointer"),We=H==null?j:ia(H),U=fe==null?j:ia(fe),j=new Te(Y,M+"leave",H,o,V),j.target=We,j.relatedTarget=U,Y=null,Rn(V)===q&&(Te=new Te(I,M+"enter",fe,o,V),Te.target=U,Te.relatedTarget=We,Y=Te),We=Y,H&&fe)t:{for(Te=VS,I=H,M=fe,U=0,Y=I;Y;Y=Te(Y))U++;Y=0;for(var be=M;be;be=Te(be))Y++;for(;0<U-Y;)I=Te(I),U--;for(;0<Y-U;)M=Te(M),Y--;for(;U--;){if(I===M||M!==null&&I===M.alternate){Te=I;break t}I=Te(I),M=Te(M)}Te=null}else Te=null;H!==null&&sh(J,j,H,Te,!1),fe!==null&&We!==null&&sh(J,We,fe,Te,!0)}}e:{if(j=q?ia(q):window,H=j.nodeName&&j.nodeName.toLowerCase(),H==="select"||H==="input"&&j.type==="file")var Ge=xf;else if(wf(j))if(Af)Ge=nS;else{Ge=eS;var me=Wb}else H=j.nodeName,!H||H.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?q&&Js(q.elementType)&&(Ge=xf):Ge=tS;if(Ge&&(Ge=Ge(e,q))){Ef(J,Ge,o,V);break e}me&&me(e,j,q),e==="focusout"&&q&&j.type==="number"&&q.memoizedProps.value!=null&&Ys(j,"number",j.value)}switch(me=q?ia(q):window,e){case"focusin":(wf(me)||me.contentEditable==="true")&&(Wo=me,ru=q,nl=null);break;case"focusout":nl=ru=Wo=null;break;case"mousedown":su=!0;break;case"contextmenu":case"mouseup":case"dragend":su=!1,kf(J,o,V);break;case"selectionchange":if(oS)break;case"keydown":case"keyup":kf(J,o,V)}var Ie;if(au)e:{switch(e){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else Fo?Sf(e,o)&&(je="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(je="onCompositionStart");je&&(yf&&o.locale!=="ko"&&(Fo||je!=="onCompositionStart"?je==="onCompositionEnd"&&Fo&&(Ie=pf()):(qa=V,Fs="value"in qa?qa.value:qa.textContent,Fo=!0)),me=ns(q,je),0<me.length&&(je=new vf(je,e,null,o,V),J.push({event:je,listeners:me}),Ie?je.data=Ie:(Ie=Tf(o),Ie!==null&&(je.data=Ie)))),(Ie=Xb?Qb(e,o):Kb(e,o))&&(je=ns(q,"onBeforeInput"),0<je.length&&(me=new vf("onBeforeInput","beforeinput",null,o,V),J.push({event:me,listeners:je}),me.data=Ie)),BS(J,e,q,o,V)}lh(J,n)})}function Ol(e,n,o){return{instance:e,listener:n,currentTarget:o}}function ns(e,n){for(var o=n+"Capture",r=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=Xi(e,o),c!=null&&r.unshift(Ol(e,c,f)),c=Xi(e,n),c!=null&&r.push(Ol(e,c,f))),e.tag===3)return r;e=e.return}return[]}function VS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sh(e,n,o,r,c){for(var f=n._reactName,g=[];o!==null&&o!==r;){var _=o,A=_.alternate,q=_.stateNode;if(_=_.tag,A!==null&&A===r)break;_!==5&&_!==26&&_!==27||q===null||(A=q,c?(q=Xi(o,f),q!=null&&g.unshift(Ol(o,q,A))):c||(q=Xi(o,f),q!=null&&g.push(Ol(o,q,A)))),o=o.return}g.length!==0&&e.push({event:n,listeners:g})}var YS=/\r\n?/g,JS=/\u0000|\uFFFD/g;function uh(e){return(typeof e=="string"?e:""+e).replace(YS,`
`).replace(JS,"")}function ch(e,n){return n=uh(n),uh(e)===n}function Fe(e,n,o,r,c,f){switch(o){case"children":typeof r=="string"?n==="body"||n==="textarea"&&r===""||Qo(e,r):(typeof r=="number"||typeof r=="bigint")&&n!=="body"&&Qo(e,""+r);break;case"className":lr(e,"class",r);break;case"tabIndex":lr(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(e,o,r);break;case"style":cf(e,r,f);break;case"data":if(n!=="object"){lr(e,"data",r);break}case"src":case"href":if(r===""&&(n!=="a"||o!=="href")){e.removeAttribute(o);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(o);break}r=sr(""+r),e.setAttribute(o,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(o==="formAction"?(n!=="input"&&Fe(e,n,"name",c.name,c,null),Fe(e,n,"formEncType",c.formEncType,c,null),Fe(e,n,"formMethod",c.formMethod,c,null),Fe(e,n,"formTarget",c.formTarget,c,null)):(Fe(e,n,"encType",c.encType,c,null),Fe(e,n,"method",c.method,c,null),Fe(e,n,"target",c.target,c,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(o);break}r=sr(""+r),e.setAttribute(o,r);break;case"onClick":r!=null&&(e.onclick=ga);break;case"onScroll":r!=null&&Ue("scroll",e);break;case"onScrollEnd":r!=null&&Ue("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(o=r.__html,o!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=o}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}o=sr(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(o,""+r):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":r===!0?e.setAttribute(o,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(o,r):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(o,r):e.removeAttribute(o);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(o):e.setAttribute(o,r);break;case"popover":Ue("beforetoggle",e),Ue("toggle",e),ir(e,"popover",r);break;case"xlinkActuate":va(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":va(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":va(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":va(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":va(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":va(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":va(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":va(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":va(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":ir(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Sb.get(o)||o,ir(e,o,r))}}function Ic(e,n,o,r,c,f){switch(o){case"style":cf(e,r,f);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(o=r.__html,o!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=o}}break;case"children":typeof r=="string"?Qo(e,r):(typeof r=="number"||typeof r=="bigint")&&Qo(e,""+r);break;case"onScroll":r!=null&&Ue("scroll",e);break;case"onScrollEnd":r!=null&&Ue("scrollend",e);break;case"onClick":r!=null&&(e.onclick=ga);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ht.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(c=o.endsWith("Capture"),n=o.slice(2,c?o.length-7:void 0),f=e[Dt]||null,f=f!=null?f[o]:null,typeof f=="function"&&e.removeEventListener(n,f,c),typeof r=="function")){typeof f!="function"&&f!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(n,r,c);break e}o in e?e[o]=r:r===!0?e.setAttribute(o,""):ir(e,o,r)}}}function Lt(e,n,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",e),Ue("load",e);var r=!1,c=!1,f;for(f in o)if(o.hasOwnProperty(f)){var g=o[f];if(g!=null)switch(f){case"src":r=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:Fe(e,n,f,g,o,null)}}c&&Fe(e,n,"srcSet",o.srcSet,o,null),r&&Fe(e,n,"src",o.src,o,null);return;case"input":Ue("invalid",e);var _=f=g=c=null,A=null,q=null;for(r in o)if(o.hasOwnProperty(r)){var V=o[r];if(V!=null)switch(r){case"name":c=V;break;case"type":g=V;break;case"checked":A=V;break;case"defaultChecked":q=V;break;case"value":f=V;break;case"defaultValue":_=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(l(137,n));break;default:Fe(e,n,r,V,o,null)}}lf(e,f,_,A,q,g,c,!1);return;case"select":Ue("invalid",e),r=g=f=null;for(c in o)if(o.hasOwnProperty(c)&&(_=o[c],_!=null))switch(c){case"value":f=_;break;case"defaultValue":g=_;break;case"multiple":r=_;default:Fe(e,n,c,_,o,null)}n=f,o=g,e.multiple=!!r,n!=null?Xo(e,!!r,n,!1):o!=null&&Xo(e,!!r,o,!0);return;case"textarea":Ue("invalid",e),f=c=r=null;for(g in o)if(o.hasOwnProperty(g)&&(_=o[g],_!=null))switch(g){case"value":r=_;break;case"defaultValue":c=_;break;case"children":f=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(l(91));break;default:Fe(e,n,g,_,o,null)}sf(e,r,c,f);return;case"option":for(A in o)o.hasOwnProperty(A)&&(r=o[A],r!=null)&&(A==="selected"?e.selected=r&&typeof r!="function"&&typeof r!="symbol":Fe(e,n,A,r,o,null));return;case"dialog":Ue("beforetoggle",e),Ue("toggle",e),Ue("cancel",e),Ue("close",e);break;case"iframe":case"object":Ue("load",e);break;case"video":case"audio":for(r=0;r<Al.length;r++)Ue(Al[r],e);break;case"image":Ue("error",e),Ue("load",e);break;case"details":Ue("toggle",e);break;case"embed":case"source":case"link":Ue("error",e),Ue("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in o)if(o.hasOwnProperty(q)&&(r=o[q],r!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:Fe(e,n,q,r,o,null)}return;default:if(Js(n)){for(V in o)o.hasOwnProperty(V)&&(r=o[V],r!==void 0&&Ic(e,n,V,r,o,void 0));return}}for(_ in o)o.hasOwnProperty(_)&&(r=o[_],r!=null&&Fe(e,n,_,r,o,null))}function XS(e,n,o,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,g=null,_=null,A=null,q=null,V=null;for(H in o){var J=o[H];if(o.hasOwnProperty(H)&&J!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":A=J;default:r.hasOwnProperty(H)||Fe(e,n,H,null,r,J)}}for(var j in r){var H=r[j];if(J=o[j],r.hasOwnProperty(j)&&(H!=null||J!=null))switch(j){case"type":f=H;break;case"name":c=H;break;case"checked":q=H;break;case"defaultChecked":V=H;break;case"value":g=H;break;case"defaultValue":_=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(l(137,n));break;default:H!==J&&Fe(e,n,j,H,r,J)}}Vs(e,g,_,A,q,V,f,c);return;case"select":H=g=_=j=null;for(f in o)if(A=o[f],o.hasOwnProperty(f)&&A!=null)switch(f){case"value":break;case"multiple":H=A;default:r.hasOwnProperty(f)||Fe(e,n,f,null,r,A)}for(c in r)if(f=r[c],A=o[c],r.hasOwnProperty(c)&&(f!=null||A!=null))switch(c){case"value":j=f;break;case"defaultValue":_=f;break;case"multiple":g=f;default:f!==A&&Fe(e,n,c,f,r,A)}n=_,o=g,r=H,j!=null?Xo(e,!!o,j,!1):!!r!=!!o&&(n!=null?Xo(e,!!o,n,!0):Xo(e,!!o,o?[]:"",!1));return;case"textarea":H=j=null;for(_ in o)if(c=o[_],o.hasOwnProperty(_)&&c!=null&&!r.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Fe(e,n,_,null,r,c)}for(g in r)if(c=r[g],f=o[g],r.hasOwnProperty(g)&&(c!=null||f!=null))switch(g){case"value":j=c;break;case"defaultValue":H=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==f&&Fe(e,n,g,c,r,f)}rf(e,j,H);return;case"option":for(var fe in o)j=o[fe],o.hasOwnProperty(fe)&&j!=null&&!r.hasOwnProperty(fe)&&(fe==="selected"?e.selected=!1:Fe(e,n,fe,null,r,j));for(A in r)j=r[A],H=o[A],r.hasOwnProperty(A)&&j!==H&&(j!=null||H!=null)&&(A==="selected"?e.selected=j&&typeof j!="function"&&typeof j!="symbol":Fe(e,n,A,j,r,H));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)j=o[Te],o.hasOwnProperty(Te)&&j!=null&&!r.hasOwnProperty(Te)&&Fe(e,n,Te,null,r,j);for(q in r)if(j=r[q],H=o[q],r.hasOwnProperty(q)&&j!==H&&(j!=null||H!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(l(137,n));break;default:Fe(e,n,q,j,r,H)}return;default:if(Js(n)){for(var We in o)j=o[We],o.hasOwnProperty(We)&&j!==void 0&&!r.hasOwnProperty(We)&&Ic(e,n,We,void 0,r,j);for(V in r)j=r[V],H=o[V],!r.hasOwnProperty(V)||j===H||j===void 0&&H===void 0||Ic(e,n,V,j,r,H);return}}for(var I in o)j=o[I],o.hasOwnProperty(I)&&j!=null&&!r.hasOwnProperty(I)&&Fe(e,n,I,null,r,j);for(J in r)j=r[J],H=o[J],!r.hasOwnProperty(J)||j===H||j==null&&H==null||Fe(e,n,J,j,r,H)}function dh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function QS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,o=performance.getEntriesByType("resource"),r=0;r<o.length;r++){var c=o[r],f=c.transferSize,g=c.initiatorType,_=c.duration;if(f&&_&&dh(g)){for(g=0,_=c.responseEnd,r+=1;r<o.length;r++){var A=o[r],q=A.startTime;if(q>_)break;var V=A.transferSize,J=A.initiatorType;V&&dh(J)&&(A=A.responseEnd,g+=V*(A<_?1:(_-q)/(A-q)))}if(--r,n+=8*(f+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var kc=null,Dc=null;function as(e){return e.nodeType===9?e:e.ownerDocument}function fh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ph(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Uc(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var qc=null;function KS(){var e=window.event;return e&&e.type==="popstate"?e===qc?!1:(qc=e,!0):(qc=null,!1)}var mh=typeof setTimeout=="function"?setTimeout:void 0,PS=typeof clearTimeout=="function"?clearTimeout:void 0,hh=typeof Promise=="function"?Promise:void 0,FS=typeof queueMicrotask=="function"?queueMicrotask:typeof hh<"u"?function(e){return hh.resolve(null).then(e).catch(WS)}:mh;function WS(e){setTimeout(function(){throw e})}function eo(e){return e==="head"}function vh(e,n){var o=n,r=0;do{var c=o.nextSibling;if(e.removeChild(o),c&&c.nodeType===8)if(o=c.data,o==="/$"||o==="/&"){if(r===0){e.removeChild(c),Ai(n);return}r--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")r++;else if(o==="html")Cl(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,Cl(o);for(var f=o.firstChild;f;){var g=f.nextSibling,_=f.nodeName;f[_e]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&f.rel.toLowerCase()==="stylesheet"||o.removeChild(f),f=g}}else o==="body"&&Cl(e.ownerDocument.body);o=c}while(o);Ai(n)}function gh(e,n){var o=e;e=0;do{var r=o.nextSibling;if(o.nodeType===1?n?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(n?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),r&&r.nodeType===8)if(o=r.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=r}while(o)}function jc(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var o=n;switch(n=n.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":jc(o),wt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function eT(e,n,o,r){for(;e.nodeType===1;){var c=o;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[_e])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Zn(e.nextSibling),e===null)break}return null}function tT(e,n,o){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=Zn(e.nextSibling),e===null))return null;return e}function yh(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Zn(e.nextSibling),e===null))return null;return e}function Zc(e){return e.data==="$?"||e.data==="$~"}function $c(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function nT(e,n){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||o.readyState!=="loading")n();else{var r=function(){n(),o.removeEventListener("DOMContentLoaded",r)};o.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Zn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Bc=null;function _h(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(n===0)return Zn(e.nextSibling);n--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||n++}e=e.nextSibling}return null}function bh(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(n===0)return e;n--}else o!=="/$"&&o!=="/&"||n++}e=e.previousSibling}return null}function Sh(e,n,o){switch(n=as(o),e){case"html":if(e=n.documentElement,!e)throw Error(l(452));return e;case"head":if(e=n.head,!e)throw Error(l(453));return e;case"body":if(e=n.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Cl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);wt(e)}var $n=new Map,Th=new Set;function os(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ia=B.d;B.d={f:aT,r:oT,D:iT,C:lT,L:rT,m:sT,X:cT,S:uT,M:dT};function aT(){var e=Ia.f(),n=Qr();return e||n}function oT(e){var n=Mn(e);n!==null&&n.tag===5&&n.type==="form"?Zp(n):Ia.r(e)}var wi=typeof document>"u"?null:document;function wh(e,n,o){var r=wi;if(r&&typeof n=="string"&&n){var c=zn(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof o=="string"&&(c+='[crossorigin="'+o+'"]'),Th.has(c)||(Th.add(c),e={rel:e,crossOrigin:o,href:n},r.querySelector(c)===null&&(n=r.createElement("link"),Lt(n,"link",e),st(n),r.head.appendChild(n)))}}function iT(e){Ia.D(e),wh("dns-prefetch",e,null)}function lT(e,n){Ia.C(e,n),wh("preconnect",e,n)}function rT(e,n,o){Ia.L(e,n,o);var r=wi;if(r&&e&&n){var c='link[rel="preload"][as="'+zn(n)+'"]';n==="image"&&o&&o.imageSrcSet?(c+='[imagesrcset="'+zn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(c+='[imagesizes="'+zn(o.imageSizes)+'"]')):c+='[href="'+zn(e)+'"]';var f=c;switch(n){case"style":f=Ei(e);break;case"script":f=xi(e)}$n.has(f)||(e=T({rel:"preload",href:n==="image"&&o&&o.imageSrcSet?void 0:e,as:n},o),$n.set(f,e),r.querySelector(c)!==null||n==="style"&&r.querySelector(Rl(f))||n==="script"&&r.querySelector(Ml(f))||(n=r.createElement("link"),Lt(n,"link",e),st(n),r.head.appendChild(n)))}}function sT(e,n){Ia.m(e,n);var o=wi;if(o&&e){var r=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+zn(r)+'"][href="'+zn(e)+'"]',f=c;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=xi(e)}if(!$n.has(f)&&(e=T({rel:"modulepreload",href:e},n),$n.set(f,e),o.querySelector(c)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ml(f)))return}r=o.createElement("link"),Lt(r,"link",e),st(r),o.head.appendChild(r)}}}function uT(e,n,o){Ia.S(e,n,o);var r=wi;if(r&&e){var c=rt(r).hoistableStyles,f=Ei(e);n=n||"default";var g=c.get(f);if(!g){var _={loading:0,preload:null};if(g=r.querySelector(Rl(f)))_.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":n},o),(o=$n.get(f))&&Hc(e,o);var A=g=r.createElement("link");st(A),Lt(A,"link",e),A._p=new Promise(function(q,V){A.onload=q,A.onerror=V}),A.addEventListener("load",function(){_.loading|=1}),A.addEventListener("error",function(){_.loading|=2}),_.loading|=4,is(g,n,r)}g={type:"stylesheet",instance:g,count:1,state:_},c.set(f,g)}}}function cT(e,n){Ia.X(e,n);var o=wi;if(o&&e){var r=rt(o).hoistableScripts,c=xi(e),f=r.get(c);f||(f=o.querySelector(Ml(c)),f||(e=T({src:e,async:!0},n),(n=$n.get(c))&&Lc(e,n),f=o.createElement("script"),st(f),Lt(f,"link",e),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},r.set(c,f))}}function dT(e,n){Ia.M(e,n);var o=wi;if(o&&e){var r=rt(o).hoistableScripts,c=xi(e),f=r.get(c);f||(f=o.querySelector(Ml(c)),f||(e=T({src:e,async:!0,type:"module"},n),(n=$n.get(c))&&Lc(e,n),f=o.createElement("script"),st(f),Lt(f,"link",e),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},r.set(c,f))}}function Eh(e,n,o,r){var c=(c=pe.current)?os(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(n=Ei(o.href),o=rt(c).hoistableStyles,r=o.get(n),r||(r={type:"style",instance:null,count:0,state:null},o.set(n,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=Ei(o.href);var f=rt(c).hoistableStyles,g=f.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,g),(f=c.querySelector(Rl(e)))&&!f._p&&(g.instance=f,g.state.loading=5),$n.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},$n.set(e,o),f||fT(c,e,o,g.state))),n&&r===null)throw Error(l(528,""));return g}if(n&&r!==null)throw Error(l(529,""));return null;case"script":return n=o.async,o=o.src,typeof o=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=xi(o),o=rt(c).hoistableScripts,r=o.get(n),r||(r={type:"script",instance:null,count:0,state:null},o.set(n,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Ei(e){return'href="'+zn(e)+'"'}function Rl(e){return'link[rel="stylesheet"]['+e+"]"}function xh(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function fT(e,n,o,r){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?r.loading=1:(n=e.createElement("link"),r.preload=n,n.addEventListener("load",function(){return r.loading|=1}),n.addEventListener("error",function(){return r.loading|=2}),Lt(n,"link",o),st(n),e.head.appendChild(n))}function xi(e){return'[src="'+zn(e)+'"]'}function Ml(e){return"script[async]"+e}function Ah(e,n,o){if(n.count++,n.instance===null)switch(n.type){case"style":var r=e.querySelector('style[data-href~="'+zn(o.href)+'"]');if(r)return n.instance=r,st(r),r;var c=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),st(r),Lt(r,"style",c),is(r,o.precedence,e),n.instance=r;case"stylesheet":c=Ei(o.href);var f=e.querySelector(Rl(c));if(f)return n.state.loading|=4,n.instance=f,st(f),f;r=xh(o),(c=$n.get(c))&&Hc(r,c),f=(e.ownerDocument||e).createElement("link"),st(f);var g=f;return g._p=new Promise(function(_,A){g.onload=_,g.onerror=A}),Lt(f,"link",r),n.state.loading|=4,is(f,o.precedence,e),n.instance=f;case"script":return f=xi(o.src),(c=e.querySelector(Ml(f)))?(n.instance=c,st(c),c):(r=o,(c=$n.get(f))&&(r=T({},o),Lc(r,c)),e=e.ownerDocument||e,c=e.createElement("script"),st(c),Lt(c,"link",r),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(l(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(r=n.instance,n.state.loading|=4,is(r,o.precedence,e));return n.instance}function is(e,n,o){for(var r=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=r.length?r[r.length-1]:null,f=c,g=0;g<r.length;g++){var _=r[g];if(_.dataset.precedence===n)f=_;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=o.nodeType===9?o.head:o,n.insertBefore(e,n.firstChild))}function Hc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Lc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var ls=null;function Oh(e,n,o){if(ls===null){var r=new Map,c=ls=new Map;c.set(o,r)}else c=ls,r=c.get(o),r||(r=new Map,c.set(o,r));if(r.has(e))return r;for(r.set(e,null),o=o.getElementsByTagName(e),c=0;c<o.length;c++){var f=o[c];if(!(f[_e]||f[ft]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var g=f.getAttribute(n)||"";g=e+g;var _=r.get(g);_?_.push(f):r.set(g,[f])}}return r}function Ch(e,n,o){e=e.ownerDocument||e,e.head.insertBefore(o,n==="title"?e.querySelector("head > title"):null)}function pT(e,n,o){if(o===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Rh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function mT(e,n,o,r){if(o.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var c=Ei(r.href),f=n.querySelector(Rl(c));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=rs.bind(e),n.then(e,e)),o.state.loading|=4,o.instance=f,st(f);return}f=n.ownerDocument||n,r=xh(r),(c=$n.get(c))&&Hc(r,c),f=f.createElement("link"),st(f);var g=f;g._p=new Promise(function(_,A){g.onload=_,g.onerror=A}),Lt(f,"link",r),o.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,n),(n=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=rs.bind(e),n.addEventListener("load",o),n.addEventListener("error",o))}}var Gc=0;function hT(e,n){return e.stylesheets&&e.count===0&&us(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var r=setTimeout(function(){if(e.stylesheets&&us(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&Gc===0&&(Gc=62500*QS());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&us(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Gc?50:800)+n);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(c)}}:null}function rs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)us(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ss=null;function us(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ss=new Map,n.forEach(vT,e),ss=null,rs.call(e))}function vT(e,n){if(!(n.state.loading&4)){var o=ss.get(e);if(o)var r=o.get(null);else{o=new Map,ss.set(e,o);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var g=c[f];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(o.set(g.dataset.precedence,g),r=g)}r&&o.set(null,r)}c=n.instance,g=c.getAttribute("data-precedence"),f=o.get(g)||r,f===r&&o.set(null,c),o.set(g,c),this.count++,r=rs.bind(this),c.addEventListener("load",r),c.addEventListener("error",r),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var Nl={$$typeof:x,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function gT(e,n,o,r,c,f,g,_,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.hiddenUpdates=Gi(null),this.identifierPrefix=r,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Mh(e,n,o,r,c,f,g,_,A,q,V,J){return e=new gT(e,n,o,g,A,q,V,J,_),n=1,f===!0&&(n|=24),f=mn(3,null,null,n),e.current=f,f.stateNode=e,n=wu(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:r,isDehydrated:o,cache:n},Ou(f),e}function Nh(e){return e?(e=ni,e):ni}function zh(e,n,o,r,c,f){c=Nh(c),r.context===null?r.context=c:r.pendingContext=c,r=La(n),r.payload={element:o},f=f===void 0?null:f,f!==null&&(r.callback=f),o=Ga(e,r,n),o!==null&&(un(o,e,n),ul(o,e,n))}function Ih(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<n?o:n}}function Vc(e,n){Ih(e,n),(e=e.alternate)&&Ih(e,n)}function kh(e){if(e.tag===13||e.tag===31){var n=So(e,67108864);n!==null&&un(n,e,67108864),Vc(e,67108864)}}function Dh(e){if(e.tag===13||e.tag===31){var n=_n();n=Yi(n);var o=So(e,n);o!==null&&un(o,e,n),Vc(e,n)}}var cs=!0;function yT(e,n,o,r){var c=k.T;k.T=null;var f=B.p;try{B.p=2,Yc(e,n,o,r)}finally{B.p=f,k.T=c}}function _T(e,n,o,r){var c=k.T;k.T=null;var f=B.p;try{B.p=8,Yc(e,n,o,r)}finally{B.p=f,k.T=c}}function Yc(e,n,o,r){if(cs){var c=Jc(r);if(c===null)zc(e,n,r,ds,o),qh(e,r);else if(ST(c,e,n,o,r))r.stopPropagation();else if(qh(e,r),n&4&&-1<bT.indexOf(e)){for(;c!==null;){var f=Mn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var g=nn(f.pendingLanes);if(g!==0){var _=f;for(_.pendingLanes|=2,_.entangledLanes|=2;g;){var A=1<<31-Jt(g);_.entanglements[1]|=A,g&=~A}ua(f),(Ye&6)===0&&(Jr=St()+500,xl(0))}}break;case 31:case 13:_=So(f,2),_!==null&&un(_,f,2),Qr(),Vc(f,2)}if(f=Jc(r),f===null&&zc(e,n,r,ds,o),f===c)break;c=f}c!==null&&r.stopPropagation()}else zc(e,n,r,null,o)}}function Jc(e){return e=Qs(e),Xc(e)}var ds=null;function Xc(e){if(ds=null,e=Rn(e),e!==null){var n=u(e);if(n===null)e=null;else{var o=n.tag;if(o===13){if(e=d(n),e!==null)return e;e=null}else if(o===31){if(e=p(n),e!==null)return e;e=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return ds=e,null}function Uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case Ke:return 2;case Ln:return 8;case aa:case Ho:return 32;case Pt:return 268435456;default:return 32}default:return 32}}var Qc=!1,to=null,no=null,ao=null,zl=new Map,Il=new Map,oo=[],bT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qh(e,n){switch(e){case"focusin":case"focusout":to=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":zl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Il.delete(n.pointerId)}}function kl(e,n,o,r,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:o,eventSystemFlags:r,nativeEvent:f,targetContainers:[c]},n!==null&&(n=Mn(n),n!==null&&kh(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function ST(e,n,o,r,c){switch(n){case"focusin":return to=kl(to,e,n,o,r,c),!0;case"dragenter":return no=kl(no,e,n,o,r,c),!0;case"mouseover":return ao=kl(ao,e,n,o,r,c),!0;case"pointerover":var f=c.pointerId;return zl.set(f,kl(zl.get(f)||null,e,n,o,r,c)),!0;case"gotpointercapture":return f=c.pointerId,Il.set(f,kl(Il.get(f)||null,e,n,o,r,c)),!0}return!1}function jh(e){var n=Rn(e.target);if(n!==null){var o=u(n);if(o!==null){if(n=o.tag,n===13){if(n=d(o),n!==null){e.blockedOn=n,Vo(e.priority,function(){Dh(o)});return}}else if(n===31){if(n=p(o),n!==null){e.blockedOn=n,Vo(e.priority,function(){Dh(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fs(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var o=Jc(e.nativeEvent);if(o===null){o=e.nativeEvent;var r=new o.constructor(o.type,o);Xs=r,o.target.dispatchEvent(r),Xs=null}else return n=Mn(o),n!==null&&kh(n),e.blockedOn=o,!1;n.shift()}return!0}function Zh(e,n,o){fs(e)&&o.delete(n)}function TT(){Qc=!1,to!==null&&fs(to)&&(to=null),no!==null&&fs(no)&&(no=null),ao!==null&&fs(ao)&&(ao=null),zl.forEach(Zh),Il.forEach(Zh)}function ps(e,n){e.blockedOn===n&&(e.blockedOn=null,Qc||(Qc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,TT)))}var ms=null;function $h(e){ms!==e&&(ms=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ms===e&&(ms=null);for(var n=0;n<e.length;n+=3){var o=e[n],r=e[n+1],c=e[n+2];if(typeof r!="function"){if(Xc(r||o)===null)continue;break}var f=Mn(o);f!==null&&(e.splice(n,3),n-=3,Ju(f,{pending:!0,data:c,method:o.method,action:r},r,c))}}))}function Ai(e){function n(A){return ps(A,e)}to!==null&&ps(to,e),no!==null&&ps(no,e),ao!==null&&ps(ao,e),zl.forEach(n),Il.forEach(n);for(var o=0;o<oo.length;o++){var r=oo[o];r.blockedOn===e&&(r.blockedOn=null)}for(;0<oo.length&&(o=oo[0],o.blockedOn===null);)jh(o),o.blockedOn===null&&oo.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(r=0;r<o.length;r+=3){var c=o[r],f=o[r+1],g=c[Dt]||null;if(typeof f=="function")g||$h(o);else if(g){var _=null;if(f&&f.hasAttribute("formAction")){if(c=f,g=f[Dt]||null)_=g.formAction;else if(Xc(c)!==null)continue}else _=g.action;typeof _=="function"?o[r+1]=_:(o.splice(r,3),r-=3),$h(o)}}}function Bh(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function n(){c!==null&&(c(),c=null),r||setTimeout(o,20)}function o(){if(!r&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(o,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),c!==null&&(c(),c=null)}}}function Kc(e){this._internalRoot=e}hs.prototype.render=Kc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(l(409));var o=n.current,r=_n();zh(o,r,e,n,null,null)},hs.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;zh(e.current,2,null,e,null,null),Qr(),n[Ut]=null}};function hs(e){this._internalRoot=e}hs.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ua();e={blockedOn:null,target:e,priority:n};for(var o=0;o<oo.length&&n!==0&&n<oo[o].priority;o++);oo.splice(o,0,e),o===0&&jh(e)}};var Hh=a.version;if(Hh!=="19.2.3")throw Error(l(527,Hh,"19.2.3"));B.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=h(n),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var wT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vs.isDisabled&&vs.supportsFiber)try{Tt=vs.inject(wT),Le=vs}catch{}}return Ul.createRoot=function(e,n){if(!s(e))throw Error(l(299));var o=!1,r="",c=Qp,f=Kp,g=Pp;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),n=Mh(e,1,!1,null,null,o,r,null,c,f,g,Bh),e[Ut]=n.current,Nc(e),new Kc(n)},Ul.hydrateRoot=function(e,n,o){if(!s(e))throw Error(l(299));var r=!1,c="",f=Qp,g=Kp,_=Pp,A=null;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(f=o.onUncaughtError),o.onCaughtError!==void 0&&(g=o.onCaughtError),o.onRecoverableError!==void 0&&(_=o.onRecoverableError),o.formState!==void 0&&(A=o.formState)),n=Mh(e,1,!0,n,o??null,r,c,A,f,g,_,Bh),n.context=Nh(null),o=n.current,r=_n(),r=Yi(r),c=La(r),c.callback=null,Ga(o,c,r),o=r,n.current.lanes=o,Da(n,o),ua(n),e[Ut]=n.current,Nc(e),new hs(n)},Ul.version="19.2.3",Ul}var Fh;function kT(){if(Fh)return Wc.exports;Fh=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Wc.exports=IT(),Wc.exports}var DT=kT();const UT=oy(DT);const qT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jT=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,i,l)=>l?l.toUpperCase():i.toLowerCase()),Wh=t=>{const a=jT(t);return a.charAt(0).toUpperCase()+a.slice(1)},iy=(...t)=>t.filter((a,i,l)=>!!a&&a.trim()!==""&&l.indexOf(a)===i).join(" ").trim(),ZT=t=>{for(const a in t)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};var $T={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const BT=Mt.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:s="",children:u,iconNode:d,...p},m)=>Mt.createElement("svg",{ref:m,...$T,width:a,height:a,stroke:t,strokeWidth:l?Number(i)*24/Number(a):i,className:iy("lucide",s),...!u&&!ZT(p)&&{"aria-hidden":"true"},...p},[...d.map(([h,y])=>Mt.createElement(h,y)),...Array.isArray(u)?u:[u]]));const Ui=(t,a)=>{const i=Mt.forwardRef(({className:l,...s},u)=>Mt.createElement(BT,{ref:u,iconNode:a,className:iy(`lucide-${qT(Wh(t))}`,`lucide-${t}`,l),...s}));return i.displayName=Wh(t),i};const HT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],LT=Ui("arrow-left",HT);const GT=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],VT=Ui("loader-circle",GT);const YT=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],JT=Ui("play",YT);const XT=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],QT=Ui("save",XT);const KT=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],PT=Ui("send",KT);const FT=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],WT=Ui("settings",FT);var ly="vercel.ai.error",e1=Symbol.for(ly),ev,tv,Oe=class ry extends(tv=Error,ev=e1,tv){constructor({name:a,message:i,cause:l}){super(i),this[ev]=!0,this.name=a,this.cause=l}static isInstance(a){return ry.hasMarker(a,ly)}static hasMarker(a,i){const l=Symbol.for(i);return a!=null&&typeof a=="object"&&l in a&&typeof a[l]=="boolean"&&a[l]===!0}},sy="AI_APICallError",uy=`vercel.ai.error.${sy}`,t1=Symbol.for(uy),nv,av,jt=class extends(av=Oe,nv=t1,av){constructor({message:t,url:a,requestBodyValues:i,statusCode:l,responseHeaders:s,responseBody:u,cause:d,isRetryable:p=l!=null&&(l===408||l===409||l===429||l>=500),data:m}){super({name:sy,message:t,cause:d}),this[nv]=!0,this.url=a,this.requestBodyValues=i,this.statusCode=l,this.responseHeaders=s,this.responseBody=u,this.isRetryable=p,this.data=m}static isInstance(t){return Oe.hasMarker(t,uy)}},cy="AI_EmptyResponseBodyError",dy=`vercel.ai.error.${cy}`,n1=Symbol.for(dy),ov,iv,a1=class extends(iv=Oe,ov=n1,iv){constructor({message:t="Empty response body"}={}){super({name:cy,message:t}),this[ov]=!0}static isInstance(t){return Oe.hasMarker(t,dy)}};function jo(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var fy="AI_InvalidArgumentError",py=`vercel.ai.error.${fy}`,o1=Symbol.for(py),lv,rv,my=class extends(rv=Oe,lv=o1,rv){constructor({message:a,cause:i,argument:l}){super({name:fy,message:a,cause:i}),this[lv]=!0,this.argument=l}static isInstance(a){return Oe.hasMarker(a,py)}},hy="AI_InvalidPromptError",vy=`vercel.ai.error.${hy}`,i1=Symbol.for(vy),sv,uv,Uo=class extends(uv=Oe,sv=i1,uv){constructor({prompt:t,message:a,cause:i}){super({name:hy,message:`Invalid prompt: ${a}`,cause:i}),this[sv]=!0,this.prompt=t}static isInstance(t){return Oe.hasMarker(t,vy)}},gy="AI_InvalidResponseDataError",yy=`vercel.ai.error.${gy}`,l1=Symbol.for(yy),cv,dv,ad=class extends(dv=Oe,cv=l1,dv){constructor({data:t,message:a=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:gy,message:a}),this[cv]=!0,this.data=t}static isInstance(t){return Oe.hasMarker(t,yy)}},_y="AI_JSONParseError",by=`vercel.ai.error.${_y}`,r1=Symbol.for(by),fv,pv,ws=class extends(pv=Oe,fv=r1,pv){constructor({text:t,cause:a}){super({name:_y,message:`JSON parsing failed: Text: ${t}.
Error message: ${jo(a)}`,cause:a}),this[fv]=!0,this.text=t}static isInstance(t){return Oe.hasMarker(t,by)}},Sy="AI_LoadAPIKeyError",Ty=`vercel.ai.error.${Sy}`,s1=Symbol.for(Ty),mv,hv,gs=class extends(hv=Oe,mv=s1,hv){constructor({message:t}){super({name:Sy,message:t}),this[mv]=!0}static isInstance(t){return Oe.hasMarker(t,Ty)}},wy="AI_TooManyEmbeddingValuesForCallError",Ey=`vercel.ai.error.${wy}`,u1=Symbol.for(Ey),vv,gv,xy=class extends(gv=Oe,vv=u1,gv){constructor(t){super({name:wy,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[vv]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Oe.hasMarker(t,Ey)}},Ay="AI_TypeValidationError",Oy=`vercel.ai.error.${Ay}`,c1=Symbol.for(Oy),yv,_v,Zo=class gd extends(_v=Oe,yv=c1,_v){constructor({value:a,cause:i}){super({name:Ay,message:`Type validation failed: Value: ${JSON.stringify(a)}.
Error message: ${jo(i)}`,cause:i}),this[yv]=!0,this.value=a}static isInstance(a){return Oe.hasMarker(a,Oy)}static wrap({value:a,cause:i}){return gd.isInstance(i)&&i.value===a?i:new gd({value:a,cause:i})}},Cy="AI_UnsupportedFunctionalityError",Ry=`vercel.ai.error.${Cy}`,d1=Symbol.for(Ry),bv,Sv,Sn=class extends(Sv=Oe,bv=d1,Sv){constructor({functionality:t,message:a=`'${t}' functionality not supported.`}){super({name:Cy,message:a}),this[bv]=!0,this.functionality=t}static isInstance(t){return Oe.hasMarker(t,Ry)}};function G(t,a,i){function l(p,m){if(p._zod||Object.defineProperty(p,"_zod",{value:{def:m,constr:d,traits:new Set},enumerable:!1}),p._zod.traits.has(t))return;p._zod.traits.add(t),a(p,m);const h=d.prototype,y=Object.keys(h);for(let T=0;T<y.length;T++){const b=y[T];b in p||(p[b]=h[b].bind(p))}}const s=i?.Parent??Object;class u extends s{}Object.defineProperty(u,"name",{value:t});function d(p){var m;const h=i?.Parent?new u:this;l(h,p),(m=h._zod).deferred??(m.deferred=[]);for(const y of h._zod.deferred)y();return h}return Object.defineProperty(d,"init",{value:l}),Object.defineProperty(d,Symbol.hasInstance,{value:p=>i?.Parent&&p instanceof i.Parent?!0:p?._zod?.traits?.has(t)}),Object.defineProperty(d,"name",{value:t}),d}class Ni extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class My extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}const Ny={};function so(t){return Ny}function zy(t){const a=Object.values(t).filter(l=>typeof l=="number");return Object.entries(t).filter(([l,s])=>a.indexOf(+l)===-1).map(([l,s])=>s)}function yd(t,a){return typeof a=="bigint"?a.toString():a}function Us(t){return{get value(){{const a=t();return Object.defineProperty(this,"value",{value:a}),a}}}}function Nd(t){return t==null}function zd(t){const a=t.startsWith("^")?1:0,i=t.endsWith("$")?t.length-1:t.length;return t.slice(a,i)}function f1(t,a){const i=(t.toString().split(".")[1]||"").length,l=a.toString();let s=(l.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(l)){const m=l.match(/\d?e-(\d?)/);m?.[1]&&(s=Number.parseInt(m[1]))}const u=i>s?i:s,d=Number.parseInt(t.toFixed(u).replace(".","")),p=Number.parseInt(a.toFixed(u).replace(".",""));return d%p/10**u}const Tv=Symbol("evaluating");function He(t,a,i){let l;Object.defineProperty(t,a,{get(){if(l!==Tv)return l===void 0&&(l=Tv,l=i()),l},set(s){Object.defineProperty(t,a,{value:s})},configurable:!0})}function Bo(t,a,i){Object.defineProperty(t,a,{value:i,writable:!0,enumerable:!0,configurable:!0})}function po(...t){const a={};for(const i of t){const l=Object.getOwnPropertyDescriptors(i);Object.assign(a,l)}return Object.defineProperties({},a)}function wv(t){return JSON.stringify(t)}function p1(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Iy="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Ll(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const m1=Us(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Ii(t){if(Ll(t)===!1)return!1;const a=t.constructor;if(a===void 0||typeof a!="function")return!0;const i=a.prototype;return!(Ll(i)===!1||Object.prototype.hasOwnProperty.call(i,"isPrototypeOf")===!1)}function ky(t){return Ii(t)?{...t}:Array.isArray(t)?[...t]:t}const h1=new Set(["string","number","symbol"]);function ki(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function mo(t,a,i){const l=new t._zod.constr(a??t._zod.def);return(!a||i?.parent)&&(l._zod.parent=t),l}function he(t){const a=t;if(!a)return{};if(typeof a=="string")return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");a.error=a.message}return delete a.message,typeof a.error=="string"?{...a,error:()=>a.error}:a}function v1(t){return Object.keys(t).filter(a=>t[a]._zod.optin==="optional"&&t[a]._zod.optout==="optional")}const g1={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function y1(t,a){const i=t._zod.def,l=i.checks;if(l&&l.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const u=po(t._zod.def,{get shape(){const d={};for(const p in a){if(!(p in i.shape))throw new Error(`Unrecognized key: "${p}"`);a[p]&&(d[p]=i.shape[p])}return Bo(this,"shape",d),d},checks:[]});return mo(t,u)}function _1(t,a){const i=t._zod.def,l=i.checks;if(l&&l.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const u=po(t._zod.def,{get shape(){const d={...t._zod.def.shape};for(const p in a){if(!(p in i.shape))throw new Error(`Unrecognized key: "${p}"`);a[p]&&delete d[p]}return Bo(this,"shape",d),d},checks:[]});return mo(t,u)}function b1(t,a){if(!Ii(a))throw new Error("Invalid input to extend: expected a plain object");const i=t._zod.def.checks;if(i&&i.length>0){const u=t._zod.def.shape;for(const d in a)if(Object.getOwnPropertyDescriptor(u,d)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=po(t._zod.def,{get shape(){const u={...t._zod.def.shape,...a};return Bo(this,"shape",u),u}});return mo(t,s)}function S1(t,a){if(!Ii(a))throw new Error("Invalid input to safeExtend: expected a plain object");const i=po(t._zod.def,{get shape(){const l={...t._zod.def.shape,...a};return Bo(this,"shape",l),l}});return mo(t,i)}function T1(t,a){const i=po(t._zod.def,{get shape(){const l={...t._zod.def.shape,...a._zod.def.shape};return Bo(this,"shape",l),l},get catchall(){return a._zod.def.catchall},checks:[]});return mo(t,i)}function w1(t,a,i){const s=a._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const d=po(a._zod.def,{get shape(){const p=a._zod.def.shape,m={...p};if(i)for(const h in i){if(!(h in p))throw new Error(`Unrecognized key: "${h}"`);i[h]&&(m[h]=t?new t({type:"optional",innerType:p[h]}):p[h])}else for(const h in p)m[h]=t?new t({type:"optional",innerType:p[h]}):p[h];return Bo(this,"shape",m),m},checks:[]});return mo(a,d)}function E1(t,a,i){const l=po(a._zod.def,{get shape(){const s=a._zod.def.shape,u={...s};if(i)for(const d in i){if(!(d in u))throw new Error(`Unrecognized key: "${d}"`);i[d]&&(u[d]=new t({type:"nonoptional",innerType:s[d]}))}else for(const d in s)u[d]=new t({type:"nonoptional",innerType:s[d]});return Bo(this,"shape",u),u}});return mo(a,l)}function Ci(t,a=0){if(t.aborted===!0)return!0;for(let i=a;i<t.issues.length;i++)if(t.issues[i]?.continue!==!0)return!0;return!1}function Ri(t,a){return a.map(i=>{var l;return(l=i).path??(l.path=[]),i.path.unshift(t),i})}function ys(t){return typeof t=="string"?t:t?.message}function uo(t,a,i){const l={...t,path:t.path??[]};if(!t.message){const s=ys(t.inst?._zod.def?.error?.(t))??ys(a?.error?.(t))??ys(i.customError?.(t))??ys(i.localeError?.(t))??"Invalid input";l.message=s}return delete l.inst,delete l.continue,a?.reportInput||delete l.input,l}function Id(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Gl(...t){const[a,i,l]=t;return typeof a=="string"?{message:a,code:"custom",input:i,inst:l}:{...a}}const Dy=(t,a)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:a,enumerable:!1}),t.message=JSON.stringify(a,yd,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Uy=G("$ZodError",Dy),qy=G("$ZodError",Dy,{Parent:Error});function x1(t,a=i=>i.message){const i={},l=[];for(const s of t.issues)s.path.length>0?(i[s.path[0]]=i[s.path[0]]||[],i[s.path[0]].push(a(s))):l.push(a(s));return{formErrors:l,fieldErrors:i}}function A1(t,a=i=>i.message){const i={_errors:[]},l=s=>{for(const u of s.issues)if(u.code==="invalid_union"&&u.errors.length)u.errors.map(d=>l({issues:d}));else if(u.code==="invalid_key")l({issues:u.issues});else if(u.code==="invalid_element")l({issues:u.issues});else if(u.path.length===0)i._errors.push(a(u));else{let d=i,p=0;for(;p<u.path.length;){const m=u.path[p];p===u.path.length-1?(d[m]=d[m]||{_errors:[]},d[m]._errors.push(a(u))):d[m]=d[m]||{_errors:[]},d=d[m],p++}}};return l(t),i}const kd=t=>(a,i,l,s)=>{const u=l?Object.assign(l,{async:!1}):{async:!1},d=a._zod.run({value:i,issues:[]},u);if(d instanceof Promise)throw new Ni;if(d.issues.length){const p=new(s?.Err??t)(d.issues.map(m=>uo(m,u,so())));throw Iy(p,s?.callee),p}return d.value},Dd=t=>async(a,i,l,s)=>{const u=l?Object.assign(l,{async:!0}):{async:!0};let d=a._zod.run({value:i,issues:[]},u);if(d instanceof Promise&&(d=await d),d.issues.length){const p=new(s?.Err??t)(d.issues.map(m=>uo(m,u,so())));throw Iy(p,s?.callee),p}return d.value},qs=t=>(a,i,l)=>{const s=l?{...l,async:!1}:{async:!1},u=a._zod.run({value:i,issues:[]},s);if(u instanceof Promise)throw new Ni;return u.issues.length?{success:!1,error:new(t??Uy)(u.issues.map(d=>uo(d,s,so())))}:{success:!0,data:u.value}},O1=qs(qy),js=t=>async(a,i,l)=>{const s=l?Object.assign(l,{async:!0}):{async:!0};let u=a._zod.run({value:i,issues:[]},s);return u instanceof Promise&&(u=await u),u.issues.length?{success:!1,error:new t(u.issues.map(d=>uo(d,s,so())))}:{success:!0,data:u.value}},C1=js(qy),R1=t=>(a,i,l)=>{const s=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return kd(t)(a,i,s)},M1=t=>(a,i,l)=>kd(t)(a,i,l),N1=t=>async(a,i,l)=>{const s=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return Dd(t)(a,i,s)},z1=t=>async(a,i,l)=>Dd(t)(a,i,l),I1=t=>(a,i,l)=>{const s=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return qs(t)(a,i,s)},k1=t=>(a,i,l)=>qs(t)(a,i,l),D1=t=>async(a,i,l)=>{const s=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return js(t)(a,i,s)},U1=t=>async(a,i,l)=>js(t)(a,i,l),q1=/^[cC][^\s-]{8,}$/,j1=/^[0-9a-z]+$/,Z1=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,$1=/^[0-9a-vA-V]{20}$/,B1=/^[A-Za-z0-9]{27}$/,H1=/^[a-zA-Z0-9_-]{21}$/,L1=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,G1=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ev=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,V1=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Y1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function J1(){return new RegExp(Y1,"u")}const X1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Q1=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,K1=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,P1=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,F1=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,jy=/^[A-Za-z0-9_-]*$/,W1=/^\+[1-9]\d{6,14}$/,Zy="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ew=new RegExp(`^${Zy}$`);function $y(t){const a="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${a}`:t.precision===0?`${a}:[0-5]\\d`:`${a}:[0-5]\\d\\.\\d{${t.precision}}`:`${a}(?::[0-5]\\d(?:\\.\\d+)?)?`}function tw(t){return new RegExp(`^${$y(t)}$`)}function nw(t){const a=$y({precision:t.precision}),i=["Z"];t.local&&i.push(""),t.offset&&i.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const l=`${a}(?:${i.join("|")})`;return new RegExp(`^${Zy}T(?:${l})$`)}const aw=t=>{const a=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${a}$`)},ow=/^-?\d+$/,By=/^-?\d+(?:\.\d+)?$/,iw=/^(?:true|false)$/i,lw=/^null$/i,rw=/^[^A-Z]*$/,sw=/^[^a-z]*$/,dn=G("$ZodCheck",(t,a)=>{var i;t._zod??(t._zod={}),t._zod.def=a,(i=t._zod).onattach??(i.onattach=[])}),Hy={number:"number",bigint:"bigint",object:"date"},Ly=G("$ZodCheckLessThan",(t,a)=>{dn.init(t,a);const i=Hy[typeof a.value];t._zod.onattach.push(l=>{const s=l._zod.bag,u=(a.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;a.value<u&&(a.inclusive?s.maximum=a.value:s.exclusiveMaximum=a.value)}),t._zod.check=l=>{(a.inclusive?l.value<=a.value:l.value<a.value)||l.issues.push({origin:i,code:"too_big",maximum:typeof a.value=="object"?a.value.getTime():a.value,input:l.value,inclusive:a.inclusive,inst:t,continue:!a.abort})}}),Gy=G("$ZodCheckGreaterThan",(t,a)=>{dn.init(t,a);const i=Hy[typeof a.value];t._zod.onattach.push(l=>{const s=l._zod.bag,u=(a.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;a.value>u&&(a.inclusive?s.minimum=a.value:s.exclusiveMinimum=a.value)}),t._zod.check=l=>{(a.inclusive?l.value>=a.value:l.value>a.value)||l.issues.push({origin:i,code:"too_small",minimum:typeof a.value=="object"?a.value.getTime():a.value,input:l.value,inclusive:a.inclusive,inst:t,continue:!a.abort})}}),uw=G("$ZodCheckMultipleOf",(t,a)=>{dn.init(t,a),t._zod.onattach.push(i=>{var l;(l=i._zod.bag).multipleOf??(l.multipleOf=a.value)}),t._zod.check=i=>{if(typeof i.value!=typeof a.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof i.value=="bigint"?i.value%a.value===BigInt(0):f1(i.value,a.value)===0)||i.issues.push({origin:typeof i.value,code:"not_multiple_of",divisor:a.value,input:i.value,inst:t,continue:!a.abort})}}),cw=G("$ZodCheckNumberFormat",(t,a)=>{dn.init(t,a),a.format=a.format||"float64";const i=a.format?.includes("int"),l=i?"int":"number",[s,u]=g1[a.format];t._zod.onattach.push(d=>{const p=d._zod.bag;p.format=a.format,p.minimum=s,p.maximum=u,i&&(p.pattern=ow)}),t._zod.check=d=>{const p=d.value;if(i){if(!Number.isInteger(p)){d.issues.push({expected:l,format:a.format,code:"invalid_type",continue:!1,input:p,inst:t});return}if(!Number.isSafeInteger(p)){p>0?d.issues.push({input:p,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:l,inclusive:!0,continue:!a.abort}):d.issues.push({input:p,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:l,inclusive:!0,continue:!a.abort});return}}p<s&&d.issues.push({origin:"number",input:p,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!a.abort}),p>u&&d.issues.push({origin:"number",input:p,code:"too_big",maximum:u,inclusive:!0,inst:t,continue:!a.abort})}}),dw=G("$ZodCheckMaxLength",(t,a)=>{var i;dn.init(t,a),(i=t._zod.def).when??(i.when=l=>{const s=l.value;return!Nd(s)&&s.length!==void 0}),t._zod.onattach.push(l=>{const s=l._zod.bag.maximum??Number.POSITIVE_INFINITY;a.maximum<s&&(l._zod.bag.maximum=a.maximum)}),t._zod.check=l=>{const s=l.value;if(s.length<=a.maximum)return;const d=Id(s);l.issues.push({origin:d,code:"too_big",maximum:a.maximum,inclusive:!0,input:s,inst:t,continue:!a.abort})}}),fw=G("$ZodCheckMinLength",(t,a)=>{var i;dn.init(t,a),(i=t._zod.def).when??(i.when=l=>{const s=l.value;return!Nd(s)&&s.length!==void 0}),t._zod.onattach.push(l=>{const s=l._zod.bag.minimum??Number.NEGATIVE_INFINITY;a.minimum>s&&(l._zod.bag.minimum=a.minimum)}),t._zod.check=l=>{const s=l.value;if(s.length>=a.minimum)return;const d=Id(s);l.issues.push({origin:d,code:"too_small",minimum:a.minimum,inclusive:!0,input:s,inst:t,continue:!a.abort})}}),pw=G("$ZodCheckLengthEquals",(t,a)=>{var i;dn.init(t,a),(i=t._zod.def).when??(i.when=l=>{const s=l.value;return!Nd(s)&&s.length!==void 0}),t._zod.onattach.push(l=>{const s=l._zod.bag;s.minimum=a.length,s.maximum=a.length,s.length=a.length}),t._zod.check=l=>{const s=l.value,u=s.length;if(u===a.length)return;const d=Id(s),p=u>a.length;l.issues.push({origin:d,...p?{code:"too_big",maximum:a.length}:{code:"too_small",minimum:a.length},inclusive:!0,exact:!0,input:l.value,inst:t,continue:!a.abort})}}),Zs=G("$ZodCheckStringFormat",(t,a)=>{var i,l;dn.init(t,a),t._zod.onattach.push(s=>{const u=s._zod.bag;u.format=a.format,a.pattern&&(u.patterns??(u.patterns=new Set),u.patterns.add(a.pattern))}),a.pattern?(i=t._zod).check??(i.check=s=>{a.pattern.lastIndex=0,!a.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:a.format,input:s.value,...a.pattern?{pattern:a.pattern.toString()}:{},inst:t,continue:!a.abort})}):(l=t._zod).check??(l.check=()=>{})}),mw=G("$ZodCheckRegex",(t,a)=>{Zs.init(t,a),t._zod.check=i=>{a.pattern.lastIndex=0,!a.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:"regex",input:i.value,pattern:a.pattern.toString(),inst:t,continue:!a.abort})}}),hw=G("$ZodCheckLowerCase",(t,a)=>{a.pattern??(a.pattern=rw),Zs.init(t,a)}),vw=G("$ZodCheckUpperCase",(t,a)=>{a.pattern??(a.pattern=sw),Zs.init(t,a)}),gw=G("$ZodCheckIncludes",(t,a)=>{dn.init(t,a);const i=ki(a.includes),l=new RegExp(typeof a.position=="number"?`^.{${a.position}}${i}`:i);a.pattern=l,t._zod.onattach.push(s=>{const u=s._zod.bag;u.patterns??(u.patterns=new Set),u.patterns.add(l)}),t._zod.check=s=>{s.value.includes(a.includes,a.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:a.includes,input:s.value,inst:t,continue:!a.abort})}}),yw=G("$ZodCheckStartsWith",(t,a)=>{dn.init(t,a);const i=new RegExp(`^${ki(a.prefix)}.*`);a.pattern??(a.pattern=i),t._zod.onattach.push(l=>{const s=l._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(i)}),t._zod.check=l=>{l.value.startsWith(a.prefix)||l.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:a.prefix,input:l.value,inst:t,continue:!a.abort})}}),_w=G("$ZodCheckEndsWith",(t,a)=>{dn.init(t,a);const i=new RegExp(`.*${ki(a.suffix)}$`);a.pattern??(a.pattern=i),t._zod.onattach.push(l=>{const s=l._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(i)}),t._zod.check=l=>{l.value.endsWith(a.suffix)||l.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:a.suffix,input:l.value,inst:t,continue:!a.abort})}}),bw=G("$ZodCheckOverwrite",(t,a)=>{dn.init(t,a),t._zod.check=i=>{i.value=a.tx(i.value)}});class Sw{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if(typeof a=="function"){a(this,{execution:"sync"}),a(this,{execution:"async"});return}const l=a.split(`
`).filter(d=>d),s=Math.min(...l.map(d=>d.length-d.trimStart().length)),u=l.map(d=>d.slice(s)).map(d=>" ".repeat(this.indent*2)+d);for(const d of u)this.content.push(d)}compile(){const a=Function,i=this?.args,s=[...(this?.content??[""]).map(u=>`  ${u}`)];return new a(...i,s.join(`
`))}}const Tw={major:4,minor:3,patch:5},it=G("$ZodType",(t,a)=>{var i;t??(t={}),t._zod.def=a,t._zod.bag=t._zod.bag||{},t._zod.version=Tw;const l=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&l.unshift(t);for(const s of l)for(const u of s._zod.onattach)u(t);if(l.length===0)(i=t._zod).deferred??(i.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(d,p,m)=>{let h=Ci(d),y;for(const T of p){if(T._zod.def.when){if(!T._zod.def.when(d))continue}else if(h)continue;const b=d.issues.length,w=T._zod.check(d);if(w instanceof Promise&&m?.async===!1)throw new Ni;if(y||w instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await w,d.issues.length!==b&&(h||(h=Ci(d,b)))});else{if(d.issues.length===b)continue;h||(h=Ci(d,b))}}return y?y.then(()=>d):d},u=(d,p,m)=>{if(Ci(d))return d.aborted=!0,d;const h=s(p,l,m);if(h instanceof Promise){if(m.async===!1)throw new Ni;return h.then(y=>t._zod.parse(y,m))}return t._zod.parse(h,m)};t._zod.run=(d,p)=>{if(p.skipChecks)return t._zod.parse(d,p);if(p.direction==="backward"){const h=t._zod.parse({value:d.value,issues:[]},{...p,skipChecks:!0});return h instanceof Promise?h.then(y=>u(y,d,p)):u(h,d,p)}const m=t._zod.parse(d,p);if(m instanceof Promise){if(p.async===!1)throw new Ni;return m.then(h=>s(h,l,p))}return s(m,l,p)}}He(t,"~standard",()=>({validate:s=>{try{const u=O1(t,s);return u.success?{value:u.data}:{issues:u.error?.issues}}catch{return C1(t,s).then(d=>d.success?{value:d.data}:{issues:d.error?.issues})}},vendor:"zod",version:1}))}),Ud=G("$ZodString",(t,a)=>{it.init(t,a),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??aw(t._zod.bag),t._zod.parse=(i,l)=>{if(a.coerce)try{i.value=String(i.value)}catch{}return typeof i.value=="string"||i.issues.push({expected:"string",code:"invalid_type",input:i.value,inst:t}),i}}),mt=G("$ZodStringFormat",(t,a)=>{Zs.init(t,a),Ud.init(t,a)}),ww=G("$ZodGUID",(t,a)=>{a.pattern??(a.pattern=G1),mt.init(t,a)}),Ew=G("$ZodUUID",(t,a)=>{if(a.version){const l={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[a.version];if(l===void 0)throw new Error(`Invalid UUID version: "${a.version}"`);a.pattern??(a.pattern=Ev(l))}else a.pattern??(a.pattern=Ev());mt.init(t,a)}),xw=G("$ZodEmail",(t,a)=>{a.pattern??(a.pattern=V1),mt.init(t,a)}),Aw=G("$ZodURL",(t,a)=>{mt.init(t,a),t._zod.check=i=>{try{const l=i.value.trim(),s=new URL(l);a.hostname&&(a.hostname.lastIndex=0,a.hostname.test(s.hostname)||i.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:a.hostname.source,input:i.value,inst:t,continue:!a.abort})),a.protocol&&(a.protocol.lastIndex=0,a.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||i.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:a.protocol.source,input:i.value,inst:t,continue:!a.abort})),a.normalize?i.value=s.href:i.value=l;return}catch{i.issues.push({code:"invalid_format",format:"url",input:i.value,inst:t,continue:!a.abort})}}}),Ow=G("$ZodEmoji",(t,a)=>{a.pattern??(a.pattern=J1()),mt.init(t,a)}),Cw=G("$ZodNanoID",(t,a)=>{a.pattern??(a.pattern=H1),mt.init(t,a)}),Rw=G("$ZodCUID",(t,a)=>{a.pattern??(a.pattern=q1),mt.init(t,a)}),Mw=G("$ZodCUID2",(t,a)=>{a.pattern??(a.pattern=j1),mt.init(t,a)}),Nw=G("$ZodULID",(t,a)=>{a.pattern??(a.pattern=Z1),mt.init(t,a)}),zw=G("$ZodXID",(t,a)=>{a.pattern??(a.pattern=$1),mt.init(t,a)}),Iw=G("$ZodKSUID",(t,a)=>{a.pattern??(a.pattern=B1),mt.init(t,a)}),kw=G("$ZodISODateTime",(t,a)=>{a.pattern??(a.pattern=nw(a)),mt.init(t,a)}),Dw=G("$ZodISODate",(t,a)=>{a.pattern??(a.pattern=ew),mt.init(t,a)}),Uw=G("$ZodISOTime",(t,a)=>{a.pattern??(a.pattern=tw(a)),mt.init(t,a)}),qw=G("$ZodISODuration",(t,a)=>{a.pattern??(a.pattern=L1),mt.init(t,a)}),jw=G("$ZodIPv4",(t,a)=>{a.pattern??(a.pattern=X1),mt.init(t,a),t._zod.bag.format="ipv4"}),Zw=G("$ZodIPv6",(t,a)=>{a.pattern??(a.pattern=Q1),mt.init(t,a),t._zod.bag.format="ipv6",t._zod.check=i=>{try{new URL(`http://[${i.value}]`)}catch{i.issues.push({code:"invalid_format",format:"ipv6",input:i.value,inst:t,continue:!a.abort})}}}),$w=G("$ZodCIDRv4",(t,a)=>{a.pattern??(a.pattern=K1),mt.init(t,a)}),Bw=G("$ZodCIDRv6",(t,a)=>{a.pattern??(a.pattern=P1),mt.init(t,a),t._zod.check=i=>{const l=i.value.split("/");try{if(l.length!==2)throw new Error;const[s,u]=l;if(!u)throw new Error;const d=Number(u);if(`${d}`!==u)throw new Error;if(d<0||d>128)throw new Error;new URL(`http://[${s}]`)}catch{i.issues.push({code:"invalid_format",format:"cidrv6",input:i.value,inst:t,continue:!a.abort})}}});function Vy(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const Hw=G("$ZodBase64",(t,a)=>{a.pattern??(a.pattern=F1),mt.init(t,a),t._zod.bag.contentEncoding="base64",t._zod.check=i=>{Vy(i.value)||i.issues.push({code:"invalid_format",format:"base64",input:i.value,inst:t,continue:!a.abort})}});function Lw(t){if(!jy.test(t))return!1;const a=t.replace(/[-_]/g,l=>l==="-"?"+":"/"),i=a.padEnd(Math.ceil(a.length/4)*4,"=");return Vy(i)}const Gw=G("$ZodBase64URL",(t,a)=>{a.pattern??(a.pattern=jy),mt.init(t,a),t._zod.bag.contentEncoding="base64url",t._zod.check=i=>{Lw(i.value)||i.issues.push({code:"invalid_format",format:"base64url",input:i.value,inst:t,continue:!a.abort})}}),Vw=G("$ZodE164",(t,a)=>{a.pattern??(a.pattern=W1),mt.init(t,a)});function Yw(t,a=null){try{const i=t.split(".");if(i.length!==3)return!1;const[l]=i;if(!l)return!1;const s=JSON.parse(atob(l));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||a&&(!("alg"in s)||s.alg!==a))}catch{return!1}}const Jw=G("$ZodJWT",(t,a)=>{mt.init(t,a),t._zod.check=i=>{Yw(i.value,a.alg)||i.issues.push({code:"invalid_format",format:"jwt",input:i.value,inst:t,continue:!a.abort})}}),Yy=G("$ZodNumber",(t,a)=>{it.init(t,a),t._zod.pattern=t._zod.bag.pattern??By,t._zod.parse=(i,l)=>{if(a.coerce)try{i.value=Number(i.value)}catch{}const s=i.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return i;const u=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return i.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...u?{received:u}:{}}),i}}),Xw=G("$ZodNumberFormat",(t,a)=>{cw.init(t,a),Yy.init(t,a)}),Qw=G("$ZodBoolean",(t,a)=>{it.init(t,a),t._zod.pattern=iw,t._zod.parse=(i,l)=>{if(a.coerce)try{i.value=!!i.value}catch{}const s=i.value;return typeof s=="boolean"||i.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:t}),i}}),Kw=G("$ZodNull",(t,a)=>{it.init(t,a),t._zod.pattern=lw,t._zod.values=new Set([null]),t._zod.parse=(i,l)=>{const s=i.value;return s===null||i.issues.push({expected:"null",code:"invalid_type",input:s,inst:t}),i}}),Pw=G("$ZodAny",(t,a)=>{it.init(t,a),t._zod.parse=i=>i}),Fw=G("$ZodUnknown",(t,a)=>{it.init(t,a),t._zod.parse=i=>i}),Ww=G("$ZodNever",(t,a)=>{it.init(t,a),t._zod.parse=(i,l)=>(i.issues.push({expected:"never",code:"invalid_type",input:i.value,inst:t}),i)});function xv(t,a,i){t.issues.length&&a.issues.push(...Ri(i,t.issues)),a.value[i]=t.value}const eE=G("$ZodArray",(t,a)=>{it.init(t,a),t._zod.parse=(i,l)=>{const s=i.value;if(!Array.isArray(s))return i.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),i;i.value=Array(s.length);const u=[];for(let d=0;d<s.length;d++){const p=s[d],m=a.element._zod.run({value:p,issues:[]},l);m instanceof Promise?u.push(m.then(h=>xv(h,i,d))):xv(m,i,d)}return u.length?Promise.all(u).then(()=>i):i}});function Es(t,a,i,l,s){if(t.issues.length){if(s&&!(i in l))return;a.issues.push(...Ri(i,t.issues))}t.value===void 0?i in l&&(a.value[i]=void 0):a.value[i]=t.value}function Jy(t){const a=Object.keys(t.shape);for(const l of a)if(!t.shape?.[l]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${l}": expected a Zod schema`);const i=v1(t.shape);return{...t,keys:a,keySet:new Set(a),numKeys:a.length,optionalKeys:new Set(i)}}function Xy(t,a,i,l,s,u){const d=[],p=s.keySet,m=s.catchall._zod,h=m.def.type,y=m.optout==="optional";for(const T in a){if(p.has(T))continue;if(h==="never"){d.push(T);continue}const b=m.run({value:a[T],issues:[]},l);b instanceof Promise?t.push(b.then(w=>Es(w,i,T,a,y))):Es(b,i,T,a,y)}return d.length&&i.issues.push({code:"unrecognized_keys",keys:d,input:a,inst:u}),t.length?Promise.all(t).then(()=>i):i}const tE=G("$ZodObject",(t,a)=>{if(it.init(t,a),!Object.getOwnPropertyDescriptor(a,"shape")?.get){const p=a.shape;Object.defineProperty(a,"shape",{get:()=>{const m={...p};return Object.defineProperty(a,"shape",{value:m}),m}})}const l=Us(()=>Jy(a));He(t._zod,"propValues",()=>{const p=a.shape,m={};for(const h in p){const y=p[h]._zod;if(y.values){m[h]??(m[h]=new Set);for(const T of y.values)m[h].add(T)}}return m});const s=Ll,u=a.catchall;let d;t._zod.parse=(p,m)=>{d??(d=l.value);const h=p.value;if(!s(h))return p.issues.push({expected:"object",code:"invalid_type",input:h,inst:t}),p;p.value={};const y=[],T=d.shape;for(const b of d.keys){const w=T[b],z=w._zod.optout==="optional",O=w._zod.run({value:h[b],issues:[]},m);O instanceof Promise?y.push(O.then(N=>Es(N,p,b,h,z))):Es(O,p,b,h,z)}return u?Xy(y,h,p,m,l.value,t):y.length?Promise.all(y).then(()=>p):p}}),nE=G("$ZodObjectJIT",(t,a)=>{tE.init(t,a);const i=t._zod.parse,l=Us(()=>Jy(a)),s=b=>{const w=new Sw(["shape","payload","ctx"]),z=l.value,O=x=>{const W=wv(x);return`shape[${W}]._zod.run({ value: input[${W}], issues: [] }, ctx)`};w.write("const input = payload.value;");const N=Object.create(null);let X=0;for(const x of z.keys)N[x]=`key_${X++}`;w.write("const newResult = {};");for(const x of z.keys){const W=N[x],ne=wv(x),$=b[x]?._zod?.optout==="optional";w.write(`const ${W} = ${O(x)};`),$?w.write(`
        if (${W}.issues.length) {
          if (${ne} in input) {
            payload.issues = payload.issues.concat(${W}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${ne}, ...iss.path] : [${ne}]
            })));
          }
        }
        
        if (${W}.value === undefined) {
          if (${ne} in input) {
            newResult[${ne}] = undefined;
          }
        } else {
          newResult[${ne}] = ${W}.value;
        }
        
      `):w.write(`
        if (${W}.issues.length) {
          payload.issues = payload.issues.concat(${W}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${ne}, ...iss.path] : [${ne}]
          })));
        }
        
        if (${W}.value === undefined) {
          if (${ne} in input) {
            newResult[${ne}] = undefined;
          }
        } else {
          newResult[${ne}] = ${W}.value;
        }
        
      `)}w.write("payload.value = newResult;"),w.write("return payload;");const K=w.compile();return(x,W)=>K(b,x,W)};let u;const d=Ll,p=!Ny.jitless,h=p&&m1.value,y=a.catchall;let T;t._zod.parse=(b,w)=>{T??(T=l.value);const z=b.value;return d(z)?p&&h&&w?.async===!1&&w.jitless!==!0?(u||(u=s(a.shape)),b=u(b,w),y?Xy([],z,b,w,T,t):b):i(b,w):(b.issues.push({expected:"object",code:"invalid_type",input:z,inst:t}),b)}});function Av(t,a,i,l){for(const u of t)if(u.issues.length===0)return a.value=u.value,a;const s=t.filter(u=>!Ci(u));return s.length===1?(a.value=s[0].value,s[0]):(a.issues.push({code:"invalid_union",input:a.value,inst:i,errors:t.map(u=>u.issues.map(d=>uo(d,l,so())))}),a)}const Qy=G("$ZodUnion",(t,a)=>{it.init(t,a),He(t._zod,"optin",()=>a.options.some(s=>s._zod.optin==="optional")?"optional":void 0),He(t._zod,"optout",()=>a.options.some(s=>s._zod.optout==="optional")?"optional":void 0),He(t._zod,"values",()=>{if(a.options.every(s=>s._zod.values))return new Set(a.options.flatMap(s=>Array.from(s._zod.values)))}),He(t._zod,"pattern",()=>{if(a.options.every(s=>s._zod.pattern)){const s=a.options.map(u=>u._zod.pattern);return new RegExp(`^(${s.map(u=>zd(u.source)).join("|")})$`)}});const i=a.options.length===1,l=a.options[0]._zod.run;t._zod.parse=(s,u)=>{if(i)return l(s,u);let d=!1;const p=[];for(const m of a.options){const h=m._zod.run({value:s.value,issues:[]},u);if(h instanceof Promise)p.push(h),d=!0;else{if(h.issues.length===0)return h;p.push(h)}}return d?Promise.all(p).then(m=>Av(m,s,t,u)):Av(p,s,t,u)}}),aE=G("$ZodDiscriminatedUnion",(t,a)=>{a.inclusive=!1,Qy.init(t,a);const i=t._zod.parse;He(t._zod,"propValues",()=>{const s={};for(const u of a.options){const d=u._zod.propValues;if(!d||Object.keys(d).length===0)throw new Error(`Invalid discriminated union option at index "${a.options.indexOf(u)}"`);for(const[p,m]of Object.entries(d)){s[p]||(s[p]=new Set);for(const h of m)s[p].add(h)}}return s});const l=Us(()=>{const s=a.options,u=new Map;for(const d of s){const p=d._zod.propValues?.[a.discriminator];if(!p||p.size===0)throw new Error(`Invalid discriminated union option at index "${a.options.indexOf(d)}"`);for(const m of p){if(u.has(m))throw new Error(`Duplicate discriminator value "${String(m)}"`);u.set(m,d)}}return u});t._zod.parse=(s,u)=>{const d=s.value;if(!Ll(d))return s.issues.push({code:"invalid_type",expected:"object",input:d,inst:t}),s;const p=l.value.get(d?.[a.discriminator]);return p?p._zod.run(s,u):a.unionFallback?i(s,u):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:a.discriminator,input:d,path:[a.discriminator],inst:t}),s)}}),oE=G("$ZodIntersection",(t,a)=>{it.init(t,a),t._zod.parse=(i,l)=>{const s=i.value,u=a.left._zod.run({value:s,issues:[]},l),d=a.right._zod.run({value:s,issues:[]},l);return u instanceof Promise||d instanceof Promise?Promise.all([u,d]).then(([m,h])=>Ov(i,m,h)):Ov(i,u,d)}});function _d(t,a){if(t===a)return{valid:!0,data:t};if(t instanceof Date&&a instanceof Date&&+t==+a)return{valid:!0,data:t};if(Ii(t)&&Ii(a)){const i=Object.keys(a),l=Object.keys(t).filter(u=>i.indexOf(u)!==-1),s={...t,...a};for(const u of l){const d=_d(t[u],a[u]);if(!d.valid)return{valid:!1,mergeErrorPath:[u,...d.mergeErrorPath]};s[u]=d.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(a)){if(t.length!==a.length)return{valid:!1,mergeErrorPath:[]};const i=[];for(let l=0;l<t.length;l++){const s=t[l],u=a[l],d=_d(s,u);if(!d.valid)return{valid:!1,mergeErrorPath:[l,...d.mergeErrorPath]};i.push(d.data)}return{valid:!0,data:i}}return{valid:!1,mergeErrorPath:[]}}function Ov(t,a,i){const l=new Map;let s;for(const p of a.issues)if(p.code==="unrecognized_keys"){s??(s=p);for(const m of p.keys)l.has(m)||l.set(m,{}),l.get(m).l=!0}else t.issues.push(p);for(const p of i.issues)if(p.code==="unrecognized_keys")for(const m of p.keys)l.has(m)||l.set(m,{}),l.get(m).r=!0;else t.issues.push(p);const u=[...l].filter(([,p])=>p.l&&p.r).map(([p])=>p);if(u.length&&s&&t.issues.push({...s,keys:u}),Ci(t))return t;const d=_d(a.value,i.value);if(!d.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(d.mergeErrorPath)}`);return t.value=d.data,t}const iE=G("$ZodRecord",(t,a)=>{it.init(t,a),t._zod.parse=(i,l)=>{const s=i.value;if(!Ii(s))return i.issues.push({expected:"record",code:"invalid_type",input:s,inst:t}),i;const u=[],d=a.keyType._zod.values;if(d){i.value={};const p=new Set;for(const h of d)if(typeof h=="string"||typeof h=="number"||typeof h=="symbol"){p.add(typeof h=="number"?h.toString():h);const y=a.valueType._zod.run({value:s[h],issues:[]},l);y instanceof Promise?u.push(y.then(T=>{T.issues.length&&i.issues.push(...Ri(h,T.issues)),i.value[h]=T.value})):(y.issues.length&&i.issues.push(...Ri(h,y.issues)),i.value[h]=y.value)}let m;for(const h in s)p.has(h)||(m=m??[],m.push(h));m&&m.length>0&&i.issues.push({code:"unrecognized_keys",input:s,inst:t,keys:m})}else{i.value={};for(const p of Reflect.ownKeys(s)){if(p==="__proto__")continue;let m=a.keyType._zod.run({value:p,issues:[]},l);if(m instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof p=="string"&&By.test(p)&&m.issues.length&&m.issues.some(T=>T.code==="invalid_type"&&T.expected==="number")){const T=a.keyType._zod.run({value:Number(p),issues:[]},l);if(T instanceof Promise)throw new Error("Async schemas not supported in object keys currently");T.issues.length===0&&(m=T)}if(m.issues.length){a.mode==="loose"?i.value[p]=s[p]:i.issues.push({code:"invalid_key",origin:"record",issues:m.issues.map(T=>uo(T,l,so())),input:p,path:[p],inst:t});continue}const y=a.valueType._zod.run({value:s[p],issues:[]},l);y instanceof Promise?u.push(y.then(T=>{T.issues.length&&i.issues.push(...Ri(p,T.issues)),i.value[m.value]=T.value})):(y.issues.length&&i.issues.push(...Ri(p,y.issues)),i.value[m.value]=y.value)}}return u.length?Promise.all(u).then(()=>i):i}}),lE=G("$ZodEnum",(t,a)=>{it.init(t,a);const i=zy(a.entries),l=new Set(i);t._zod.values=l,t._zod.pattern=new RegExp(`^(${i.filter(s=>h1.has(typeof s)).map(s=>typeof s=="string"?ki(s):s.toString()).join("|")})$`),t._zod.parse=(s,u)=>{const d=s.value;return l.has(d)||s.issues.push({code:"invalid_value",values:i,input:d,inst:t}),s}}),rE=G("$ZodLiteral",(t,a)=>{if(it.init(t,a),a.values.length===0)throw new Error("Cannot create literal schema with no valid values");const i=new Set(a.values);t._zod.values=i,t._zod.pattern=new RegExp(`^(${a.values.map(l=>typeof l=="string"?ki(l):l?ki(l.toString()):String(l)).join("|")})$`),t._zod.parse=(l,s)=>{const u=l.value;return i.has(u)||l.issues.push({code:"invalid_value",values:a.values,input:u,inst:t}),l}}),sE=G("$ZodTransform",(t,a)=>{it.init(t,a),t._zod.parse=(i,l)=>{if(l.direction==="backward")throw new My(t.constructor.name);const s=a.transform(i.value,i);if(l.async)return(s instanceof Promise?s:Promise.resolve(s)).then(d=>(i.value=d,i));if(s instanceof Promise)throw new Ni;return i.value=s,i}});function Cv(t,a){return t.issues.length&&a===void 0?{issues:[],value:void 0}:t}const Ky=G("$ZodOptional",(t,a)=>{it.init(t,a),t._zod.optin="optional",t._zod.optout="optional",He(t._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,void 0]):void 0),He(t._zod,"pattern",()=>{const i=a.innerType._zod.pattern;return i?new RegExp(`^(${zd(i.source)})?$`):void 0}),t._zod.parse=(i,l)=>{if(a.innerType._zod.optin==="optional"){const s=a.innerType._zod.run(i,l);return s instanceof Promise?s.then(u=>Cv(u,i.value)):Cv(s,i.value)}return i.value===void 0?i:a.innerType._zod.run(i,l)}}),uE=G("$ZodExactOptional",(t,a)=>{Ky.init(t,a),He(t._zod,"values",()=>a.innerType._zod.values),He(t._zod,"pattern",()=>a.innerType._zod.pattern),t._zod.parse=(i,l)=>a.innerType._zod.run(i,l)}),cE=G("$ZodNullable",(t,a)=>{it.init(t,a),He(t._zod,"optin",()=>a.innerType._zod.optin),He(t._zod,"optout",()=>a.innerType._zod.optout),He(t._zod,"pattern",()=>{const i=a.innerType._zod.pattern;return i?new RegExp(`^(${zd(i.source)}|null)$`):void 0}),He(t._zod,"values",()=>a.innerType._zod.values?new Set([...a.innerType._zod.values,null]):void 0),t._zod.parse=(i,l)=>i.value===null?i:a.innerType._zod.run(i,l)}),dE=G("$ZodDefault",(t,a)=>{it.init(t,a),t._zod.optin="optional",He(t._zod,"values",()=>a.innerType._zod.values),t._zod.parse=(i,l)=>{if(l.direction==="backward")return a.innerType._zod.run(i,l);if(i.value===void 0)return i.value=a.defaultValue,i;const s=a.innerType._zod.run(i,l);return s instanceof Promise?s.then(u=>Rv(u,a)):Rv(s,a)}});function Rv(t,a){return t.value===void 0&&(t.value=a.defaultValue),t}const fE=G("$ZodPrefault",(t,a)=>{it.init(t,a),t._zod.optin="optional",He(t._zod,"values",()=>a.innerType._zod.values),t._zod.parse=(i,l)=>(l.direction==="backward"||i.value===void 0&&(i.value=a.defaultValue),a.innerType._zod.run(i,l))}),pE=G("$ZodNonOptional",(t,a)=>{it.init(t,a),He(t._zod,"values",()=>{const i=a.innerType._zod.values;return i?new Set([...i].filter(l=>l!==void 0)):void 0}),t._zod.parse=(i,l)=>{const s=a.innerType._zod.run(i,l);return s instanceof Promise?s.then(u=>Mv(u,t)):Mv(s,t)}});function Mv(t,a){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:a}),t}const mE=G("$ZodCatch",(t,a)=>{it.init(t,a),He(t._zod,"optin",()=>a.innerType._zod.optin),He(t._zod,"optout",()=>a.innerType._zod.optout),He(t._zod,"values",()=>a.innerType._zod.values),t._zod.parse=(i,l)=>{if(l.direction==="backward")return a.innerType._zod.run(i,l);const s=a.innerType._zod.run(i,l);return s instanceof Promise?s.then(u=>(i.value=u.value,u.issues.length&&(i.value=a.catchValue({...i,error:{issues:u.issues.map(d=>uo(d,l,so()))},input:i.value}),i.issues=[]),i)):(i.value=s.value,s.issues.length&&(i.value=a.catchValue({...i,error:{issues:s.issues.map(u=>uo(u,l,so()))},input:i.value}),i.issues=[]),i)}}),hE=G("$ZodPipe",(t,a)=>{it.init(t,a),He(t._zod,"values",()=>a.in._zod.values),He(t._zod,"optin",()=>a.in._zod.optin),He(t._zod,"optout",()=>a.out._zod.optout),He(t._zod,"propValues",()=>a.in._zod.propValues),t._zod.parse=(i,l)=>{if(l.direction==="backward"){const u=a.out._zod.run(i,l);return u instanceof Promise?u.then(d=>_s(d,a.in,l)):_s(u,a.in,l)}const s=a.in._zod.run(i,l);return s instanceof Promise?s.then(u=>_s(u,a.out,l)):_s(s,a.out,l)}});function _s(t,a,i){return t.issues.length?(t.aborted=!0,t):a._zod.run({value:t.value,issues:t.issues},i)}const vE=G("$ZodReadonly",(t,a)=>{it.init(t,a),He(t._zod,"propValues",()=>a.innerType._zod.propValues),He(t._zod,"values",()=>a.innerType._zod.values),He(t._zod,"optin",()=>a.innerType?._zod?.optin),He(t._zod,"optout",()=>a.innerType?._zod?.optout),t._zod.parse=(i,l)=>{if(l.direction==="backward")return a.innerType._zod.run(i,l);const s=a.innerType._zod.run(i,l);return s instanceof Promise?s.then(Nv):Nv(s)}});function Nv(t){return t.value=Object.freeze(t.value),t}const gE=G("$ZodLazy",(t,a)=>{it.init(t,a),He(t._zod,"innerType",()=>a.getter()),He(t._zod,"pattern",()=>t._zod.innerType?._zod?.pattern),He(t._zod,"propValues",()=>t._zod.innerType?._zod?.propValues),He(t._zod,"optin",()=>t._zod.innerType?._zod?.optin??void 0),He(t._zod,"optout",()=>t._zod.innerType?._zod?.optout??void 0),t._zod.parse=(i,l)=>t._zod.innerType._zod.run(i,l)}),yE=G("$ZodCustom",(t,a)=>{dn.init(t,a),it.init(t,a),t._zod.parse=(i,l)=>i,t._zod.check=i=>{const l=i.value,s=a.fn(l);if(s instanceof Promise)return s.then(u=>zv(u,i,l,t));zv(s,i,l,t)}});function zv(t,a,i,l){if(!t){const s={code:"custom",input:i,inst:l,path:[...l._zod.def.path??[]],continue:!l._zod.def.abort};l._zod.def.params&&(s.params=l._zod.def.params),a.issues.push(Gl(s))}}var Iv;class _E{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...i){const l=i[0];return this._map.set(a,l),l&&typeof l=="object"&&"id"in l&&this._idmap.set(l.id,a),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){const i=this._map.get(a);return i&&typeof i=="object"&&"id"in i&&this._idmap.delete(i.id),this._map.delete(a),this}get(a){const i=a._zod.parent;if(i){const l={...this.get(i)??{}};delete l.id;const s={...l,...this._map.get(a)};return Object.keys(s).length?s:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}function bE(){return new _E}(Iv=globalThis).__zod_globalRegistry??(Iv.__zod_globalRegistry=bE());const $l=globalThis.__zod_globalRegistry;function SE(t,a){return new t({type:"string",...he(a)})}function TE(t,a){return new t({type:"string",format:"email",check:"string_format",abort:!1,...he(a)})}function kv(t,a){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...he(a)})}function wE(t,a){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...he(a)})}function EE(t,a){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...he(a)})}function xE(t,a){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...he(a)})}function AE(t,a){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...he(a)})}function OE(t,a){return new t({type:"string",format:"url",check:"string_format",abort:!1,...he(a)})}function CE(t,a){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...he(a)})}function RE(t,a){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...he(a)})}function ME(t,a){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...he(a)})}function NE(t,a){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...he(a)})}function zE(t,a){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...he(a)})}function IE(t,a){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...he(a)})}function kE(t,a){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...he(a)})}function DE(t,a){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...he(a)})}function UE(t,a){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...he(a)})}function qE(t,a){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...he(a)})}function jE(t,a){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...he(a)})}function ZE(t,a){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...he(a)})}function $E(t,a){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...he(a)})}function BE(t,a){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...he(a)})}function HE(t,a){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...he(a)})}function LE(t,a){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...he(a)})}function GE(t,a){return new t({type:"string",format:"date",check:"string_format",...he(a)})}function VE(t,a){return new t({type:"string",format:"time",check:"string_format",precision:null,...he(a)})}function YE(t,a){return new t({type:"string",format:"duration",check:"string_format",...he(a)})}function JE(t,a){return new t({type:"number",checks:[],...he(a)})}function XE(t,a){return new t({type:"number",coerce:!0,checks:[],...he(a)})}function QE(t,a){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...he(a)})}function KE(t,a){return new t({type:"boolean",...he(a)})}function PE(t,a){return new t({type:"null",...he(a)})}function FE(t){return new t({type:"any"})}function WE(t){return new t({type:"unknown"})}function ex(t,a){return new t({type:"never",...he(a)})}function Dv(t,a){return new Ly({check:"less_than",...he(a),value:t,inclusive:!1})}function od(t,a){return new Ly({check:"less_than",...he(a),value:t,inclusive:!0})}function Uv(t,a){return new Gy({check:"greater_than",...he(a),value:t,inclusive:!1})}function id(t,a){return new Gy({check:"greater_than",...he(a),value:t,inclusive:!0})}function qv(t,a){return new uw({check:"multiple_of",...he(a),value:t})}function Py(t,a){return new dw({check:"max_length",...he(a),maximum:t})}function xs(t,a){return new fw({check:"min_length",...he(a),minimum:t})}function Fy(t,a){return new pw({check:"length_equals",...he(a),length:t})}function tx(t,a){return new mw({check:"string_format",format:"regex",...he(a),pattern:t})}function nx(t){return new hw({check:"string_format",format:"lowercase",...he(t)})}function ax(t){return new vw({check:"string_format",format:"uppercase",...he(t)})}function ox(t,a){return new gw({check:"string_format",format:"includes",...he(a),includes:t})}function ix(t,a){return new yw({check:"string_format",format:"starts_with",...he(a),prefix:t})}function lx(t,a){return new _w({check:"string_format",format:"ends_with",...he(a),suffix:t})}function qi(t){return new bw({check:"overwrite",tx:t})}function rx(t){return qi(a=>a.normalize(t))}function sx(){return qi(t=>t.trim())}function ux(){return qi(t=>t.toLowerCase())}function cx(){return qi(t=>t.toUpperCase())}function dx(){return qi(t=>p1(t))}function fx(t,a,i){return new t({type:"array",element:a,...he(i)})}function px(t,a,i){const l=he(i);return l.abort??(l.abort=!0),new t({type:"custom",check:"custom",fn:a,...l})}function mx(t,a,i){return new t({type:"custom",check:"custom",fn:a,...he(i)})}function hx(t){const a=vx(i=>(i.addIssue=l=>{if(typeof l=="string")i.issues.push(Gl(l,i.value,a._zod.def));else{const s=l;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=i.value),s.inst??(s.inst=a),s.continue??(s.continue=!a._zod.def.abort),i.issues.push(Gl(s))}},t(i.value,i)));return a}function vx(t,a){const i=new dn({check:"custom",...he(a)});return i._zod.check=t,i}function As(t){let a=t?.target??"draft-2020-12";return a==="draft-4"&&(a="draft-04"),a==="draft-7"&&(a="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??$l,target:a,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function ot(t,a,i={path:[],schemaPath:[]}){var l;const s=t._zod.def,u=a.seen.get(t);if(u)return u.count++,i.schemaPath.includes(t)&&(u.cycle=i.path),u.schema;const d={schema:{},count:1,cycle:void 0,path:i.path};a.seen.set(t,d);const p=t._zod.toJSONSchema?.();if(p)d.schema=p;else{const y={...i,schemaPath:[...i.schemaPath,t],path:i.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(a,d.schema,y);else{const b=d.schema,w=a.processors[s.type];if(!w)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);w(t,a,b,y)}const T=t._zod.parent;T&&(d.ref||(d.ref=T),ot(T,a,y),a.seen.get(T).isParent=!0)}const m=a.metadataRegistry.get(t);return m&&Object.assign(d.schema,m),a.io==="input"&&en(t)&&(delete d.schema.examples,delete d.schema.default),a.io==="input"&&d.schema._prefault&&((l=d.schema).default??(l.default=d.schema._prefault)),delete d.schema._prefault,a.seen.get(t).schema}function Os(t,a){const i=t.seen.get(a);if(!i)throw new Error("Unprocessed schema. This is a bug in Zod.");const l=new Map;for(const d of t.seen.entries()){const p=t.metadataRegistry.get(d[0])?.id;if(p){const m=l.get(p);if(m&&m!==d[0])throw new Error(`Duplicate schema id "${p}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);l.set(p,d[0])}}const s=d=>{const p=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const T=t.external.registry.get(d[0])?.id,b=t.external.uri??(z=>z);if(T)return{ref:b(T)};const w=d[1].defId??d[1].schema.id??`schema${t.counter++}`;return d[1].defId=w,{defId:w,ref:`${b("__shared")}#/${p}/${w}`}}if(d[1]===i)return{ref:"#"};const h=`#/${p}/`,y=d[1].schema.id??`__schema${t.counter++}`;return{defId:y,ref:h+y}},u=d=>{if(d[1].schema.$ref)return;const p=d[1],{ref:m,defId:h}=s(d);p.def={...p.schema},h&&(p.defId=h);const y=p.schema;for(const T in y)delete y[T];y.$ref=m};if(t.cycles==="throw")for(const d of t.seen.entries()){const p=d[1];if(p.cycle)throw new Error(`Cycle detected: #/${p.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const d of t.seen.entries()){const p=d[1];if(a===d[0]){u(d);continue}if(t.external){const h=t.external.registry.get(d[0])?.id;if(a!==d[0]&&h){u(d);continue}}if(t.metadataRegistry.get(d[0])?.id){u(d);continue}if(p.cycle){u(d);continue}if(p.count>1&&t.reused==="ref"){u(d);continue}}}function Cs(t,a){const i=t.seen.get(a);if(!i)throw new Error("Unprocessed schema. This is a bug in Zod.");const l=d=>{const p=t.seen.get(d);if(p.ref===null)return;const m=p.def??p.schema,h={...m},y=p.ref;if(p.ref=null,y){l(y);const b=t.seen.get(y),w=b.schema;if(w.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(m.allOf=m.allOf??[],m.allOf.push(w)):Object.assign(m,w),Object.assign(m,h),d._zod.parent===y)for(const O in m)O==="$ref"||O==="allOf"||O in h||delete m[O];if(w.$ref)for(const O in m)O==="$ref"||O==="allOf"||O in b.def&&JSON.stringify(m[O])===JSON.stringify(b.def[O])&&delete m[O]}const T=d._zod.parent;if(T&&T!==y){l(T);const b=t.seen.get(T);if(b?.schema.$ref&&(m.$ref=b.schema.$ref,b.def))for(const w in m)w==="$ref"||w==="allOf"||w in b.def&&JSON.stringify(m[w])===JSON.stringify(b.def[w])&&delete m[w]}t.override({zodSchema:d,jsonSchema:m,path:p.path??[]})};for(const d of[...t.seen.entries()].reverse())l(d[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const d=t.external.registry.get(a)?.id;if(!d)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(d)}Object.assign(s,i.def??i.schema);const u=t.external?.defs??{};for(const d of t.seen.entries()){const p=d[1];p.def&&p.defId&&(u[p.defId]=p.def)}t.external||Object.keys(u).length>0&&(t.target==="draft-2020-12"?s.$defs=u:s.definitions=u);try{const d=JSON.parse(JSON.stringify(s));return Object.defineProperty(d,"~standard",{value:{...a["~standard"],jsonSchema:{input:Rs(a,"input",t.processors),output:Rs(a,"output",t.processors)}},enumerable:!1,writable:!1}),d}catch{throw new Error("Error converting schema to JSON.")}}function en(t,a){const i=a??{seen:new Set};if(i.seen.has(t))return!1;i.seen.add(t);const l=t._zod.def;if(l.type==="transform")return!0;if(l.type==="array")return en(l.element,i);if(l.type==="set")return en(l.valueType,i);if(l.type==="lazy")return en(l.getter(),i);if(l.type==="promise"||l.type==="optional"||l.type==="nonoptional"||l.type==="nullable"||l.type==="readonly"||l.type==="default"||l.type==="prefault")return en(l.innerType,i);if(l.type==="intersection")return en(l.left,i)||en(l.right,i);if(l.type==="record"||l.type==="map")return en(l.keyType,i)||en(l.valueType,i);if(l.type==="pipe")return en(l.in,i)||en(l.out,i);if(l.type==="object"){for(const s in l.shape)if(en(l.shape[s],i))return!0;return!1}if(l.type==="union"){for(const s of l.options)if(en(s,i))return!0;return!1}if(l.type==="tuple"){for(const s of l.items)if(en(s,i))return!0;return!!(l.rest&&en(l.rest,i))}return!1}const gx=(t,a={})=>i=>{const l=As({...i,processors:a});return ot(t,l),Os(l,t),Cs(l,t)},Rs=(t,a,i={})=>l=>{const{libraryOptions:s,target:u}=l??{},d=As({...s??{},target:u,io:a,processors:i});return ot(t,d),Os(d,t),Cs(d,t)},yx={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},Wy=(t,a,i,l)=>{const s=i;s.type="string";const{minimum:u,maximum:d,format:p,patterns:m,contentEncoding:h}=t._zod.bag;if(typeof u=="number"&&(s.minLength=u),typeof d=="number"&&(s.maxLength=d),p&&(s.format=yx[p]??p,s.format===""&&delete s.format,p==="time"&&delete s.format),h&&(s.contentEncoding=h),m&&m.size>0){const y=[...m];y.length===1?s.pattern=y[0].source:y.length>1&&(s.allOf=[...y.map(T=>({...a.target==="draft-07"||a.target==="draft-04"||a.target==="openapi-3.0"?{type:"string"}:{},pattern:T.source}))])}},e_=(t,a,i,l)=>{const s=i,{minimum:u,maximum:d,format:p,multipleOf:m,exclusiveMaximum:h,exclusiveMinimum:y}=t._zod.bag;typeof p=="string"&&p.includes("int")?s.type="integer":s.type="number",typeof y=="number"&&(a.target==="draft-04"||a.target==="openapi-3.0"?(s.minimum=y,s.exclusiveMinimum=!0):s.exclusiveMinimum=y),typeof u=="number"&&(s.minimum=u,typeof y=="number"&&a.target!=="draft-04"&&(y>=u?delete s.minimum:delete s.exclusiveMinimum)),typeof h=="number"&&(a.target==="draft-04"||a.target==="openapi-3.0"?(s.maximum=h,s.exclusiveMaximum=!0):s.exclusiveMaximum=h),typeof d=="number"&&(s.maximum=d,typeof h=="number"&&a.target!=="draft-04"&&(h<=d?delete s.maximum:delete s.exclusiveMaximum)),typeof m=="number"&&(s.multipleOf=m)},t_=(t,a,i,l)=>{i.type="boolean"},_x=(t,a,i,l)=>{if(a.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},bx=(t,a,i,l)=>{if(a.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},n_=(t,a,i,l)=>{a.target==="openapi-3.0"?(i.type="string",i.nullable=!0,i.enum=[null]):i.type="null"},Sx=(t,a,i,l)=>{if(a.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},Tx=(t,a,i,l)=>{if(a.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},a_=(t,a,i,l)=>{i.not={}},o_=(t,a,i,l)=>{},i_=(t,a,i,l)=>{},wx=(t,a,i,l)=>{if(a.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},l_=(t,a,i,l)=>{const s=t._zod.def,u=zy(s.entries);u.every(d=>typeof d=="number")&&(i.type="number"),u.every(d=>typeof d=="string")&&(i.type="string"),i.enum=u},r_=(t,a,i,l)=>{const s=t._zod.def,u=[];for(const d of s.values)if(d===void 0){if(a.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof d=="bigint"){if(a.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");u.push(Number(d))}else u.push(d);if(u.length!==0)if(u.length===1){const d=u[0];i.type=d===null?"null":typeof d,a.target==="draft-04"||a.target==="openapi-3.0"?i.enum=[d]:i.const=d}else u.every(d=>typeof d=="number")&&(i.type="number"),u.every(d=>typeof d=="string")&&(i.type="string"),u.every(d=>typeof d=="boolean")&&(i.type="boolean"),u.every(d=>d===null)&&(i.type="null"),i.enum=u},Ex=(t,a,i,l)=>{if(a.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},xx=(t,a,i,l)=>{const s=i,u=t._zod.pattern;if(!u)throw new Error("Pattern not found in template literal");s.type="string",s.pattern=u.source},Ax=(t,a,i,l)=>{const s=i,u={type:"string",format:"binary",contentEncoding:"binary"},{minimum:d,maximum:p,mime:m}=t._zod.bag;d!==void 0&&(u.minLength=d),p!==void 0&&(u.maxLength=p),m?m.length===1?(u.contentMediaType=m[0],Object.assign(s,u)):(Object.assign(s,u),s.anyOf=m.map(h=>({contentMediaType:h}))):Object.assign(s,u)},Ox=(t,a,i,l)=>{i.type="boolean"},s_=(t,a,i,l)=>{if(a.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Cx=(t,a,i,l)=>{if(a.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},u_=(t,a,i,l)=>{if(a.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Rx=(t,a,i,l)=>{if(a.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},Mx=(t,a,i,l)=>{if(a.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},c_=(t,a,i,l)=>{const s=i,u=t._zod.def,{minimum:d,maximum:p}=t._zod.bag;typeof d=="number"&&(s.minItems=d),typeof p=="number"&&(s.maxItems=p),s.type="array",s.items=ot(u.element,a,{...l,path:[...l.path,"items"]})},d_=(t,a,i,l)=>{const s=i,u=t._zod.def;s.type="object",s.properties={};const d=u.shape;for(const h in d)s.properties[h]=ot(d[h],a,{...l,path:[...l.path,"properties",h]});const p=new Set(Object.keys(d)),m=new Set([...p].filter(h=>{const y=u.shape[h]._zod;return a.io==="input"?y.optin===void 0:y.optout===void 0}));m.size>0&&(s.required=Array.from(m)),u.catchall?._zod.def.type==="never"?s.additionalProperties=!1:u.catchall?u.catchall&&(s.additionalProperties=ot(u.catchall,a,{...l,path:[...l.path,"additionalProperties"]})):a.io==="output"&&(s.additionalProperties=!1)},f_=(t,a,i,l)=>{const s=t._zod.def,u=s.inclusive===!1,d=s.options.map((p,m)=>ot(p,a,{...l,path:[...l.path,u?"oneOf":"anyOf",m]}));u?i.oneOf=d:i.anyOf=d},p_=(t,a,i,l)=>{const s=t._zod.def,u=ot(s.left,a,{...l,path:[...l.path,"allOf",0]}),d=ot(s.right,a,{...l,path:[...l.path,"allOf",1]}),p=h=>"allOf"in h&&Object.keys(h).length===1,m=[...p(u)?u.allOf:[u],...p(d)?d.allOf:[d]];i.allOf=m},Nx=(t,a,i,l)=>{const s=i,u=t._zod.def;s.type="array";const d=a.target==="draft-2020-12"?"prefixItems":"items",p=a.target==="draft-2020-12"||a.target==="openapi-3.0"?"items":"additionalItems",m=u.items.map((b,w)=>ot(b,a,{...l,path:[...l.path,d,w]})),h=u.rest?ot(u.rest,a,{...l,path:[...l.path,p,...a.target==="openapi-3.0"?[u.items.length]:[]]}):null;a.target==="draft-2020-12"?(s.prefixItems=m,h&&(s.items=h)):a.target==="openapi-3.0"?(s.items={anyOf:m},h&&s.items.anyOf.push(h),s.minItems=m.length,h||(s.maxItems=m.length)):(s.items=m,h&&(s.additionalItems=h));const{minimum:y,maximum:T}=t._zod.bag;typeof y=="number"&&(s.minItems=y),typeof T=="number"&&(s.maxItems=T)},m_=(t,a,i,l)=>{const s=i,u=t._zod.def;s.type="object";const d=u.keyType,m=d._zod.bag?.patterns;if(u.mode==="loose"&&m&&m.size>0){const y=ot(u.valueType,a,{...l,path:[...l.path,"patternProperties","*"]});s.patternProperties={};for(const T of m)s.patternProperties[T.source]=y}else(a.target==="draft-07"||a.target==="draft-2020-12")&&(s.propertyNames=ot(u.keyType,a,{...l,path:[...l.path,"propertyNames"]})),s.additionalProperties=ot(u.valueType,a,{...l,path:[...l.path,"additionalProperties"]});const h=d._zod.values;if(h){const y=[...h].filter(T=>typeof T=="string"||typeof T=="number");y.length>0&&(s.required=y)}},h_=(t,a,i,l)=>{const s=t._zod.def,u=ot(s.innerType,a,l),d=a.seen.get(t);a.target==="openapi-3.0"?(d.ref=s.innerType,i.nullable=!0):i.anyOf=[u,{type:"null"}]},v_=(t,a,i,l)=>{const s=t._zod.def;ot(s.innerType,a,l);const u=a.seen.get(t);u.ref=s.innerType},g_=(t,a,i,l)=>{const s=t._zod.def;ot(s.innerType,a,l);const u=a.seen.get(t);u.ref=s.innerType,i.default=JSON.parse(JSON.stringify(s.defaultValue))},y_=(t,a,i,l)=>{const s=t._zod.def;ot(s.innerType,a,l);const u=a.seen.get(t);u.ref=s.innerType,a.io==="input"&&(i._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},__=(t,a,i,l)=>{const s=t._zod.def;ot(s.innerType,a,l);const u=a.seen.get(t);u.ref=s.innerType;let d;try{d=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}i.default=d},b_=(t,a,i,l)=>{const s=t._zod.def,u=a.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;ot(u,a,l);const d=a.seen.get(t);d.ref=u},S_=(t,a,i,l)=>{const s=t._zod.def;ot(s.innerType,a,l);const u=a.seen.get(t);u.ref=s.innerType,i.readOnly=!0},zx=(t,a,i,l)=>{const s=t._zod.def;ot(s.innerType,a,l);const u=a.seen.get(t);u.ref=s.innerType},qd=(t,a,i,l)=>{const s=t._zod.def;ot(s.innerType,a,l);const u=a.seen.get(t);u.ref=s.innerType},T_=(t,a,i,l)=>{const s=t._zod.innerType;ot(s,a,l);const u=a.seen.get(t);u.ref=s},jv={string:Wy,number:e_,boolean:t_,bigint:_x,symbol:bx,null:n_,undefined:Sx,void:Tx,never:a_,any:o_,unknown:i_,date:wx,enum:l_,literal:r_,nan:Ex,template_literal:xx,file:Ax,success:Ox,custom:s_,function:Cx,transform:u_,map:Rx,set:Mx,array:c_,object:d_,union:f_,intersection:p_,tuple:Nx,record:m_,nullable:h_,nonoptional:v_,default:g_,prefault:y_,catch:__,pipe:b_,readonly:S_,promise:zx,optional:qd,lazy:T_};function Ix(t,a){if("_idmap"in t){const l=t,s=As({...a,processors:jv}),u={};for(const m of l._idmap.entries()){const[h,y]=m;ot(y,s)}const d={},p={registry:l,uri:a?.uri,defs:u};s.external=p;for(const m of l._idmap.entries()){const[h,y]=m;Os(s,y),d[h]=Cs(s,y)}if(Object.keys(u).length>0){const m=s.target==="draft-2020-12"?"$defs":"definitions";d.__shared={[m]:u}}return{schemas:d}}const i=As({...a,processors:jv});return ot(t,i),Os(i,t),Cs(i,t)}const kx=G("ZodISODateTime",(t,a)=>{kw.init(t,a),gt.init(t,a)});function Dx(t){return LE(kx,t)}const Ux=G("ZodISODate",(t,a)=>{Dw.init(t,a),gt.init(t,a)});function qx(t){return GE(Ux,t)}const jx=G("ZodISOTime",(t,a)=>{Uw.init(t,a),gt.init(t,a)});function Zx(t){return VE(jx,t)}const $x=G("ZodISODuration",(t,a)=>{qw.init(t,a),gt.init(t,a)});function Bx(t){return YE($x,t)}const Hx=(t,a)=>{Uy.init(t,a),t.name="ZodError",Object.defineProperties(t,{format:{value:i=>A1(t,i)},flatten:{value:i=>x1(t,i)},addIssue:{value:i=>{t.issues.push(i),t.message=JSON.stringify(t.issues,yd,2)}},addIssues:{value:i=>{t.issues.push(...i),t.message=JSON.stringify(t.issues,yd,2)}},isEmpty:{get(){return t.issues.length===0}}})},Bn=G("ZodError",Hx,{Parent:Error}),Lx=kd(Bn),Gx=Dd(Bn),Vx=qs(Bn),w_=js(Bn),Yx=R1(Bn),Jx=M1(Bn),Xx=N1(Bn),Qx=z1(Bn),Kx=I1(Bn),Px=k1(Bn),Fx=D1(Bn),Wx=U1(Bn),lt=G("ZodType",(t,a)=>(it.init(t,a),Object.assign(t["~standard"],{jsonSchema:{input:Rs(t,"input"),output:Rs(t,"output")}}),t.toJSONSchema=gx(t,{}),t.def=a,t.type=a.type,Object.defineProperty(t,"_def",{value:a}),t.check=(...i)=>t.clone(po(a,{checks:[...a.checks??[],...i.map(l=>typeof l=="function"?{_zod:{check:l,def:{check:"custom"},onattach:[]}}:l)]}),{parent:!0}),t.with=t.check,t.clone=(i,l)=>mo(t,i,l),t.brand=()=>t,t.register=((i,l)=>(i.add(t,l),t)),t.parse=(i,l)=>Lx(t,i,l,{callee:t.parse}),t.safeParse=(i,l)=>Vx(t,i,l),t.parseAsync=async(i,l)=>Gx(t,i,l,{callee:t.parseAsync}),t.safeParseAsync=async(i,l)=>w_(t,i,l),t.spa=t.safeParseAsync,t.encode=(i,l)=>Yx(t,i,l),t.decode=(i,l)=>Jx(t,i,l),t.encodeAsync=async(i,l)=>Xx(t,i,l),t.decodeAsync=async(i,l)=>Qx(t,i,l),t.safeEncode=(i,l)=>Kx(t,i,l),t.safeDecode=(i,l)=>Px(t,i,l),t.safeEncodeAsync=async(i,l)=>Fx(t,i,l),t.safeDecodeAsync=async(i,l)=>Wx(t,i,l),t.refine=(i,l)=>t.check(QA(i,l)),t.superRefine=i=>t.check(KA(i)),t.overwrite=i=>t.check(qi(i)),t.optional=()=>Bv(t),t.exactOptional=()=>DA(t),t.nullable=()=>Hv(t),t.nullish=()=>Bv(Hv(t)),t.nonoptional=i=>BA(t,i),t.array=()=>F(t),t.or=i=>Ce([t,i]),t.and=i=>RA(t,i),t.transform=i=>Lv(t,IA(i)),t.default=i=>jA(t,i),t.prefault=i=>$A(t,i),t.catch=i=>LA(t,i),t.pipe=i=>Lv(t,i),t.readonly=()=>YA(t),t.describe=i=>{const l=t.clone();return $l.add(l,{description:i}),l},Object.defineProperty(t,"description",{get(){return $l.get(t)?.description},configurable:!0}),t.meta=(...i)=>{if(i.length===0)return $l.get(t);const l=t.clone();return $l.add(l,i[0]),l},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=i=>i(t),t)),E_=G("_ZodString",(t,a)=>{Ud.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(l,s,u)=>Wy(t,l,s);const i=t._zod.bag;t.format=i.format??null,t.minLength=i.minimum??null,t.maxLength=i.maximum??null,t.regex=(...l)=>t.check(tx(...l)),t.includes=(...l)=>t.check(ox(...l)),t.startsWith=(...l)=>t.check(ix(...l)),t.endsWith=(...l)=>t.check(lx(...l)),t.min=(...l)=>t.check(xs(...l)),t.max=(...l)=>t.check(Py(...l)),t.length=(...l)=>t.check(Fy(...l)),t.nonempty=(...l)=>t.check(xs(1,...l)),t.lowercase=l=>t.check(nx(l)),t.uppercase=l=>t.check(ax(l)),t.trim=()=>t.check(sx()),t.normalize=(...l)=>t.check(rx(...l)),t.toLowerCase=()=>t.check(ux()),t.toUpperCase=()=>t.check(cx()),t.slugify=()=>t.check(dx())}),eA=G("ZodString",(t,a)=>{Ud.init(t,a),E_.init(t,a),t.email=i=>t.check(TE(tA,i)),t.url=i=>t.check(OE(nA,i)),t.jwt=i=>t.check(HE(gA,i)),t.emoji=i=>t.check(CE(aA,i)),t.guid=i=>t.check(kv(Zv,i)),t.uuid=i=>t.check(wE(bs,i)),t.uuidv4=i=>t.check(EE(bs,i)),t.uuidv6=i=>t.check(xE(bs,i)),t.uuidv7=i=>t.check(AE(bs,i)),t.nanoid=i=>t.check(RE(oA,i)),t.guid=i=>t.check(kv(Zv,i)),t.cuid=i=>t.check(ME(iA,i)),t.cuid2=i=>t.check(NE(lA,i)),t.ulid=i=>t.check(zE(rA,i)),t.base64=i=>t.check(ZE(mA,i)),t.base64url=i=>t.check($E(hA,i)),t.xid=i=>t.check(IE(sA,i)),t.ksuid=i=>t.check(kE(uA,i)),t.ipv4=i=>t.check(DE(cA,i)),t.ipv6=i=>t.check(UE(dA,i)),t.cidrv4=i=>t.check(qE(fA,i)),t.cidrv6=i=>t.check(jE(pA,i)),t.e164=i=>t.check(BE(vA,i)),t.datetime=i=>t.check(Dx(i)),t.date=i=>t.check(qx(i)),t.time=i=>t.check(Zx(i)),t.duration=i=>t.check(Bx(i))});function v(t){return SE(eA,t)}const gt=G("ZodStringFormat",(t,a)=>{mt.init(t,a),E_.init(t,a)}),tA=G("ZodEmail",(t,a)=>{xw.init(t,a),gt.init(t,a)}),Zv=G("ZodGUID",(t,a)=>{ww.init(t,a),gt.init(t,a)}),bs=G("ZodUUID",(t,a)=>{Ew.init(t,a),gt.init(t,a)}),nA=G("ZodURL",(t,a)=>{Aw.init(t,a),gt.init(t,a)}),aA=G("ZodEmoji",(t,a)=>{Ow.init(t,a),gt.init(t,a)}),oA=G("ZodNanoID",(t,a)=>{Cw.init(t,a),gt.init(t,a)}),iA=G("ZodCUID",(t,a)=>{Rw.init(t,a),gt.init(t,a)}),lA=G("ZodCUID2",(t,a)=>{Mw.init(t,a),gt.init(t,a)}),rA=G("ZodULID",(t,a)=>{Nw.init(t,a),gt.init(t,a)}),sA=G("ZodXID",(t,a)=>{zw.init(t,a),gt.init(t,a)}),uA=G("ZodKSUID",(t,a)=>{Iw.init(t,a),gt.init(t,a)}),cA=G("ZodIPv4",(t,a)=>{jw.init(t,a),gt.init(t,a)}),dA=G("ZodIPv6",(t,a)=>{Zw.init(t,a),gt.init(t,a)}),fA=G("ZodCIDRv4",(t,a)=>{$w.init(t,a),gt.init(t,a)}),pA=G("ZodCIDRv6",(t,a)=>{Bw.init(t,a),gt.init(t,a)}),mA=G("ZodBase64",(t,a)=>{Hw.init(t,a),gt.init(t,a)}),hA=G("ZodBase64URL",(t,a)=>{Gw.init(t,a),gt.init(t,a)}),vA=G("ZodE164",(t,a)=>{Vw.init(t,a),gt.init(t,a)}),gA=G("ZodJWT",(t,a)=>{Jw.init(t,a),gt.init(t,a)}),jd=G("ZodNumber",(t,a)=>{Yy.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(l,s,u)=>e_(t,l,s),t.gt=(l,s)=>t.check(Uv(l,s)),t.gte=(l,s)=>t.check(id(l,s)),t.min=(l,s)=>t.check(id(l,s)),t.lt=(l,s)=>t.check(Dv(l,s)),t.lte=(l,s)=>t.check(od(l,s)),t.max=(l,s)=>t.check(od(l,s)),t.int=l=>t.check($v(l)),t.safe=l=>t.check($v(l)),t.positive=l=>t.check(Uv(0,l)),t.nonnegative=l=>t.check(id(0,l)),t.negative=l=>t.check(Dv(0,l)),t.nonpositive=l=>t.check(od(0,l)),t.multipleOf=(l,s)=>t.check(qv(l,s)),t.step=(l,s)=>t.check(qv(l,s)),t.finite=()=>t;const i=t._zod.bag;t.minValue=Math.max(i.minimum??Number.NEGATIVE_INFINITY,i.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(i.maximum??Number.POSITIVE_INFINITY,i.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(i.format??"").includes("int")||Number.isSafeInteger(i.multipleOf??.5),t.isFinite=!0,t.format=i.format??null});function D(t){return JE(jd,t)}const yA=G("ZodNumberFormat",(t,a)=>{Xw.init(t,a),jd.init(t,a)});function $v(t){return QE(yA,t)}const _A=G("ZodBoolean",(t,a)=>{Qw.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>t_(t,i,l)});function at(t){return KE(_A,t)}const bA=G("ZodNull",(t,a)=>{Kw.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>n_(t,i,l)});function x_(t){return PE(bA,t)}const SA=G("ZodAny",(t,a)=>{Pw.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>o_()});function Tn(){return FE(SA)}const TA=G("ZodUnknown",(t,a)=>{Fw.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>i_()});function Pn(){return WE(TA)}const wA=G("ZodNever",(t,a)=>{Ww.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>a_(t,i,l)});function EA(t){return ex(wA,t)}const xA=G("ZodArray",(t,a)=>{eE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>c_(t,i,l,s),t.element=a.element,t.min=(i,l)=>t.check(xs(i,l)),t.nonempty=i=>t.check(xs(1,i)),t.max=(i,l)=>t.check(Py(i,l)),t.length=(i,l)=>t.check(Fy(i,l)),t.unwrap=()=>t.element});function F(t,a){return fx(xA,t,a)}const AA=G("ZodObject",(t,a)=>{nE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>d_(t,i,l,s),He(t,"shape",()=>a.shape),t.keyof=()=>Ae(Object.keys(t._zod.def.shape)),t.catchall=i=>t.clone({...t._zod.def,catchall:i}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Pn()}),t.loose=()=>t.clone({...t._zod.def,catchall:Pn()}),t.strict=()=>t.clone({...t._zod.def,catchall:EA()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=i=>b1(t,i),t.safeExtend=i=>S1(t,i),t.merge=i=>T1(t,i),t.pick=i=>y1(t,i),t.omit=i=>_1(t,i),t.partial=(...i)=>w1(O_,t,i[0]),t.required=(...i)=>E1(C_,t,i[0])});function S(t,a){const i={type:"object",shape:t??{},...he(a)};return new AA(i)}const A_=G("ZodUnion",(t,a)=>{Qy.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>f_(t,i,l,s),t.options=a.options});function Ce(t,a){return new A_({type:"union",options:t,...he(a)})}const OA=G("ZodDiscriminatedUnion",(t,a)=>{A_.init(t,a),aE.init(t,a)});function bt(t,a,i){return new OA({type:"union",options:a,discriminator:t,...he(i)})}const CA=G("ZodIntersection",(t,a)=>{oE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>p_(t,i,l,s)});function RA(t,a){return new CA({type:"intersection",left:t,right:a})}const MA=G("ZodRecord",(t,a)=>{iE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>m_(t,i,l,s),t.keyType=a.keyType,t.valueType=a.valueType});function dt(t,a,i){return new MA({type:"record",keyType:t,valueType:a,...he(i)})}const bd=G("ZodEnum",(t,a)=>{lE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(l,s,u)=>l_(t,l,s),t.enum=a.entries,t.options=Object.values(a.entries);const i=new Set(Object.keys(a.entries));t.extract=(l,s)=>{const u={};for(const d of l)if(i.has(d))u[d]=a.entries[d];else throw new Error(`Key ${d} not found in enum`);return new bd({...a,checks:[],...he(s),entries:u})},t.exclude=(l,s)=>{const u={...a.entries};for(const d of l)if(i.has(d))delete u[d];else throw new Error(`Key ${d} not found in enum`);return new bd({...a,checks:[],...he(s),entries:u})}});function Ae(t,a){const i=Array.isArray(t)?Object.fromEntries(t.map(l=>[l,l])):t;return new bd({type:"enum",entries:i,...he(a)})}const NA=G("ZodLiteral",(t,a)=>{rE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>r_(t,i,l),t.values=new Set(a.values),Object.defineProperty(t,"value",{get(){if(a.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return a.values[0]}})});function Z(t,a){return new NA({type:"literal",values:Array.isArray(t)?t:[t],...he(a)})}const zA=G("ZodTransform",(t,a)=>{sE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>u_(t,i),t._zod.parse=(i,l)=>{if(l.direction==="backward")throw new My(t.constructor.name);i.addIssue=u=>{if(typeof u=="string")i.issues.push(Gl(u,i.value,a));else{const d=u;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=i.value),d.inst??(d.inst=t),i.issues.push(Gl(d))}};const s=a.transform(i.value,i);return s instanceof Promise?s.then(u=>(i.value=u,i)):(i.value=s,i)}});function IA(t){return new zA({type:"transform",transform:t})}const O_=G("ZodOptional",(t,a)=>{Ky.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>qd(t,i,l,s),t.unwrap=()=>t._zod.def.innerType});function Bv(t){return new O_({type:"optional",innerType:t})}const kA=G("ZodExactOptional",(t,a)=>{uE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>qd(t,i,l,s),t.unwrap=()=>t._zod.def.innerType});function DA(t){return new kA({type:"optional",innerType:t})}const UA=G("ZodNullable",(t,a)=>{cE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>h_(t,i,l,s),t.unwrap=()=>t._zod.def.innerType});function Hv(t){return new UA({type:"nullable",innerType:t})}const qA=G("ZodDefault",(t,a)=>{dE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>g_(t,i,l,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function jA(t,a){return new qA({type:"default",innerType:t,get defaultValue(){return typeof a=="function"?a():ky(a)}})}const ZA=G("ZodPrefault",(t,a)=>{fE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>y_(t,i,l,s),t.unwrap=()=>t._zod.def.innerType});function $A(t,a){return new ZA({type:"prefault",innerType:t,get defaultValue(){return typeof a=="function"?a():ky(a)}})}const C_=G("ZodNonOptional",(t,a)=>{pE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>v_(t,i,l,s),t.unwrap=()=>t._zod.def.innerType});function BA(t,a){return new C_({type:"nonoptional",innerType:t,...he(a)})}const HA=G("ZodCatch",(t,a)=>{mE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>__(t,i,l,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function LA(t,a){return new HA({type:"catch",innerType:t,catchValue:typeof a=="function"?a:()=>a})}const GA=G("ZodPipe",(t,a)=>{hE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>b_(t,i,l,s),t.in=a.in,t.out=a.out});function Lv(t,a){return new GA({type:"pipe",in:t,out:a})}const VA=G("ZodReadonly",(t,a)=>{vE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>S_(t,i,l,s),t.unwrap=()=>t._zod.def.innerType});function YA(t){return new VA({type:"readonly",innerType:t})}const JA=G("ZodLazy",(t,a)=>{gE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>T_(t,i,l,s),t.unwrap=()=>t._zod.def.getter()});function Zd(t){return new JA({type:"lazy",getter:t})}const $d=G("ZodCustom",(t,a)=>{yE.init(t,a),lt.init(t,a),t._zod.processJSONSchema=(i,l,s)=>s_(t,i)});function XA(t,a){return px($d,t??(()=>!0),a)}function QA(t,a={}){return mx($d,t,a)}function KA(t){return hx(t)}function Ms(t,a={}){const i=new $d({type:"custom",check:"custom",fn:l=>l instanceof t,abort:!0,...he(a)});return i._zod.bag.Class=t,i._zod.check=l=>{l.value instanceof t||l.issues.push({code:"invalid_type",expected:t.name,input:l.value,inst:i,path:[...i._zod.def.path??[]]})},i}function PA(t){return XE(jd,t)}var Vl;(function(t){t.assertEqual=s=>{};function a(s){}t.assertIs=a;function i(s){throw new Error}t.assertNever=i,t.arrayToEnum=s=>{const u={};for(const d of s)u[d]=d;return u},t.getValidEnumValues=s=>{const u=t.objectKeys(s).filter(p=>typeof s[s[p]]!="number"),d={};for(const p of u)d[p]=s[p];return t.objectValues(d)},t.objectValues=s=>t.objectKeys(s).map(function(u){return s[u]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const u=[];for(const d in s)Object.prototype.hasOwnProperty.call(s,d)&&u.push(d);return u},t.find=(s,u)=>{for(const d of s)if(u(d))return d},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function l(s,u=" | "){return s.map(d=>typeof d=="string"?`'${d}'`:d).join(u)}t.joinValues=l,t.jsonStringifyReplacer=(s,u)=>typeof u=="bigint"?u.toString():u})(Vl||(Vl={}));var Gv;(function(t){t.mergeShapes=(a,i)=>({...a,...i})})(Gv||(Gv={}));Vl.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);Vl.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ns extends Error{get errors(){return this.issues}constructor(a){super(),this.issues=[],this.addIssue=l=>{this.issues=[...this.issues,l]},this.addIssues=(l=[])=>{this.issues=[...this.issues,...l]};const i=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,i):this.__proto__=i,this.name="ZodError",this.issues=a}format(a){const i=a||function(u){return u.message},l={_errors:[]},s=u=>{for(const d of u.issues)if(d.code==="invalid_union")d.unionErrors.map(s);else if(d.code==="invalid_return_type")s(d.returnTypeError);else if(d.code==="invalid_arguments")s(d.argumentsError);else if(d.path.length===0)l._errors.push(i(d));else{let p=l,m=0;for(;m<d.path.length;){const h=d.path[m];m===d.path.length-1?(p[h]=p[h]||{_errors:[]},p[h]._errors.push(i(d))):p[h]=p[h]||{_errors:[]},p=p[h],m++}}};return s(this),l}static assert(a){if(!(a instanceof Ns))throw new Error(`Not a ZodError: ${a}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Vl.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(a=i=>i.message){const i=Object.create(null),l=[];for(const s of this.issues)if(s.path.length>0){const u=s.path[0];i[u]=i[u]||[],i[u].push(a(s))}else l.push(a(s));return{formErrors:l,fieldErrors:i}}get formErrors(){return this.flatten()}}Ns.create=t=>new Ns(t);var Vv;(function(t){t.errToObj=a=>typeof a=="string"?{message:a}:a||{},t.toString=a=>typeof a=="string"?a:a?.message})(Vv||(Vv={}));var Ne;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ne||(Ne={}));class Yv extends Error{constructor(a,i){super(a),this.name="ParseError",this.type=i.type,this.field=i.field,this.value=i.value,this.line=i.line}}function ld(t){}function FA(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:a=ld,onError:i=ld,onRetry:l=ld,onComment:s}=t;let u="",d=!0,p,m="",h="";function y(O){const N=d?O.replace(/^\xEF\xBB\xBF/,""):O,[X,K]=WA(`${u}${N}`);for(const x of X)T(x);u=K,d=!1}function T(O){if(O===""){w();return}if(O.startsWith(":")){s&&s(O.slice(O.startsWith(": ")?2:1));return}const N=O.indexOf(":");if(N!==-1){const X=O.slice(0,N),K=O[N+1]===" "?2:1,x=O.slice(N+K);b(X,x,O);return}b(O,"",O)}function b(O,N,X){switch(O){case"event":h=N;break;case"data":m=`${m}${N}
`;break;case"id":p=N.includes("\0")?void 0:N;break;case"retry":/^\d+$/.test(N)?l(parseInt(N,10)):i(new Yv(`Invalid \`retry\` value: "${N}"`,{type:"invalid-retry",value:N,line:X}));break;default:i(new Yv(`Unknown field "${O.length>20?`${O.slice(0,20)}`:O}"`,{type:"unknown-field",field:O,value:N,line:X}));break}}function w(){m.length>0&&a({id:p,event:h||void 0,data:m.endsWith(`
`)?m.slice(0,-1):m}),p=void 0,m="",h=""}function z(O={}){u&&O.consume&&T(u),d=!0,p=void 0,m="",h="",u=""}return{feed:y,reset:z}}function WA(t){const a=[];let i="",l=0;for(;l<t.length;){const s=t.indexOf("\r",l),u=t.indexOf(`
`,l);let d=-1;if(s!==-1&&u!==-1?d=Math.min(s,u):s!==-1?s===t.length-1?d=-1:d=s:u!==-1&&(d=u),d===-1){i=t.slice(l);break}else{const p=t.slice(l,d);a.push(p),l=d+1,t[l-1]==="\r"&&t[l]===`
`&&l++}}return[a,i]}class eO extends TransformStream{constructor({onError:a,onRetry:i,onComment:l}={}){let s;super({start(u){s=FA({onEvent:d=>{u.enqueue(d)},onError(d){a==="terminate"?u.error(d):typeof a=="function"&&a(d)},onRetry:i,onComment:l})},transform(u){s.feed(u)}})}}var R_={};function It(...t){return t.reduce((a,i)=>({...a,...i??{}}),{})}function tO({tools:t=[],providerToolNames:a}){const i={},l={};for(const s of t)if(s.type==="provider"&&s.id in a){const u=a[s.id];i[s.name]=u,l[u]=s.name}return{toProviderToolName:s=>{var u;return(u=i[s])!=null?u:s},toCustomToolName:s=>{var u;return(u=l[s])!=null?u:s}}}async function nO(t,a){if(t==null)return Promise.resolve();const i=a?.abortSignal;return new Promise((l,s)=>{if(i?.aborted){s(Jv());return}const u=setTimeout(()=>{d(),l()},t),d=()=>{clearTimeout(u),i?.removeEventListener("abort",p)},p=()=>{d(),s(Jv())};i?.addEventListener("abort",p)})}function Jv(){return new DOMException("Delay was aborted","AbortError")}var ql=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise?this._promise:(this._promise=new Promise((t,a)=>{this.status.type==="resolved"?t(this.status.value):this.status.type==="rejected"&&a(this.status.error),this._resolve=t,this._reject=a}),this._promise)}resolve(t){var a;this.status={type:"resolved",value:t},this._promise&&((a=this._resolve)==null||a.call(this,t))}reject(t){var a;this.status={type:"rejected",error:t},this._promise&&((a=this._reject)==null||a.call(this,t))}isResolved(){return this.status.type==="resolved"}isRejected(){return this.status.type==="rejected"}isPending(){return this.status.type==="pending"}};function ji(t){return Object.fromEntries([...t.headers])}var{btoa:aO,atob:oO}=globalThis;function Zi(t){const a=t.replace(/-/g,"+").replace(/_/g,"/"),i=oO(a);return Uint8Array.from(i,l=>l.codePointAt(0))}function Yl(t){let a="";for(let i=0;i<t.length;i++)a+=String.fromCodePoint(t[i]);return aO(a)}function lo(t){return t instanceof Uint8Array?Yl(t):t}function iO(t,a={}){const{useArrayBrackets:i=!0}=a,l=new FormData;for(const[s,u]of Object.entries(t))if(u!=null){if(Array.isArray(u)){if(u.length===1){l.append(s,u[0]);continue}const d=i?`${s}[]`:s;for(const p of u)l.append(d,p);continue}l.append(s,u)}return l}var M_="AI_DownloadError",N_=`vercel.ai.error.${M_}`,lO=Symbol.for(N_),Xv,Qv,zi=class extends(Qv=Oe,Xv=lO,Qv){constructor({url:t,statusCode:a,statusText:i,cause:l,message:s=l==null?`Failed to download ${t}: ${a} ${i}`:`Failed to download ${t}: ${l}`}){super({name:M_,message:s,cause:l}),this[Xv]=!0,this.url=t,this.statusCode=a,this.statusText=i}static isInstance(t){return Oe.hasMarker(t,N_)}};async function z_(t){try{const a=await fetch(t);if(!a.ok)throw new zi({url:t,statusCode:a.status,statusText:a.statusText});return await a.blob()}catch(a){throw zi.isInstance(a)?a:new zi({url:t,cause:a})}}var Fl=({prefix:t,size:a=16,alphabet:i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:l="-"}={})=>{const s=()=>{const u=i.length,d=new Array(a);for(let p=0;p<a;p++)d[p]=i[Math.random()*u|0];return d.join("")};if(t==null)return s;if(i.includes(l))throw new my({argument:"separator",message:`The separator "${l}" must not be part of the alphabet "${i}".`});return()=>`${t}${l}${s()}`},Gt=Fl();function I_(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}function $o(t){return(t instanceof Error||t instanceof DOMException)&&(t.name==="AbortError"||t.name==="ResponseAborted"||t.name==="TimeoutError")}var rO=["fetch failed","failed to fetch"];function k_({error:t,url:a,requestBodyValues:i}){if($o(t))return t;if(t instanceof TypeError&&rO.includes(t.message.toLowerCase())){const l=t.cause;if(l!=null)return new jt({message:`Cannot connect to API: ${l.message}`,cause:l,url:a,requestBodyValues:i,isRetryable:!0})}return t}function Bd(t=globalThis){var a,i,l;return t.window?"runtime/browser":(a=t.navigator)!=null&&a.userAgent?`runtime/${t.navigator.userAgent.toLowerCase()}`:(l=(i=t.process)==null?void 0:i.versions)!=null&&l.node?`runtime/node.js/${t.process.version.substring(0)}`:t.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function sO(t){if(t==null)return{};const a={};if(t instanceof Headers)t.forEach((i,l)=>{a[l.toLowerCase()]=i});else{Array.isArray(t)||(t=Object.entries(t));for(const[i,l]of t)l!=null&&(a[i.toLowerCase()]=l)}return a}function $i(t,...a){const i=new Headers(sO(t)),l=i.get("user-agent")||"";return i.set("user-agent",[l,...a].filter(Boolean).join(" ")),Object.fromEntries(i.entries())}var D_="4.0.8",uO=()=>globalThis.fetch,Kv=async({url:t,headers:a={},successfulResponseHandler:i,failedResponseHandler:l,abortSignal:s,fetch:u=uO()})=>{try{const d=await u(t,{method:"GET",headers:$i(a,`ai-sdk/provider-utils/${D_}`,Bd()),signal:s}),p=ji(d);if(!d.ok){let m;try{m=await l({response:d,url:t,requestBodyValues:{}})}catch(h){throw $o(h)||jt.isInstance(h)?h:new jt({message:"Failed to process error response",cause:h,statusCode:d.status,url:t,responseHeaders:p,requestBodyValues:{}})}throw m.value}try{return await i({response:d,url:t,requestBodyValues:{}})}catch(m){throw m instanceof Error&&($o(m)||jt.isInstance(m))?m:new jt({message:"Failed to process successful response",cause:m,statusCode:d.status,url:t,responseHeaders:p,requestBodyValues:{}})}}catch(d){throw k_({error:d,url:t,requestBodyValues:{}})}};function cO(t){return t!=null}function dO({mediaType:t,url:a,supportedUrls:i}){return a=a.toLowerCase(),t=t.toLowerCase(),Object.entries(i).map(([l,s])=>{const u=l.toLowerCase();return u==="*"||u==="*/*"?{mediaTypePrefix:"",regexes:s}:{mediaTypePrefix:u.replace(/\*/,""),regexes:s}}).filter(({mediaTypePrefix:l})=>t.startsWith(l)).flatMap(({regexes:l})=>l).some(l=>l.test(a))}function U_({apiKey:t,environmentVariableName:a,apiKeyParameterName:i="apiKey",description:l}){if(typeof t=="string")return t;if(t!=null)throw new gs({message:`${l} API key must be a string.`});if(typeof process>"u")throw new gs({message:`${l} API key is missing. Pass it using the '${i}' parameter. Environment variables is not supported in this environment.`});if(t=R_[a],t==null)throw new gs({message:`${l} API key is missing. Pass it using the '${i}' parameter or the ${a} environment variable.`});if(typeof t!="string")throw new gs({message:`${l} API key must be a string. The value of the ${a} environment variable is not a string.`});return t}function Bl({settingValue:t,environmentVariableName:a}){if(typeof t=="string")return t;if(!(t!=null||typeof process>"u")&&(t=R_[a],!(t==null||typeof t!="string")))return t}function fO(t){var a;const[i,l=""]=t.toLowerCase().split("/");return(a={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[l])!=null?a:l}var pO=/"__proto__"\s*:/,mO=/"constructor"\s*:/;function Pv(t){const a=JSON.parse(t);return a===null||typeof a!="object"||pO.test(t)===!1&&mO.test(t)===!1?a:hO(a)}function hO(t){let a=[t];for(;a.length;){const i=a;a=[];for(const l of i){if(Object.prototype.hasOwnProperty.call(l,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(l,"constructor")&&Object.prototype.hasOwnProperty.call(l.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const s in l){const u=l[s];u&&typeof u=="object"&&a.push(u)}}}return t}function Hd(t){const{stackTraceLimit:a}=Error;try{Error.stackTraceLimit=0}catch{return Pv(t)}try{return Pv(t)}finally{Error.stackTraceLimit=a}}function Ld(t){if(t.type==="object"||Array.isArray(t.type)&&t.type.includes("object")){t.additionalProperties=!1;const{properties:i}=t;if(i!=null)for(const l of Object.keys(i))i[l]=ko(i[l])}t.items!=null&&(t.items=Array.isArray(t.items)?t.items.map(ko):ko(t.items)),t.anyOf!=null&&(t.anyOf=t.anyOf.map(ko)),t.allOf!=null&&(t.allOf=t.allOf.map(ko)),t.oneOf!=null&&(t.oneOf=t.oneOf.map(ko));const{definitions:a}=t;if(a!=null)for(const i of Object.keys(a))a[i]=ko(a[i]);return t}function ko(t){return typeof t=="boolean"?t:Ld(t)}var vO=Symbol("Let zodToJsonSchema decide on which parser to use"),Fv={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},gO=t=>typeof t=="string"?{...Fv,name:t}:{...Fv,...t};function wn(){return{}}function yO(t,a){var i,l,s;const u={type:"array"};return(i=t.type)!=null&&i._def&&((s=(l=t.type)==null?void 0:l._def)==null?void 0:s.typeName)!==Ne.ZodAny&&(u.items=Qe(t.type._def,{...a,currentPath:[...a.currentPath,"items"]})),t.minLength&&(u.minItems=t.minLength.value),t.maxLength&&(u.maxItems=t.maxLength.value),t.exactLength&&(u.minItems=t.exactLength.value,u.maxItems=t.exactLength.value),u}function _O(t){const a={type:"integer",format:"int64"};if(!t.checks)return a;for(const i of t.checks)switch(i.kind){case"min":i.inclusive?a.minimum=i.value:a.exclusiveMinimum=i.value;break;case"max":i.inclusive?a.maximum=i.value:a.exclusiveMaximum=i.value;break;case"multipleOf":a.multipleOf=i.value;break}return a}function bO(){return{type:"boolean"}}function q_(t,a){return Qe(t.type._def,a)}var SO=(t,a)=>Qe(t.innerType._def,a);function j_(t,a,i){const l=i??a.dateStrategy;if(Array.isArray(l))return{anyOf:l.map((s,u)=>j_(t,a,s))};switch(l){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return TO(t)}}var TO=t=>{const a={type:"integer",format:"unix-time"};for(const i of t.checks)switch(i.kind){case"min":a.minimum=i.value;break;case"max":a.maximum=i.value;break}return a};function wO(t,a){return{...Qe(t.innerType._def,a),default:t.defaultValue()}}function EO(t,a){return a.effectStrategy==="input"?Qe(t.schema._def,a):wn()}function xO(t){return{type:"string",enum:Array.from(t.values)}}var AO=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function OO(t,a){const i=[Qe(t.left._def,{...a,currentPath:[...a.currentPath,"allOf","0"]}),Qe(t.right._def,{...a,currentPath:[...a.currentPath,"allOf","1"]})].filter(s=>!!s),l=[];return i.forEach(s=>{if(AO(s))l.push(...s.allOf);else{let u=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:d,...p}=s;u=p}l.push(u)}}),l.length?{allOf:l}:void 0}function CO(t){const a=typeof t.value;return a!=="bigint"&&a!=="number"&&a!=="boolean"&&a!=="string"?{type:Array.isArray(t.value)?"array":"object"}:{type:a==="bigint"?"integer":a,const:t.value}}var rd=void 0,Xn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(rd===void 0&&(rd=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),rd),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Z_(t,a){const i={type:"string"};if(t.checks)for(const l of t.checks)switch(l.kind){case"min":i.minLength=typeof i.minLength=="number"?Math.max(i.minLength,l.value):l.value;break;case"max":i.maxLength=typeof i.maxLength=="number"?Math.min(i.maxLength,l.value):l.value;break;case"email":switch(a.emailStrategy){case"format:email":Qn(i,"email",l.message,a);break;case"format:idn-email":Qn(i,"idn-email",l.message,a);break;case"pattern:zod":Wt(i,Xn.email,l.message,a);break}break;case"url":Qn(i,"uri",l.message,a);break;case"uuid":Qn(i,"uuid",l.message,a);break;case"regex":Wt(i,l.regex,l.message,a);break;case"cuid":Wt(i,Xn.cuid,l.message,a);break;case"cuid2":Wt(i,Xn.cuid2,l.message,a);break;case"startsWith":Wt(i,RegExp(`^${sd(l.value,a)}`),l.message,a);break;case"endsWith":Wt(i,RegExp(`${sd(l.value,a)}$`),l.message,a);break;case"datetime":Qn(i,"date-time",l.message,a);break;case"date":Qn(i,"date",l.message,a);break;case"time":Qn(i,"time",l.message,a);break;case"duration":Qn(i,"duration",l.message,a);break;case"length":i.minLength=typeof i.minLength=="number"?Math.max(i.minLength,l.value):l.value,i.maxLength=typeof i.maxLength=="number"?Math.min(i.maxLength,l.value):l.value;break;case"includes":{Wt(i,RegExp(sd(l.value,a)),l.message,a);break}case"ip":{l.version!=="v6"&&Qn(i,"ipv4",l.message,a),l.version!=="v4"&&Qn(i,"ipv6",l.message,a);break}case"base64url":Wt(i,Xn.base64url,l.message,a);break;case"jwt":Wt(i,Xn.jwt,l.message,a);break;case"cidr":{l.version!=="v6"&&Wt(i,Xn.ipv4Cidr,l.message,a),l.version!=="v4"&&Wt(i,Xn.ipv6Cidr,l.message,a);break}case"emoji":Wt(i,Xn.emoji(),l.message,a);break;case"ulid":{Wt(i,Xn.ulid,l.message,a);break}case"base64":{switch(a.base64Strategy){case"format:binary":{Qn(i,"binary",l.message,a);break}case"contentEncoding:base64":{i.contentEncoding="base64";break}case"pattern:zod":{Wt(i,Xn.base64,l.message,a);break}}break}case"nanoid":Wt(i,Xn.nanoid,l.message,a)}return i}function sd(t,a){return a.patternStrategy==="escape"?MO(t):t}var RO=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function MO(t){let a="";for(let i=0;i<t.length;i++)RO.has(t[i])||(a+="\\"),a+=t[i];return a}function Qn(t,a,i,l){var s;t.format||(s=t.anyOf)!=null&&s.some(u=>u.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format}),delete t.format),t.anyOf.push({format:a,...i&&l.errorMessages&&{errorMessage:{format:i}}})):t.format=a}function Wt(t,a,i,l){var s;t.pattern||(s=t.allOf)!=null&&s.some(u=>u.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern}),delete t.pattern),t.allOf.push({pattern:Wv(a,l),...i&&l.errorMessages&&{errorMessage:{pattern:i}}})):t.pattern=Wv(a,l)}function Wv(t,a){var i;if(!a.applyRegexFlags||!t.flags)return t.source;const l={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},s=l.i?t.source.toLowerCase():t.source;let u="",d=!1,p=!1,m=!1;for(let h=0;h<s.length;h++){if(d){u+=s[h],d=!1;continue}if(l.i){if(p){if(s[h].match(/[a-z]/)){m?(u+=s[h],u+=`${s[h-2]}-${s[h]}`.toUpperCase(),m=!1):s[h+1]==="-"&&((i=s[h+2])!=null&&i.match(/[a-z]/))?(u+=s[h],m=!0):u+=`${s[h]}${s[h].toUpperCase()}`;continue}}else if(s[h].match(/[a-z]/)){u+=`[${s[h]}${s[h].toUpperCase()}]`;continue}}if(l.m){if(s[h]==="^"){u+=`(^|(?<=[\r
]))`;continue}else if(s[h]==="$"){u+=`($|(?=[\r
]))`;continue}}if(l.s&&s[h]==="."){u+=p?`${s[h]}\r
`:`[${s[h]}\r
]`;continue}u+=s[h],s[h]==="\\"?d=!0:p&&s[h]==="]"?p=!1:!p&&s[h]==="["&&(p=!0)}try{new RegExp(u)}catch{return console.warn(`Could not convert regex pattern at ${a.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return u}function $_(t,a){var i,l,s,u,d,p;const m={type:"object",additionalProperties:(i=Qe(t.valueType._def,{...a,currentPath:[...a.currentPath,"additionalProperties"]}))!=null?i:a.allowedAdditionalProperties};if(((l=t.keyType)==null?void 0:l._def.typeName)===Ne.ZodString&&((s=t.keyType._def.checks)!=null&&s.length)){const{type:h,...y}=Z_(t.keyType._def,a);return{...m,propertyNames:y}}else{if(((u=t.keyType)==null?void 0:u._def.typeName)===Ne.ZodEnum)return{...m,propertyNames:{enum:t.keyType._def.values}};if(((d=t.keyType)==null?void 0:d._def.typeName)===Ne.ZodBranded&&t.keyType._def.type._def.typeName===Ne.ZodString&&((p=t.keyType._def.type._def.checks)!=null&&p.length)){const{type:h,...y}=q_(t.keyType._def,a);return{...m,propertyNames:y}}}return m}function NO(t,a){if(a.mapStrategy==="record")return $_(t,a);const i=Qe(t.keyType._def,{...a,currentPath:[...a.currentPath,"items","items","0"]})||wn(),l=Qe(t.valueType._def,{...a,currentPath:[...a.currentPath,"items","items","1"]})||wn();return{type:"array",maxItems:125,items:{type:"array",items:[i,l],minItems:2,maxItems:2}}}function zO(t){const a=t.values,l=Object.keys(t.values).filter(u=>typeof a[a[u]]!="number").map(u=>a[u]),s=Array.from(new Set(l.map(u=>typeof u)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:l}}function IO(){return{not:wn()}}function kO(){return{type:"null"}}var Sd={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function DO(t,a){const i=t.options instanceof Map?Array.from(t.options.values()):t.options;if(i.every(l=>l._def.typeName in Sd&&(!l._def.checks||!l._def.checks.length))){const l=i.reduce((s,u)=>{const d=Sd[u._def.typeName];return d&&!s.includes(d)?[...s,d]:s},[]);return{type:l.length>1?l:l[0]}}else if(i.every(l=>l._def.typeName==="ZodLiteral"&&!l.description)){const l=i.reduce((s,u)=>{const d=typeof u._def.value;switch(d){case"string":case"number":case"boolean":return[...s,d];case"bigint":return[...s,"integer"];case"object":if(u._def.value===null)return[...s,"null"];default:return s}},[]);if(l.length===i.length){const s=l.filter((u,d,p)=>p.indexOf(u)===d);return{type:s.length>1?s:s[0],enum:i.reduce((u,d)=>u.includes(d._def.value)?u:[...u,d._def.value],[])}}}else if(i.every(l=>l._def.typeName==="ZodEnum"))return{type:"string",enum:i.reduce((l,s)=>[...l,...s._def.values.filter(u=>!l.includes(u))],[])};return UO(t,a)}var UO=(t,a)=>{const i=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((l,s)=>Qe(l._def,{...a,currentPath:[...a.currentPath,"anyOf",`${s}`]})).filter(l=>!!l&&(!a.strictUnions||typeof l=="object"&&Object.keys(l).length>0));return i.length?{anyOf:i}:void 0};function qO(t,a){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return{type:[Sd[t.innerType._def.typeName],"null"]};const i=Qe(t.innerType._def,{...a,currentPath:[...a.currentPath,"anyOf","0"]});return i&&{anyOf:[i,{type:"null"}]}}function jO(t){const a={type:"number"};if(!t.checks)return a;for(const i of t.checks)switch(i.kind){case"int":a.type="integer";break;case"min":i.inclusive?a.minimum=i.value:a.exclusiveMinimum=i.value;break;case"max":i.inclusive?a.maximum=i.value:a.exclusiveMaximum=i.value;break;case"multipleOf":a.multipleOf=i.value;break}return a}function ZO(t,a){const i={type:"object",properties:{}},l=[],s=t.shape();for(const d in s){let p=s[d];if(p===void 0||p._def===void 0)continue;const m=BO(p),h=Qe(p._def,{...a,currentPath:[...a.currentPath,"properties",d],propertyPath:[...a.currentPath,"properties",d]});h!==void 0&&(i.properties[d]=h,m||l.push(d))}l.length&&(i.required=l);const u=$O(t,a);return u!==void 0&&(i.additionalProperties=u),i}function $O(t,a){if(t.catchall._def.typeName!=="ZodNever")return Qe(t.catchall._def,{...a,currentPath:[...a.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return a.allowedAdditionalProperties;case"strict":return a.rejectedAdditionalProperties;case"strip":return a.removeAdditionalStrategy==="strict"?a.allowedAdditionalProperties:a.rejectedAdditionalProperties}}function BO(t){try{return t.isOptional()}catch{return!0}}var HO=(t,a)=>{var i;if(a.currentPath.toString()===((i=a.propertyPath)==null?void 0:i.toString()))return Qe(t.innerType._def,a);const l=Qe(t.innerType._def,{...a,currentPath:[...a.currentPath,"anyOf","1"]});return l?{anyOf:[{not:wn()},l]}:wn()},LO=(t,a)=>{if(a.pipeStrategy==="input")return Qe(t.in._def,a);if(a.pipeStrategy==="output")return Qe(t.out._def,a);const i=Qe(t.in._def,{...a,currentPath:[...a.currentPath,"allOf","0"]}),l=Qe(t.out._def,{...a,currentPath:[...a.currentPath,"allOf",i?"1":"0"]});return{allOf:[i,l].filter(s=>s!==void 0)}};function GO(t,a){return Qe(t.type._def,a)}function VO(t,a){const l={type:"array",uniqueItems:!0,items:Qe(t.valueType._def,{...a,currentPath:[...a.currentPath,"items"]})};return t.minSize&&(l.minItems=t.minSize.value),t.maxSize&&(l.maxItems=t.maxSize.value),l}function YO(t,a){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((i,l)=>Qe(i._def,{...a,currentPath:[...a.currentPath,"items",`${l}`]})).reduce((i,l)=>l===void 0?i:[...i,l],[]),additionalItems:Qe(t.rest._def,{...a,currentPath:[...a.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((i,l)=>Qe(i._def,{...a,currentPath:[...a.currentPath,"items",`${l}`]})).reduce((i,l)=>l===void 0?i:[...i,l],[])}}function JO(){return{not:wn()}}function XO(){return wn()}var QO=(t,a)=>Qe(t.innerType._def,a),KO=(t,a,i)=>{switch(a){case Ne.ZodString:return Z_(t,i);case Ne.ZodNumber:return jO(t);case Ne.ZodObject:return ZO(t,i);case Ne.ZodBigInt:return _O(t);case Ne.ZodBoolean:return bO();case Ne.ZodDate:return j_(t,i);case Ne.ZodUndefined:return JO();case Ne.ZodNull:return kO();case Ne.ZodArray:return yO(t,i);case Ne.ZodUnion:case Ne.ZodDiscriminatedUnion:return DO(t,i);case Ne.ZodIntersection:return OO(t,i);case Ne.ZodTuple:return YO(t,i);case Ne.ZodRecord:return $_(t,i);case Ne.ZodLiteral:return CO(t);case Ne.ZodEnum:return xO(t);case Ne.ZodNativeEnum:return zO(t);case Ne.ZodNullable:return qO(t,i);case Ne.ZodOptional:return HO(t,i);case Ne.ZodMap:return NO(t,i);case Ne.ZodSet:return VO(t,i);case Ne.ZodLazy:return()=>t.getter()._def;case Ne.ZodPromise:return GO(t,i);case Ne.ZodNaN:case Ne.ZodNever:return IO();case Ne.ZodEffects:return EO(t,i);case Ne.ZodAny:return wn();case Ne.ZodUnknown:return XO();case Ne.ZodDefault:return wO(t,i);case Ne.ZodBranded:return q_(t,i);case Ne.ZodReadonly:return QO(t,i);case Ne.ZodCatch:return SO(t,i);case Ne.ZodPipeline:return LO(t,i);case Ne.ZodFunction:case Ne.ZodVoid:case Ne.ZodSymbol:return;default:return(l=>{})()}},PO=(t,a)=>{let i=0;for(;i<t.length&&i<a.length&&t[i]===a[i];i++);return[(t.length-i).toString(),...a.slice(i)].join("/")};function Qe(t,a,i=!1){var l;const s=a.seen.get(t);if(a.override){const m=(l=a.override)==null?void 0:l.call(a,t,a,s,i);if(m!==vO)return m}if(s&&!i){const m=FO(s,a);if(m!==void 0)return m}const u={def:t,path:a.currentPath,jsonSchema:void 0};a.seen.set(t,u);const d=KO(t,t.typeName,a),p=typeof d=="function"?Qe(d(),a):d;if(p&&WO(t,a,p),a.postProcess){const m=a.postProcess(p,t,a);return u.jsonSchema=p,m}return u.jsonSchema=p,p}var FO=(t,a)=>{switch(a.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:PO(a.currentPath,t.path)};case"none":case"seen":return t.path.length<a.currentPath.length&&t.path.every((i,l)=>a.currentPath[l]===i)?(console.warn(`Recursive reference detected at ${a.currentPath.join("/")}! Defaulting to any`),wn()):a.$refStrategy==="seen"?wn():void 0}},WO=(t,a,i)=>(t.description&&(i.description=t.description),i),eC=t=>{const a=gO(t),i=a.name!==void 0?[...a.basePath,a.definitionPath,a.name]:a.basePath;return{...a,currentPath:i,propertyPath:void 0,seen:new Map(Object.entries(a.definitions).map(([l,s])=>[s._def,{def:s._def,path:[...a.basePath,a.definitionPath,l],jsonSchema:void 0}]))}},tC=(t,a)=>{var i;const l=eC(a);let s=typeof a=="object"&&a.definitions?Object.entries(a.definitions).reduce((h,[y,T])=>{var b;return{...h,[y]:(b=Qe(T._def,{...l,currentPath:[...l.basePath,l.definitionPath,y]},!0))!=null?b:wn()}},{}):void 0;const u=typeof a=="string"?a:a?.nameStrategy==="title"?void 0:a?.name,d=(i=Qe(t._def,u===void 0?l:{...l,currentPath:[...l.basePath,l.definitionPath,u]},!1))!=null?i:wn(),p=typeof a=="object"&&a.name!==void 0&&a.nameStrategy==="title"?a.name:void 0;p!==void 0&&(d.title=p);const m=u===void 0?s?{...d,[l.definitionPath]:s}:d:{$ref:[...l.$refStrategy==="relative"?[]:l.basePath,l.definitionPath,u].join("/"),[l.definitionPath]:{...s,[u]:d}};return m.$schema="http://json-schema.org/draft-07/schema#",m},Td=Symbol.for("vercel.ai.schema");function ye(t){let a;return()=>(a==null&&(a=t()),a)}function $s(t,{validate:a}={}){return{[Td]:!0,_type:void 0,get jsonSchema(){return typeof t=="function"&&(t=t()),t},validate:a}}function nC(t){return typeof t=="object"&&t!==null&&Td in t&&t[Td]===!0&&"jsonSchema"in t&&"validate"in t}function Bi(t){return t==null?$s({properties:{},additionalProperties:!1}):nC(t)?t:"~standard"in t?t["~standard"].vendor==="zod"?ve(t):aC(t):t()}function aC(t){return $s(()=>Ld(t["~standard"].jsonSchema.input({target:"draft-07"})),{validate:async a=>{const i=await t["~standard"].validate(a);return"value"in i?{success:!0,value:i.value}:{success:!1,error:new Zo({value:a,cause:i.issues})}}})}function oC(t,a){var i;const l=(i=void 0)!=null?i:!1;return $s(()=>tC(t,{$refStrategy:l?"root":"none"}),{validate:async s=>{const u=await t.safeParseAsync(s);return u.success?{success:!0,value:u.data}:{success:!1,error:u.error}}})}function iC(t,a){var i;const l=(i=void 0)!=null?i:!1;return $s(()=>Ld(Ix(t,{target:"draft-7",io:"input",reused:l?"ref":"inline"})),{validate:async s=>{const u=await w_(t,s);return u.success?{success:!0,value:u.data}:{success:!1,error:u.error}}})}function lC(t){return"_zod"in t}function ve(t,a){return lC(t)?iC(t):oC(t)}async function cn({value:t,schema:a}){const i=await Fn({value:t,schema:a});if(!i.success)throw Zo.wrap({value:t,cause:i.error});return i.value}async function Fn({value:t,schema:a}){const i=Bi(a);try{if(i.validate==null)return{success:!0,value:t,rawValue:t};const l=await i.validate(t);return l.success?{success:!0,value:l.value,rawValue:t}:{success:!1,error:Zo.wrap({value:t,cause:l.error}),rawValue:t}}catch(l){return{success:!1,error:Zo.wrap({value:t,cause:l}),rawValue:t}}}async function rC({text:t,schema:a}){try{const i=Hd(t);return a==null?i:cn({value:i,schema:a})}catch(i){throw ws.isInstance(i)||Zo.isInstance(i)?i:new ws({text:t,cause:i})}}async function Wn({text:t,schema:a}){try{const i=Hd(t);return a==null?{success:!0,value:i,rawValue:i}:await Fn({value:i,schema:a})}catch(i){return{success:!1,error:ws.isInstance(i)?i:new ws({text:t,cause:i}),rawValue:void 0}}}function eg(t){try{return Hd(t),!0}catch{return!1}}function sC({stream:t,schema:a}){return t.pipeThrough(new TextDecoderStream).pipeThrough(new eO).pipeThrough(new TransformStream({async transform({data:i},l){i!=="[DONE]"&&l.enqueue(await Wn({text:i,schema:a}))}}))}async function En({provider:t,providerOptions:a,schema:i}){if(a?.[t]==null)return;const l=await Fn({value:a[t],schema:i});if(!l.success)throw new my({argument:"providerOptions",message:`invalid ${t} provider options`,cause:l.error});return l.value}var uC=()=>globalThis.fetch,Zt=async({url:t,headers:a,body:i,failedResponseHandler:l,successfulResponseHandler:s,abortSignal:u,fetch:d})=>H_({url:t,headers:{"Content-Type":"application/json",...a},body:{content:JSON.stringify(i),values:i},failedResponseHandler:l,successfulResponseHandler:s,abortSignal:u,fetch:d}),B_=async({url:t,headers:a,formData:i,failedResponseHandler:l,successfulResponseHandler:s,abortSignal:u,fetch:d})=>H_({url:t,headers:a,body:{content:i,values:Object.fromEntries(i.entries())},failedResponseHandler:l,successfulResponseHandler:s,abortSignal:u,fetch:d}),H_=async({url:t,headers:a={},body:i,successfulResponseHandler:l,failedResponseHandler:s,abortSignal:u,fetch:d=uC()})=>{try{const p=await d(t,{method:"POST",headers:$i(a,`ai-sdk/provider-utils/${D_}`,Bd()),body:i.content,signal:u}),m=ji(p);if(!p.ok){let h;try{h=await s({response:p,url:t,requestBodyValues:i.values})}catch(y){throw $o(y)||jt.isInstance(y)?y:new jt({message:"Failed to process error response",cause:y,statusCode:p.status,url:t,responseHeaders:m,requestBodyValues:i.values})}throw h.value}try{return await l({response:p,url:t,requestBodyValues:i.values})}catch(h){throw h instanceof Error&&($o(h)||jt.isInstance(h))?h:new jt({message:"Failed to process successful response",cause:h,statusCode:p.status,url:t,responseHeaders:m,requestBodyValues:i.values})}}catch(p){throw k_({error:p,url:t,requestBodyValues:i.values})}};function Hi({id:t,inputSchema:a}){return({execute:i,outputSchema:l,needsApproval:s,toModelOutput:u,onInputStart:d,onInputDelta:p,onInputAvailable:m,...h})=>({type:"provider",id:t,args:h,inputSchema:a,outputSchema:l,execute:i,needsApproval:s,toModelOutput:u,onInputStart:d,onInputDelta:p,onInputAvailable:m})}function ta({id:t,inputSchema:a,outputSchema:i,supportsDeferredResults:l}){return({execute:s,needsApproval:u,toModelOutput:d,onInputStart:p,onInputDelta:m,onInputAvailable:h,...y})=>({type:"provider",id:t,args:y,inputSchema:a,outputSchema:i,execute:s,needsApproval:u,toModelOutput:d,onInputStart:p,onInputDelta:m,onInputAvailable:h,supportsDeferredResults:l})}async function Qt(t){return typeof t=="function"&&(t=t()),Promise.resolve(t)}var co=({errorSchema:t,errorToMessage:a,isRetryable:i})=>async({response:l,url:s,requestBodyValues:u})=>{const d=await l.text(),p=ji(l);if(d.trim()==="")return{responseHeaders:p,value:new jt({message:l.statusText,url:s,requestBodyValues:u,statusCode:l.status,responseHeaders:p,responseBody:d,isRetryable:i?.(l)})};try{const m=await rC({text:d,schema:t});return{responseHeaders:p,value:new jt({message:a(m),url:s,requestBodyValues:u,statusCode:l.status,responseHeaders:p,responseBody:d,data:m,isRetryable:i?.(l,m)})}}catch{return{responseHeaders:p,value:new jt({message:l.statusText,url:s,requestBodyValues:u,statusCode:l.status,responseHeaders:p,responseBody:d,isRetryable:i?.(l)})}}},Wl=t=>async({response:a})=>{const i=ji(a);if(a.body==null)throw new a1({});return{responseHeaders:i,value:sC({stream:a.body,schema:t})}},Kt=t=>async({response:a,url:i,requestBodyValues:l})=>{const s=await a.text(),u=await Wn({text:s,schema:t}),d=ji(a);if(!u.success)throw new jt({message:"Invalid JSON response",cause:u.error,statusCode:a.status,responseHeaders:d,responseBody:s,url:i,requestBodyValues:l});return{responseHeaders:d,value:u.value,rawValue:u.rawValue}},cC=()=>async({response:t,url:a,requestBodyValues:i})=>{const l=ji(t);if(!t.body)throw new jt({message:"Response body is empty",url:a,requestBodyValues:i,statusCode:t.status,responseHeaders:l,responseBody:void 0});try{const s=await t.arrayBuffer();return{responseHeaders:l,value:new Uint8Array(s)}}catch(s){throw new jt({message:"Failed to read response as array buffer",url:a,requestBodyValues:i,statusCode:t.status,responseHeaders:l,responseBody:void 0,cause:s})}};function Gd(t){return t?.replace(/\/$/,"")}function dC(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}async function*fC({execute:t,input:a,options:i}){const l=t(a,i);if(dC(l)){let s;for await(const u of l)s=u,yield{type:"preliminary",output:u};yield{type:"final",output:s}}else yield{type:"final",output:await l}}var ud,tg;function pC(){if(tg)return ud;tg=1;var t=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,s=(y,T)=>{for(var b in T)t(y,b,{get:T[b],enumerable:!0})},u=(y,T,b,w)=>{if(T&&typeof T=="object"||typeof T=="function")for(let z of i(T))!l.call(y,z)&&z!==b&&t(y,z,{get:()=>T[z],enumerable:!(w=a(T,z))||w.enumerable});return y},d=y=>u(t({},"__esModule",{value:!0}),y),p={};s(p,{SYMBOL_FOR_REQ_CONTEXT:()=>m,getContext:()=>h}),ud=d(p);const m=Symbol.for("@vercel/request-context");function h(){return globalThis[m]?.get?.()??{}}return ud}var cd,ng;function mC(){if(ng)return cd;ng=1;var t=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,s=(T,b)=>{for(var w in b)t(T,w,{get:b[w],enumerable:!0})},u=(T,b,w,z)=>{if(b&&typeof b=="object"||typeof b=="function")for(let O of i(b))!l.call(T,O)&&O!==w&&t(T,O,{get:()=>b[O],enumerable:!(z=a(b,O))||z.enumerable});return T},d=T=>u(t({},"__esModule",{value:!0}),T),p={};s(p,{getContext:()=>m.getContext,getVercelOidcToken:()=>h,getVercelOidcTokenSync:()=>y}),cd=d(p);var m=pC();async function h(){return""}function y(){return""}return cd}var L_=mC(),hC="vercel.ai.gateway.error",dd=Symbol.for(hC),ag,og,xn=class G_ extends(og=Error,ag=dd,og){constructor({message:a,statusCode:i=500,cause:l}){super(a),this[ag]=!0,this.statusCode=i,this.cause=l}static isInstance(a){return G_.hasMarker(a)}static hasMarker(a){return typeof a=="object"&&a!==null&&dd in a&&a[dd]===!0}},V_="GatewayAuthenticationError",vC=`vercel.ai.gateway.error.${V_}`,ig=Symbol.for(vC),lg,rg,Vd=class Y_ extends(rg=xn,lg=ig,rg){constructor({message:a="Authentication failed",statusCode:i=401,cause:l}={}){super({message:a,statusCode:i,cause:l}),this[lg]=!0,this.name=V_,this.type="authentication_error"}static isInstance(a){return xn.hasMarker(a)&&ig in a}static createContextualError({apiKeyProvided:a,oidcTokenProvided:i,message:l="Authentication failed",statusCode:s=401,cause:u}){let d;return a?d=`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:i?d=`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`:d=`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`,new Y_({message:d,statusCode:s,cause:u})}},J_="GatewayInvalidRequestError",gC=`vercel.ai.gateway.error.${J_}`,sg=Symbol.for(gC),ug,cg,yC=class extends(cg=xn,ug=sg,cg){constructor({message:t="Invalid request",statusCode:a=400,cause:i}={}){super({message:t,statusCode:a,cause:i}),this[ug]=!0,this.name=J_,this.type="invalid_request_error"}static isInstance(t){return xn.hasMarker(t)&&sg in t}},X_="GatewayRateLimitError",_C=`vercel.ai.gateway.error.${X_}`,dg=Symbol.for(_C),fg,pg,bC=class extends(pg=xn,fg=dg,pg){constructor({message:t="Rate limit exceeded",statusCode:a=429,cause:i}={}){super({message:t,statusCode:a,cause:i}),this[fg]=!0,this.name=X_,this.type="rate_limit_exceeded"}static isInstance(t){return xn.hasMarker(t)&&dg in t}},Q_="GatewayModelNotFoundError",SC=`vercel.ai.gateway.error.${Q_}`,mg=Symbol.for(SC),TC=ye(()=>ve(S({modelId:v()}))),hg,vg,wC=class extends(vg=xn,hg=mg,vg){constructor({message:t="Model not found",statusCode:a=404,modelId:i,cause:l}={}){super({message:t,statusCode:a,cause:l}),this[hg]=!0,this.name=Q_,this.type="model_not_found",this.modelId=i}static isInstance(t){return xn.hasMarker(t)&&mg in t}},K_="GatewayInternalServerError",EC=`vercel.ai.gateway.error.${K_}`,gg=Symbol.for(EC),yg,_g,bg=class extends(_g=xn,yg=gg,_g){constructor({message:t="Internal server error",statusCode:a=500,cause:i}={}){super({message:t,statusCode:a,cause:i}),this[yg]=!0,this.name=K_,this.type="internal_server_error"}static isInstance(t){return xn.hasMarker(t)&&gg in t}},P_="GatewayResponseError",xC=`vercel.ai.gateway.error.${P_}`,Sg=Symbol.for(xC),Tg,wg,AC=class extends(wg=xn,Tg=Sg,wg){constructor({message:t="Invalid response from Gateway",statusCode:a=502,response:i,validationError:l,cause:s}={}){super({message:t,statusCode:a,cause:s}),this[Tg]=!0,this.name=P_,this.type="response_error",this.response=i,this.validationError=l}static isInstance(t){return xn.hasMarker(t)&&Sg in t}};async function Eg({response:t,statusCode:a,defaultMessage:i="Gateway request failed",cause:l,authMethod:s}){const u=await Fn({value:t,schema:OC});if(!u.success)return new AC({message:`Invalid error response format: ${i}`,statusCode:a,response:t,validationError:u.error,cause:l});const d=u.value,p=d.error.type,m=d.error.message;switch(p){case"authentication_error":return Vd.createContextualError({apiKeyProvided:s==="api-key",oidcTokenProvided:s==="oidc",statusCode:a,cause:l});case"invalid_request_error":return new yC({message:m,statusCode:a,cause:l});case"rate_limit_exceeded":return new bC({message:m,statusCode:a,cause:l});case"model_not_found":{const h=await Fn({value:d.error.param,schema:TC});return new wC({message:m,statusCode:a,modelId:h.success?h.value.modelId:void 0,cause:l})}case"internal_server_error":return new bg({message:m,statusCode:a,cause:l});default:return new bg({message:m,statusCode:a,cause:l})}}var OC=ye(()=>ve(S({error:S({message:v(),type:v().nullish(),param:Pn().nullish(),code:Ce([v(),D()]).nullish()})})));function fo(t,a){var i;return xn.isInstance(t)?t:jt.isInstance(t)?Eg({response:CC(t),statusCode:(i=t.statusCode)!=null?i:500,defaultMessage:"Gateway request failed",cause:t,authMethod:a}):Eg({response:{},statusCode:500,defaultMessage:t instanceof Error?`Gateway request failed: ${t.message}`:"Unknown Gateway error",cause:t,authMethod:a})}function CC(t){if(t.data!==void 0)return t.data;if(t.responseBody!=null)try{return JSON.parse(t.responseBody)}catch{return t.responseBody}return{}}var F_="ai-gateway-auth-method";async function Di(t){const a=await Fn({value:t[F_],schema:RC});return a.success?a.value:void 0}var RC=ye(()=>ve(Ce([Z("api-key"),Z("oidc")]))),xg=class{constructor(t){this.config=t}async getAvailableModels(){try{const{value:t}=await Kv({url:`${this.config.baseURL}/config`,headers:await Qt(this.config.headers()),successfulResponseHandler:Kt(MC),failedResponseHandler:co({errorSchema:Tn(),errorToMessage:a=>a}),fetch:this.config.fetch});return t}catch(t){throw await fo(t)}}async getCredits(){try{const t=new URL(this.config.baseURL),{value:a}=await Kv({url:`${t.origin}/v1/credits`,headers:await Qt(this.config.headers()),successfulResponseHandler:Kt(NC),failedResponseHandler:co({errorSchema:Tn(),errorToMessage:i=>i}),fetch:this.config.fetch});return a}catch(t){throw await fo(t)}}},MC=ye(()=>ve(S({models:F(S({id:v(),name:v(),description:v().nullish(),pricing:S({input:v(),output:v(),input_cache_read:v().nullish(),input_cache_write:v().nullish()}).transform(({input:t,output:a,input_cache_read:i,input_cache_write:l})=>({input:t,output:a,...i?{cachedInputTokens:i}:{},...l?{cacheCreationInputTokens:l}:{}})).nullish(),specification:S({specificationVersion:Z("v3"),provider:v(),modelId:v()}),modelType:Ae(["language","embedding","image"]).nullish()}))}))),NC=ye(()=>ve(S({balance:v(),total_used:v()}).transform(({balance:t,total_used:a})=>({balance:t,totalUsed:a})))),zC=class{constructor(t,a){this.modelId=t,this.config=a,this.specificationVersion="v3",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(t){const{abortSignal:a,...i}=t;return{args:this.maybeEncodeFileParts(i),warnings:[]}}async doGenerate(t){const{args:a,warnings:i}=await this.getArgs(t),{abortSignal:l}=t,s=await Qt(this.config.headers());try{const{responseHeaders:u,value:d,rawValue:p}=await Zt({url:this.getUrl(),headers:It(s,t.headers,this.getModelConfigHeaders(this.modelId,!1),await Qt(this.config.o11yHeaders)),body:a,successfulResponseHandler:Kt(Tn()),failedResponseHandler:co({errorSchema:Tn(),errorToMessage:m=>m}),...l&&{abortSignal:l},fetch:this.config.fetch});return{...d,request:{body:a},response:{headers:u,body:p},warnings:i}}catch(u){throw await fo(u,await Di(s))}}async doStream(t){const{args:a,warnings:i}=await this.getArgs(t),{abortSignal:l}=t,s=await Qt(this.config.headers());try{const{value:u,responseHeaders:d}=await Zt({url:this.getUrl(),headers:It(s,t.headers,this.getModelConfigHeaders(this.modelId,!0),await Qt(this.config.o11yHeaders)),body:a,successfulResponseHandler:Wl(Tn()),failedResponseHandler:co({errorSchema:Tn(),errorToMessage:p=>p}),...l&&{abortSignal:l},fetch:this.config.fetch});return{stream:u.pipeThrough(new TransformStream({start(p){i.length>0&&p.enqueue({type:"stream-start",warnings:i})},transform(p,m){if(p.success){const h=p.value;if(h.type==="raw"&&!t.includeRawChunks)return;h.type==="response-metadata"&&h.timestamp&&typeof h.timestamp=="string"&&(h.timestamp=new Date(h.timestamp)),m.enqueue(h)}else m.error(p.error)}})),request:{body:a},response:{headers:d}}}catch(u){throw await fo(u,await Di(s))}}isFilePart(t){return t&&typeof t=="object"&&"type"in t&&t.type==="file"}maybeEncodeFileParts(t){for(const a of t.prompt)for(const i of a.content)if(this.isFilePart(i)){const l=i;if(l.data instanceof Uint8Array){const s=Uint8Array.from(l.data),u=Buffer.from(s).toString("base64");l.data=new URL(`data:${l.mediaType||"application/octet-stream"};base64,${u}`)}}return t}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(t,a){return{"ai-language-model-specification-version":"3","ai-language-model-id":t,"ai-language-model-streaming":String(a)}}},IC=class{constructor(t,a){this.modelId=t,this.config=a,this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:t,headers:a,abortSignal:i,providerOptions:l}){var s;const u=await Qt(this.config.headers());try{const{responseHeaders:d,value:p,rawValue:m}=await Zt({url:this.getUrl(),headers:It(u,a??{},this.getModelConfigHeaders(),await Qt(this.config.o11yHeaders)),body:{values:t,...l?{providerOptions:l}:{}},successfulResponseHandler:Kt(kC),failedResponseHandler:co({errorSchema:Tn(),errorToMessage:h=>h}),...i&&{abortSignal:i},fetch:this.config.fetch});return{embeddings:p.embeddings,usage:(s=p.usage)!=null?s:void 0,providerMetadata:p.providerMetadata,response:{headers:d,body:m},warnings:[]}}catch(d){throw await fo(d,await Di(u))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"3","ai-model-id":this.modelId}}},kC=ye(()=>ve(S({embeddings:F(F(D())),usage:S({tokens:D()}).nullish(),providerMetadata:dt(v(),dt(v(),Pn())).optional()}))),DC=class{constructor(t,a){this.modelId=t,this.config=a,this.specificationVersion="v3",this.maxImagesPerCall=Number.MAX_SAFE_INTEGER}get provider(){return this.config.provider}async doGenerate({prompt:t,n:a,size:i,aspectRatio:l,seed:s,files:u,mask:d,providerOptions:p,headers:m,abortSignal:h}){var y;const T=await Qt(this.config.headers());try{const{responseHeaders:b,value:w,rawValue:z}=await Zt({url:this.getUrl(),headers:It(T,m??{},this.getModelConfigHeaders(),await Qt(this.config.o11yHeaders)),body:{prompt:t,n:a,...i&&{size:i},...l&&{aspectRatio:l},...s&&{seed:s},...p&&{providerOptions:p},...u&&{files:u.map(O=>Ag(O))},...d&&{mask:Ag(d)}},successfulResponseHandler:Kt(qC),failedResponseHandler:co({errorSchema:Tn(),errorToMessage:O=>O}),...h&&{abortSignal:h},fetch:this.config.fetch});return{images:w.images,warnings:(y=w.warnings)!=null?y:[],providerMetadata:w.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:b}}}catch(b){throw fo(b,await Di(T))}}getUrl(){return`${this.config.baseURL}/image-model`}getModelConfigHeaders(){return{"ai-image-model-specification-version":"3","ai-model-id":this.modelId}}};function Ag(t){return t.type==="file"&&t.data instanceof Uint8Array?{...t,data:Yl(t.data)}:t}var UC=S({images:F(Pn()).optional()}).catchall(Pn()),qC=S({images:F(v()),warnings:F(S({type:Z("other"),message:v()})).optional(),providerMetadata:dt(v(),UC).optional()}),jC=ye(()=>ve(S({query:Ce([v(),F(v())]).describe("Search query (string) or multiple queries (array of up to 5 strings). Multi-query searches return combined results from all queries."),max_results:D().optional().describe("Maximum number of search results to return (1-20, default: 10)"),max_tokens_per_page:D().optional().describe("Maximum number of tokens to extract per search result page (256-2048, default: 2048)"),max_tokens:D().optional().describe("Maximum total tokens across all search results (default: 25000, max: 1000000)"),country:v().optional().describe("Two-letter ISO 3166-1 alpha-2 country code for regional search results (e.g., 'US', 'GB', 'FR')"),search_domain_filter:F(v()).optional().describe("List of domains to include or exclude from search results (max 20). To include: ['nature.com', 'science.org']. To exclude: ['-example.com', '-spam.net']"),search_language_filter:F(v()).optional().describe("List of ISO 639-1 language codes to filter results (max 10, lowercase). Examples: ['en', 'fr', 'de']"),search_after_date:v().optional().describe("Include only results published after this date. Format: 'MM/DD/YYYY' (e.g., '3/1/2025'). Cannot be used with search_recency_filter."),search_before_date:v().optional().describe("Include only results published before this date. Format: 'MM/DD/YYYY' (e.g., '3/15/2025'). Cannot be used with search_recency_filter."),last_updated_after_filter:v().optional().describe("Include only results last updated after this date. Format: 'MM/DD/YYYY' (e.g., '3/1/2025'). Cannot be used with search_recency_filter."),last_updated_before_filter:v().optional().describe("Include only results last updated before this date. Format: 'MM/DD/YYYY' (e.g., '3/15/2025'). Cannot be used with search_recency_filter."),search_recency_filter:Ae(["day","week","month","year"]).optional().describe("Filter results by relative time period. Cannot be used with search_after_date or search_before_date.")}))),ZC=ye(()=>ve(Ce([S({results:F(S({title:v(),url:v(),snippet:v(),date:v().optional(),lastUpdated:v().optional()})),id:v()}),S({error:Ae(["api_error","rate_limit","timeout","invalid_input","unknown"]),statusCode:D().optional(),message:v()})]))),$C=ta({id:"gateway.perplexity_search",inputSchema:jC,outputSchema:ZC}),BC=(t={})=>$C(t),HC={perplexitySearch:BC};async function LC(){var t;return(t=L_.getContext().headers)==null?void 0:t["x-vercel-id"]}var GC="3.0.16",VC="0.0.1";function YC(t={}){var a,i;let l=null,s=null;const u=(a=t.metadataCacheRefreshMillis)!=null?a:1e3*60*5;let d=0;const p=(i=Gd(t.baseURL))!=null?i:"https://ai-gateway.vercel.sh/v3/ai",m=async()=>{try{const O=await XC(t);return $i({Authorization:`Bearer ${O.token}`,"ai-gateway-protocol-version":VC,[F_]:O.authMethod,...t.headers},`ai-sdk/gateway/${GC}`)}catch(O){throw Vd.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401,cause:O})}},h=()=>{const O=Bl({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),N=Bl({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),X=Bl({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{const K=await LC();return{...O&&{"ai-o11y-deployment-id":O},...N&&{"ai-o11y-environment":N},...X&&{"ai-o11y-region":X},...K&&{"ai-o11y-request-id":K}}}},y=O=>new zC(O,{provider:"gateway",baseURL:p,headers:m,fetch:t.fetch,o11yHeaders:h()}),T=async()=>{var O,N,X;const K=(X=(N=(O=t._internal)==null?void 0:O.currentDate)==null?void 0:N.call(O).getTime())!=null?X:Date.now();return(!l||K-d>u)&&(d=K,l=new xg({baseURL:p,headers:m,fetch:t.fetch}).getAvailableModels().then(x=>(s=x,x)).catch(async x=>{throw await fo(x,await Di(await m()))})),s?Promise.resolve(s):l},b=async()=>new xg({baseURL:p,headers:m,fetch:t.fetch}).getCredits().catch(async O=>{throw await fo(O,await Di(await m()))}),w=function(O){if(new.target)throw new Error("The Gateway Provider model function cannot be called with the new keyword.");return y(O)};w.specificationVersion="v3",w.getAvailableModels=T,w.getCredits=b,w.imageModel=O=>new DC(O,{provider:"gateway",baseURL:p,headers:m,fetch:t.fetch,o11yHeaders:h()}),w.languageModel=y;const z=O=>new IC(O,{provider:"gateway",baseURL:p,headers:m,fetch:t.fetch,o11yHeaders:h()});return w.embeddingModel=z,w.textEmbeddingModel=z,w.tools=HC,w}var JC=YC();async function XC(t){const a=Bl({settingValue:t.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});return a?{token:a,authMethod:"api-key"}:{token:await L_.getVercelOidcToken(),authMethod:"oidc"}}var QC=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},qo="1.9.0",Og=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function KC(t){var a=new Set([t]),i=new Set,l=t.match(Og);if(!l)return function(){return!1};var s={major:+l[1],minor:+l[2],patch:+l[3],prerelease:l[4]};if(s.prerelease!=null)return function(m){return m===t};function u(p){return i.add(p),!1}function d(p){return a.add(p),!0}return function(m){if(a.has(m))return!0;if(i.has(m))return!1;var h=m.match(Og);if(!h)return u(m);var y={major:+h[1],minor:+h[2],patch:+h[3],prerelease:h[4]};return y.prerelease!=null||s.major!==y.major?u(m):s.major===0?s.minor===y.minor&&s.patch<=y.patch?d(m):u(m):s.minor<=y.minor?d(m):u(m)}}var PC=KC(qo),FC=qo.split(".")[0],Jl=Symbol.for("opentelemetry.js.api."+FC),Xl=QC;function Yd(t,a,i,l){var s;l===void 0&&(l=!1);var u=Xl[Jl]=(s=Xl[Jl])!==null&&s!==void 0?s:{version:qo};if(!l&&u[t]){var d=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return i.error(d.stack||d.message),!1}if(u.version!==qo){var d=new Error("@opentelemetry/api: Registration of version v"+u.version+" for "+t+" does not match previously registered API v"+qo);return i.error(d.stack||d.message),!1}return u[t]=a,i.debug("@opentelemetry/api: Registered a global for "+t+" v"+qo+"."),!0}function Ql(t){var a,i,l=(a=Xl[Jl])===null||a===void 0?void 0:a.version;if(!(!l||!PC(l)))return(i=Xl[Jl])===null||i===void 0?void 0:i[t]}function Jd(t,a){a.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+qo+".");var i=Xl[Jl];i&&delete i[t]}var WC=function(t,a){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var l=i.call(t),s,u=[],d;try{for(;(a===void 0||a-- >0)&&!(s=l.next()).done;)u.push(s.value)}catch(p){d={error:p}}finally{try{s&&!s.done&&(i=l.return)&&i.call(l)}finally{if(d)throw d.error}}return u},e2=function(t,a,i){if(i||arguments.length===2)for(var l=0,s=a.length,u;l<s;l++)(u||!(l in a))&&(u||(u=Array.prototype.slice.call(a,0,l)),u[l]=a[l]);return t.concat(u||Array.prototype.slice.call(a))},t2=(function(){function t(a){this._namespace=a.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return jl("debug",this._namespace,a)},t.prototype.error=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return jl("error",this._namespace,a)},t.prototype.info=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return jl("info",this._namespace,a)},t.prototype.warn=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return jl("warn",this._namespace,a)},t.prototype.verbose=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return jl("verbose",this._namespace,a)},t})();function jl(t,a,i){var l=Ql("diag");if(l)return i.unshift(a),l[t].apply(l,e2([],WC(i),!1))}var bn;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(bn||(bn={}));function n2(t,a){t<bn.NONE?t=bn.NONE:t>bn.ALL&&(t=bn.ALL),a=a||{};function i(l,s){var u=a[l];return typeof u=="function"&&t>=s?u.bind(a):function(){}}return{error:i("error",bn.ERROR),warn:i("warn",bn.WARN),info:i("info",bn.INFO),debug:i("debug",bn.DEBUG),verbose:i("verbose",bn.VERBOSE)}}var a2=function(t,a){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var l=i.call(t),s,u=[],d;try{for(;(a===void 0||a-- >0)&&!(s=l.next()).done;)u.push(s.value)}catch(p){d={error:p}}finally{try{s&&!s.done&&(i=l.return)&&i.call(l)}finally{if(d)throw d.error}}return u},o2=function(t,a,i){if(i||arguments.length===2)for(var l=0,s=a.length,u;l<s;l++)(u||!(l in a))&&(u||(u=Array.prototype.slice.call(a,0,l)),u[l]=a[l]);return t.concat(u||Array.prototype.slice.call(a))},i2="diag",zs=(function(){function t(){function a(s){return function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];var p=Ql("diag");if(p)return p[s].apply(p,o2([],a2(u),!1))}}var i=this,l=function(s,u){var d,p,m;if(u===void 0&&(u={logLevel:bn.INFO}),s===i){var h=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return i.error((d=h.stack)!==null&&d!==void 0?d:h.message),!1}typeof u=="number"&&(u={logLevel:u});var y=Ql("diag"),T=n2((p=u.logLevel)!==null&&p!==void 0?p:bn.INFO,s);if(y&&!u.suppressOverrideMessage){var b=(m=new Error().stack)!==null&&m!==void 0?m:"<failed to generate stacktrace>";y.warn("Current logger will be overwritten from "+b),T.warn("Current logger will overwrite one already registered from "+b)}return Yd("diag",T,i,!0)};i.setLogger=l,i.disable=function(){Jd(i2,i)},i.createComponentLogger=function(s){return new t2(s)},i.verbose=a("verbose"),i.debug=a("debug"),i.info=a("info"),i.warn=a("warn"),i.error=a("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})();function l2(t){return Symbol.for(t)}var r2=(function(){function t(a){var i=this;i._currentContext=a?new Map(a):new Map,i.getValue=function(l){return i._currentContext.get(l)},i.setValue=function(l,s){var u=new t(i._currentContext);return u._currentContext.set(l,s),u},i.deleteValue=function(l){var s=new t(i._currentContext);return s._currentContext.delete(l),s}}return t})(),s2=new r2,u2=function(t,a){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var l=i.call(t),s,u=[],d;try{for(;(a===void 0||a-- >0)&&!(s=l.next()).done;)u.push(s.value)}catch(p){d={error:p}}finally{try{s&&!s.done&&(i=l.return)&&i.call(l)}finally{if(d)throw d.error}}return u},c2=function(t,a,i){if(i||arguments.length===2)for(var l=0,s=a.length,u;l<s;l++)(u||!(l in a))&&(u||(u=Array.prototype.slice.call(a,0,l)),u[l]=a[l]);return t.concat(u||Array.prototype.slice.call(a))},d2=(function(){function t(){}return t.prototype.active=function(){return s2},t.prototype.with=function(a,i,l){for(var s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];return i.call.apply(i,c2([l],u2(s),!1))},t.prototype.bind=function(a,i){return i},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})(),f2=function(t,a){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var l=i.call(t),s,u=[],d;try{for(;(a===void 0||a-- >0)&&!(s=l.next()).done;)u.push(s.value)}catch(p){d={error:p}}finally{try{s&&!s.done&&(i=l.return)&&i.call(l)}finally{if(d)throw d.error}}return u},p2=function(t,a,i){if(i||arguments.length===2)for(var l=0,s=a.length,u;l<s;l++)(u||!(l in a))&&(u||(u=Array.prototype.slice.call(a,0,l)),u[l]=a[l]);return t.concat(u||Array.prototype.slice.call(a))},fd="context",m2=new d2,Xd=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(a){return Yd(fd,a,zs.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(a,i,l){for(var s,u=[],d=3;d<arguments.length;d++)u[d-3]=arguments[d];return(s=this._getContextManager()).with.apply(s,p2([a,i,l],f2(u),!1))},t.prototype.bind=function(a,i){return this._getContextManager().bind(a,i)},t.prototype._getContextManager=function(){return Ql(fd)||m2},t.prototype.disable=function(){this._getContextManager().disable(),Jd(fd,zs.instance())},t})(),wd;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(wd||(wd={}));var W_="0000000000000000",e0="00000000000000000000000000000000",h2={traceId:e0,spanId:W_,traceFlags:wd.NONE},Hl=(function(){function t(a){a===void 0&&(a=h2),this._spanContext=a}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(a,i){return this},t.prototype.setAttributes=function(a){return this},t.prototype.addEvent=function(a,i){return this},t.prototype.addLink=function(a){return this},t.prototype.addLinks=function(a){return this},t.prototype.setStatus=function(a){return this},t.prototype.updateName=function(a){return this},t.prototype.end=function(a){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(a,i){},t})(),Qd=l2("OpenTelemetry Context Key SPAN");function Kd(t){return t.getValue(Qd)||void 0}function v2(){return Kd(Xd.getInstance().active())}function Pd(t,a){return t.setValue(Qd,a)}function g2(t){return t.deleteValue(Qd)}function y2(t,a){return Pd(t,new Hl(a))}function t0(t){var a;return(a=Kd(t))===null||a===void 0?void 0:a.spanContext()}var _2=/^([0-9a-f]{32})$/i,b2=/^[0-9a-f]{16}$/i;function S2(t){return _2.test(t)&&t!==e0}function T2(t){return b2.test(t)&&t!==W_}function n0(t){return S2(t.traceId)&&T2(t.spanId)}function w2(t){return new Hl(t)}var pd=Xd.getInstance(),a0=(function(){function t(){}return t.prototype.startSpan=function(a,i,l){l===void 0&&(l=pd.active());var s=!!i?.root;if(s)return new Hl;var u=l&&t0(l);return E2(u)&&n0(u)?new Hl(u):new Hl},t.prototype.startActiveSpan=function(a,i,l,s){var u,d,p;if(!(arguments.length<2)){arguments.length===2?p=i:arguments.length===3?(u=i,p=l):(u=i,d=l,p=s);var m=d??pd.active(),h=this.startSpan(a,u,m),y=Pd(m,h);return pd.with(y,p,void 0,h)}},t})();function E2(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var x2=new a0,A2=(function(){function t(a,i,l,s){this._provider=a,this.name=i,this.version=l,this.options=s}return t.prototype.startSpan=function(a,i,l){return this._getTracer().startSpan(a,i,l)},t.prototype.startActiveSpan=function(a,i,l,s){var u=this._getTracer();return Reflect.apply(u.startActiveSpan,u,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var a=this._provider.getDelegateTracer(this.name,this.version,this.options);return a?(this._delegate=a,this._delegate):x2},t})(),O2=(function(){function t(){}return t.prototype.getTracer=function(a,i,l){return new a0},t})(),C2=new O2,Cg=(function(){function t(){}return t.prototype.getTracer=function(a,i,l){var s;return(s=this.getDelegateTracer(a,i,l))!==null&&s!==void 0?s:new A2(this,a,i,l)},t.prototype.getDelegate=function(){var a;return(a=this._delegate)!==null&&a!==void 0?a:C2},t.prototype.setDelegate=function(a){this._delegate=a},t.prototype.getDelegateTracer=function(a,i,l){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(a,i,l)},t})(),Is;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(Is||(Is={}));var Rg=Xd.getInstance(),md="trace",R2=(function(){function t(){this._proxyTracerProvider=new Cg,this.wrapSpanContext=w2,this.isSpanContextValid=n0,this.deleteSpan=g2,this.getSpan=Kd,this.getActiveSpan=v2,this.getSpanContext=t0,this.setSpan=Pd,this.setSpanContext=y2}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(a){var i=Yd(md,this._proxyTracerProvider,zs.instance());return i&&this._proxyTracerProvider.setDelegate(a),i},t.prototype.getTracerProvider=function(){return Ql(md)||this._proxyTracerProvider},t.prototype.getTracer=function(a,i){return this.getTracerProvider().getTracer(a,i)},t.prototype.disable=function(){Jd(md,zs.instance()),this._proxyTracerProvider=new Cg},t})(),M2=R2.getInstance(),N2=Object.defineProperty,z2=(t,a)=>{for(var i in a)N2(t,i,{get:a[i],enumerable:!0})},o0="AI_InvalidArgumentError",i0=`vercel.ai.error.${o0}`,I2=Symbol.for(i0),l0,ca=class extends Oe{constructor({parameter:t,value:a,message:i}){super({name:o0,message:`Invalid argument for parameter ${t}: ${i}`}),this[l0]=!0,this.parameter=t,this.value=a}static isInstance(t){return Oe.hasMarker(t,i0)}};l0=I2;var r0="AI_InvalidToolApprovalError",s0=`vercel.ai.error.${r0}`,k2=Symbol.for(s0),u0,D2=class extends Oe{constructor({approvalId:t}){super({name:r0,message:`Tool approval response references unknown approvalId: "${t}". No matching tool-approval-request found in message history.`}),this[u0]=!0,this.approvalId=t}static isInstance(t){return Oe.hasMarker(t,s0)}};u0=k2;var c0="AI_InvalidToolInputError",d0=`vercel.ai.error.${c0}`,U2=Symbol.for(d0),f0,Fd=class extends Oe{constructor({toolInput:t,toolName:a,cause:i,message:l=`Invalid input for tool ${a}: ${jo(i)}`}){super({name:c0,message:l,cause:i}),this[f0]=!0,this.toolInput=t,this.toolName=a}static isInstance(t){return Oe.hasMarker(t,d0)}};f0=U2;var p0="AI_ToolCallNotFoundForApprovalError",m0=`vercel.ai.error.${p0}`,q2=Symbol.for(m0),h0,v0=class extends Oe{constructor({toolCallId:t,approvalId:a}){super({name:p0,message:`Tool call "${t}" not found for approval request "${a}".`}),this[h0]=!0,this.toolCallId=t,this.approvalId=a}static isInstance(t){return Oe.hasMarker(t,m0)}};h0=q2;var g0="AI_NoObjectGeneratedError",y0=`vercel.ai.error.${g0}`,j2=Symbol.for(y0),_0,ro=class extends Oe{constructor({message:t="No object generated.",cause:a,text:i,response:l,usage:s,finishReason:u}){super({name:g0,message:t,cause:a}),this[_0]=!0,this.text=i,this.response=l,this.usage=s,this.finishReason=u}static isInstance(t){return Oe.hasMarker(t,y0)}};_0=j2;var b0="AI_NoOutputGeneratedError",S0=`vercel.ai.error.${b0}`,Z2=Symbol.for(S0),T0,$2=class extends Oe{constructor({message:t="No output generated.",cause:a}={}){super({name:b0,message:t,cause:a}),this[T0]=!0}static isInstance(t){return Oe.hasMarker(t,S0)}};T0=Z2;var w0="AI_NoSuchToolError",E0=`vercel.ai.error.${w0}`,B2=Symbol.for(E0),x0,Ed=class extends Oe{constructor({toolName:t,availableTools:a=void 0,message:i=`Model tried to call unavailable tool '${t}'. ${a===void 0?"No tools are available.":`Available tools: ${a.join(", ")}.`}`}){super({name:w0,message:i}),this[x0]=!0,this.toolName=t,this.availableTools=a}static isInstance(t){return Oe.hasMarker(t,E0)}};x0=B2;var A0="AI_ToolCallRepairError",O0=`vercel.ai.error.${A0}`,H2=Symbol.for(O0),C0,L2=class extends Oe{constructor({cause:t,originalError:a,message:i=`Error repairing tool call: ${jo(t)}`}){super({name:A0,message:i,cause:t}),this[C0]=!0,this.originalError=a}static isInstance(t){return Oe.hasMarker(t,O0)}};C0=H2;var G2=class extends Oe{constructor(t){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${t.version} for provider "${t.provider}" and model "${t.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=t.version,this.provider=t.provider,this.modelId=t.modelId}},R0="AI_UIMessageStreamError",M0=`vercel.ai.error.${R0}`,V2=Symbol.for(M0),N0,Oi=class extends Oe{constructor({chunkType:t,chunkId:a,message:i}){super({name:R0,message:i}),this[N0]=!0,this.chunkType=t,this.chunkId=a}static isInstance(t){return Oe.hasMarker(t,M0)}};N0=V2;var z0="AI_InvalidMessageRoleError",I0=`vercel.ai.error.${z0}`,Y2=Symbol.for(I0),k0,J2=class extends Oe{constructor({role:t,message:a=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:z0,message:a}),this[k0]=!0,this.role=t}static isInstance(t){return Oe.hasMarker(t,I0)}};k0=Y2;var D0="AI_RetryError",U0=`vercel.ai.error.${D0}`,X2=Symbol.for(U0),q0,Mg=class extends Oe{constructor({message:t,reason:a,errors:i}){super({name:D0,message:t}),this[q0]=!0,this.reason=a,this.errors=i,this.lastError=i[i.length-1]}static isInstance(t){return Oe.hasMarker(t,U0)}};q0=X2;function Q2({warning:t,provider:a,model:i}){const l=`AI SDK Warning (${a} / ${i}):`;switch(t.type){case"unsupported":{let s=`${l} The feature "${t.feature}" is not supported.`;return t.details&&(s+=` ${t.details}`),s}case"compatibility":{let s=`${l} The feature "${t.feature}" is used in a compatibility mode.`;return t.details&&(s+=` ${t.details}`),s}case"other":return`${l} ${t.message}`;default:return`${l} ${JSON.stringify(t,null,2)}`}}var K2="AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.",Ng=!1,j0=t=>{if(t.warnings.length===0)return;const a=globalThis.AI_SDK_LOG_WARNINGS;if(a!==!1){if(typeof a=="function"){a(t);return}Ng||(Ng=!0,console.info(K2));for(const i of t.warnings)console.warn(Q2({warning:i,provider:t.provider,model:t.model}))}};function P2({provider:t,modelId:a}){j0({warnings:[{type:"compatibility",feature:"specificationVersion",details:"Using v2 specification compatibility mode. Some features may not be available."}],provider:t,model:a})}function F2(t){return t.specificationVersion==="v3"?t:(P2({provider:t.provider,modelId:t.modelId}),new Proxy(t,{get(a,i){switch(i){case"specificationVersion":return"v3";case"doGenerate":return async(...l)=>{const s=await a.doGenerate(...l);return{...s,finishReason:Z0(s.finishReason),usage:$0(s.usage)}};case"doStream":return async(...l)=>{const s=await a.doStream(...l);return{...s,stream:W2(s.stream)}};default:return a[i]}}}))}function W2(t){return t.pipeThrough(new TransformStream({transform(a,i){a.type==="finish"?i.enqueue({...a,finishReason:Z0(a.finishReason),usage:$0(a.usage)}):i.enqueue(a)}}))}function Z0(t){return{unified:t==="unknown"?"other":t,raw:void 0}}function $0(t){return{inputTokens:{total:t.inputTokens,noCache:void 0,cacheRead:t.cachedInputTokens,cacheWrite:void 0},outputTokens:{total:t.outputTokens,text:void 0,reasoning:t.reasoningTokens}}}function B0(t){if(typeof t!="string"){if(t.specificationVersion!=="v3"&&t.specificationVersion!=="v2"){const a=t;throw new G2({version:a.specificationVersion,provider:a.provider,modelId:a.modelId})}return F2(t)}return eR().languageModel(t)}function eR(){var t;return(t=globalThis.AI_SDK_DEFAULT_PROVIDER)!=null?t:JC}function H0(t){if(t!=null)return typeof t=="number"?t:t.totalMs}function tR(t){if(!(t==null||typeof t=="number"))return t.stepMs}function nR(t){if(!(t==null||typeof t=="number"))return t.chunkMs}var aR=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],oR=t=>{const a=typeof t=="string"?Zi(t):t,i=(a[6]&127)<<21|(a[7]&127)<<14|(a[8]&127)<<7|a[9]&127;return a.slice(i+10)};function iR(t){return typeof t=="string"&&t.startsWith("SUQz")||typeof t!="string"&&t.length>10&&t[0]===73&&t[1]===68&&t[2]===51?oR(t):t}function lR({data:t,signatures:a}){const i=iR(t),l=typeof i=="string"?Zi(i.substring(0,Math.min(i.length,24))):i;for(const s of a)if(l.length>=s.bytesPrefix.length&&s.bytesPrefix.every((u,d)=>u===null||l[d]===u))return s.mediaType}var rR="6.0.39",sR=async({url:t})=>{var a;const i=t.toString();try{const l=await fetch(i,{headers:$i({},`ai-sdk/${rR}`,Bd())});if(!l.ok)throw new zi({url:i,statusCode:l.status,statusText:l.statusText});return{data:new Uint8Array(await l.arrayBuffer()),mediaType:(a=l.headers.get("content-type"))!=null?a:void 0}}catch(l){throw zi.isInstance(l)?l:new zi({url:i,cause:l})}},uR=(t=sR)=>a=>Promise.all(a.map(async i=>i.isUrlSupportedByModel?null:t(i)));function cR(t){try{const[a,i]=t.split(",");return{mediaType:a.split(";")[0].split(":")[1],base64Content:i}}catch{return{mediaType:void 0,base64Content:void 0}}}var L0=Ce([v(),Ms(Uint8Array),Ms(ArrayBuffer),XA(t=>{var a,i;return(i=(a=globalThis.Buffer)==null?void 0:a.isBuffer(t))!=null?i:!1},{message:"Must be a Buffer"})]);function G0(t){if(t instanceof Uint8Array)return{data:t,mediaType:void 0};if(t instanceof ArrayBuffer)return{data:new Uint8Array(t),mediaType:void 0};if(typeof t=="string")try{t=new URL(t)}catch{}if(t instanceof URL&&t.protocol==="data:"){const{mediaType:a,base64Content:i}=cR(t.toString());if(a==null||i==null)throw new Oe({name:"InvalidDataContentError",message:`Invalid data URL format in content ${t.toString()}`});return{data:i,mediaType:a}}return{data:t,mediaType:void 0}}function dR(t){return typeof t=="string"?t:t instanceof ArrayBuffer?Yl(new Uint8Array(t)):Yl(t)}function ks(t){return t===void 0?[]:Array.isArray(t)?t:[t]}async function fR({prompt:t,supportedUrls:a,download:i=uR()}){const l=await mR(t.messages,i,a),s=[...t.system!=null?typeof t.system=="string"?[{role:"system",content:t.system}]:ks(t.system).map(d=>({role:"system",content:d.content,providerOptions:d.providerOptions})):[],...t.messages.map(d=>pR({message:d,downloadedAssets:l}))],u=[];for(const d of s){if(d.role!=="tool"){u.push(d);continue}const p=u.at(-1);p?.role==="tool"?p.content.push(...d.content):u.push(d)}return u}function pR({message:t,downloadedAssets:a}){const i=t.role;switch(i){case"system":return{role:"system",content:t.content,providerOptions:t.providerOptions};case"user":return typeof t.content=="string"?{role:"user",content:[{type:"text",text:t.content}],providerOptions:t.providerOptions}:{role:"user",content:t.content.map(l=>hR(l,a)).filter(l=>l.type!=="text"||l.text!==""),providerOptions:t.providerOptions};case"assistant":return typeof t.content=="string"?{role:"assistant",content:[{type:"text",text:t.content}],providerOptions:t.providerOptions}:{role:"assistant",content:t.content.filter(l=>l.type!=="text"||l.text!==""||l.providerOptions!=null).filter(l=>l.type!=="tool-approval-request").map(l=>{const s=l.providerOptions;switch(l.type){case"file":{const{data:u,mediaType:d}=G0(l.data);return{type:"file",data:u,filename:l.filename,mediaType:d??l.mediaType,providerOptions:s}}case"reasoning":return{type:"reasoning",text:l.text,providerOptions:s};case"text":return{type:"text",text:l.text,providerOptions:s};case"tool-call":return{type:"tool-call",toolCallId:l.toolCallId,toolName:l.toolName,input:l.input,providerExecuted:l.providerExecuted,providerOptions:s};case"tool-result":return{type:"tool-result",toolCallId:l.toolCallId,toolName:l.toolName,output:zg(l.output),providerOptions:s}}}),providerOptions:t.providerOptions};case"tool":return{role:"tool",content:t.content.filter(l=>l.type!=="tool-approval-response"||l.providerExecuted).map(l=>{switch(l.type){case"tool-result":return{type:"tool-result",toolCallId:l.toolCallId,toolName:l.toolName,output:zg(l.output),providerOptions:l.providerOptions};case"tool-approval-response":return{type:"tool-approval-response",approvalId:l.approvalId,approved:l.approved,reason:l.reason}}}),providerOptions:t.providerOptions};default:{const l=i;throw new J2({role:l})}}}async function mR(t,a,i){const l=t.filter(u=>u.role==="user").map(u=>u.content).filter(u=>Array.isArray(u)).flat().filter(u=>u.type==="image"||u.type==="file").map(u=>{var d;const p=(d=u.mediaType)!=null?d:u.type==="image"?"image/*":void 0;let m=u.type==="image"?u.image:u.data;if(typeof m=="string")try{m=new URL(m)}catch{}return{mediaType:p,data:m}}).filter(u=>u.data instanceof URL).map(u=>({url:u.data,isUrlSupportedByModel:u.mediaType!=null&&dO({url:u.data.toString(),mediaType:u.mediaType,supportedUrls:i})})),s=await a(l);return Object.fromEntries(s.map((u,d)=>u==null?null:[l[d].url.toString(),{data:u.data,mediaType:u.mediaType}]).filter(u=>u!=null))}function hR(t,a){var i;if(t.type==="text")return{type:"text",text:t.text,providerOptions:t.providerOptions};let l;const s=t.type;switch(s){case"image":l=t.image;break;case"file":l=t.data;break;default:throw new Error(`Unsupported part type: ${s}`)}const{data:u,mediaType:d}=G0(l);let p=d??t.mediaType,m=u;if(m instanceof URL){const h=a[m.toString()];h&&(m=h.data,p??(p=h.mediaType))}switch(s){case"image":return(m instanceof Uint8Array||typeof m=="string")&&(p=(i=lR({data:m,signatures:aR}))!=null?i:p),{type:"file",mediaType:p??"image/*",filename:void 0,data:m,providerOptions:t.providerOptions};case"file":{if(p==null)throw new Error("Media type is missing for file part");return{type:"file",mediaType:p,filename:t.filename,data:m,providerOptions:t.providerOptions}}}}function zg(t){return t.type!=="content"?t:{type:"content",value:t.value.map(a=>a.type!=="media"?a:a.mediaType.startsWith("image/")?{type:"image-data",data:a.data,mediaType:a.mediaType}:{type:"file-data",data:a.data,mediaType:a.mediaType})}}async function Ts({toolCallId:t,input:a,output:i,tool:l,errorMode:s}){return s==="text"?{type:"error-text",value:jo(i)}:s==="json"?{type:"error-json",value:Ig(i)}:l?.toModelOutput?await l.toModelOutput({toolCallId:t,input:a,output:i}):typeof i=="string"?{type:"text",value:i}:{type:"json",value:Ig(i)}}function Ig(t){return t===void 0?null:t}function vR({maxOutputTokens:t,temperature:a,topP:i,topK:l,presencePenalty:s,frequencyPenalty:u,seed:d,stopSequences:p}){if(t!=null){if(!Number.isInteger(t))throw new ca({parameter:"maxOutputTokens",value:t,message:"maxOutputTokens must be an integer"});if(t<1)throw new ca({parameter:"maxOutputTokens",value:t,message:"maxOutputTokens must be >= 1"})}if(a!=null&&typeof a!="number")throw new ca({parameter:"temperature",value:a,message:"temperature must be a number"});if(i!=null&&typeof i!="number")throw new ca({parameter:"topP",value:i,message:"topP must be a number"});if(l!=null&&typeof l!="number")throw new ca({parameter:"topK",value:l,message:"topK must be a number"});if(s!=null&&typeof s!="number")throw new ca({parameter:"presencePenalty",value:s,message:"presencePenalty must be a number"});if(u!=null&&typeof u!="number")throw new ca({parameter:"frequencyPenalty",value:u,message:"frequencyPenalty must be a number"});if(d!=null&&!Number.isInteger(d))throw new ca({parameter:"seed",value:d,message:"seed must be an integer"});return{maxOutputTokens:t,temperature:a,topP:i,topK:l,presencePenalty:s,frequencyPenalty:u,stopSequences:p,seed:d}}function gR(t){return t!=null&&Object.keys(t).length>0}async function yR({tools:t,toolChoice:a,activeTools:i}){if(!gR(t))return{tools:void 0,toolChoice:void 0};const l=i!=null?Object.entries(t).filter(([u])=>i.includes(u)):Object.entries(t),s=[];for(const[u,d]of l){const p=d.type;switch(p){case void 0:case"dynamic":case"function":s.push({type:"function",name:u,description:d.description,inputSchema:await Bi(d.inputSchema).jsonSchema,...d.inputExamples!=null?{inputExamples:d.inputExamples}:{},providerOptions:d.providerOptions,...d.strict!=null?{strict:d.strict}:{}});break;case"provider":s.push({type:"provider",name:u,id:d.id,args:d.args});break;default:{const m=p;throw new Error(`Unsupported tool type: ${m}`)}}}return{tools:s,toolChoice:a==null?{type:"auto"}:typeof a=="string"?{type:a}:{type:"tool",toolName:a.toolName}}}var Kl=Zd(()=>Ce([x_(),v(),D(),at(),dt(v(),Kl.optional()),F(Kl)])),vt=dt(v(),dt(v(),Kl.optional())),V0=S({type:Z("text"),text:v(),providerOptions:vt.optional()}),_R=S({type:Z("image"),image:Ce([L0,Ms(URL)]),mediaType:v().optional(),providerOptions:vt.optional()}),Y0=S({type:Z("file"),data:Ce([L0,Ms(URL)]),filename:v().optional(),mediaType:v(),providerOptions:vt.optional()}),bR=S({type:Z("reasoning"),text:v(),providerOptions:vt.optional()}),SR=S({type:Z("tool-call"),toolCallId:v(),toolName:v(),input:Pn(),providerOptions:vt.optional(),providerExecuted:at().optional()}),TR=bt("type",[S({type:Z("text"),value:v(),providerOptions:vt.optional()}),S({type:Z("json"),value:Kl,providerOptions:vt.optional()}),S({type:Z("execution-denied"),reason:v().optional(),providerOptions:vt.optional()}),S({type:Z("error-text"),value:v(),providerOptions:vt.optional()}),S({type:Z("error-json"),value:Kl,providerOptions:vt.optional()}),S({type:Z("content"),value:F(Ce([S({type:Z("text"),text:v(),providerOptions:vt.optional()}),S({type:Z("media"),data:v(),mediaType:v()}),S({type:Z("file-data"),data:v(),mediaType:v(),filename:v().optional(),providerOptions:vt.optional()}),S({type:Z("file-url"),url:v(),providerOptions:vt.optional()}),S({type:Z("file-id"),fileId:Ce([v(),dt(v(),v())]),providerOptions:vt.optional()}),S({type:Z("image-data"),data:v(),mediaType:v(),providerOptions:vt.optional()}),S({type:Z("image-url"),url:v(),providerOptions:vt.optional()}),S({type:Z("image-file-id"),fileId:Ce([v(),dt(v(),v())]),providerOptions:vt.optional()}),S({type:Z("custom"),providerOptions:vt.optional()})]))})]),J0=S({type:Z("tool-result"),toolCallId:v(),toolName:v(),output:TR,providerOptions:vt.optional()}),wR=S({type:Z("tool-approval-request"),approvalId:v(),toolCallId:v()}),ER=S({type:Z("tool-approval-response"),approvalId:v(),approved:at(),reason:v().optional()}),xR=S({role:Z("system"),content:v(),providerOptions:vt.optional()}),AR=S({role:Z("user"),content:Ce([v(),F(Ce([V0,_R,Y0]))]),providerOptions:vt.optional()}),OR=S({role:Z("assistant"),content:Ce([v(),F(Ce([V0,Y0,bR,SR,J0,wR]))]),providerOptions:vt.optional()}),CR=S({role:Z("tool"),content:F(Ce([J0,ER])),providerOptions:vt.optional()}),RR=Ce([xR,AR,OR,CR]);async function MR(t){if(t.prompt==null&&t.messages==null)throw new Uo({prompt:t,message:"prompt or messages must be defined"});if(t.prompt!=null&&t.messages!=null)throw new Uo({prompt:t,message:"prompt and messages cannot be defined at the same time"});if(t.system!=null&&typeof t.system!="string"&&!ks(t.system).every(l=>typeof l=="object"&&l!==null&&"role"in l&&l.role==="system"))throw new Uo({prompt:t,message:"system must be a string, SystemModelMessage, or array of SystemModelMessage"});let a;if(t.prompt!=null&&typeof t.prompt=="string")a=[{role:"user",content:t.prompt}];else if(t.prompt!=null&&Array.isArray(t.prompt))a=t.prompt;else if(t.messages!=null)a=t.messages;else throw new Uo({prompt:t,message:"prompt or messages must be defined"});if(a.length===0)throw new Uo({prompt:t,message:"messages must not be empty"});const i=await Fn({value:a,schema:F(RR)});if(!i.success)throw new Uo({prompt:t,message:"The messages do not match the ModelMessage[] schema.",cause:i.error});return{messages:a,system:t.system}}function NR(t){if(!Vd.isInstance(t))return t;const a=(process==null?void 0:"production")==="production",i="https://ai-sdk.dev/unauthenticated-ai-gateway";return a?new Oe({name:"GatewayError",message:`Unauthenticated. Configure AI_GATEWAY_API_KEY or use a provider module. Learn more: ${i}`}):Object.assign(new Error(`\x1B[1m\x1B[31mUnauthenticated request to AI Gateway.\x1B[0m

To authenticate, set the \x1B[33mAI_GATEWAY_API_KEY\x1B[0m environment variable with your API key.

Alternatively, you can use a provider module instead of the AI Gateway.

Learn more: \x1B[34m${i}\x1B[0m

`),{name:"GatewayAuthenticationError"})}function xd({operationId:t,telemetry:a}){return{"operation.name":`${t}${a?.functionId!=null?` ${a.functionId}`:""}`,"resource.name":a?.functionId,"ai.operationId":t,"ai.telemetry.functionId":a?.functionId}}function zR({model:t,settings:a,telemetry:i,headers:l}){var s;return{"ai.model.provider":t.provider,"ai.model.id":t.modelId,...Object.entries(a).reduce((u,[d,p])=>{if(d==="timeout"){const m=H0(p);m!=null&&(u[`ai.settings.${d}`]=m)}else u[`ai.settings.${d}`]=p;return u},{}),...Object.entries((s=i?.metadata)!=null?s:{}).reduce((u,[d,p])=>(u[`ai.telemetry.metadata.${d}`]=p,u),{}),...Object.entries(l??{}).reduce((u,[d,p])=>(p!==void 0&&(u[`ai.request.headers.${d}`]=p),u),{})}}var IR={startSpan(){return Ss},startActiveSpan(t,a,i,l){if(typeof a=="function")return a(Ss);if(typeof i=="function")return i(Ss);if(typeof l=="function")return l(Ss)}},Ss={spanContext(){return kR},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},kR={traceId:"",spanId:"",traceFlags:0};function DR({isEnabled:t=!1,tracer:a}={}){return t?a||M2.getTracer("ai"):IR}async function Ad({name:t,tracer:a,attributes:i,fn:l,endWhenDone:s=!0}){return a.startActiveSpan(t,{attributes:await i},async u=>{const d=Rg.active();try{const p=await Rg.with(d,()=>l(u));return s&&u.end(),p}catch(p){try{X0(u,p)}finally{u.end()}throw p}})}function X0(t,a){a instanceof Error?(t.recordException({name:a.name,message:a.message,stack:a.stack}),t.setStatus({code:Is.ERROR,message:a.message})):t.setStatus({code:Is.ERROR})}async function Mi({telemetry:t,attributes:a}){if(t?.isEnabled!==!0)return{};const i={};for(const[l,s]of Object.entries(a))if(s!=null){if(typeof s=="object"&&"input"in s&&typeof s.input=="function"){if(t?.recordInputs===!1)continue;const u=await s.input();u!=null&&(i[l]=u);continue}if(typeof s=="object"&&"output"in s&&typeof s.output=="function"){if(t?.recordOutputs===!1)continue;const u=await s.output();u!=null&&(i[l]=u);continue}i[l]=s}return i}function UR(t){return JSON.stringify(t.map(a=>({...a,content:typeof a.content=="string"?a.content:a.content.map(i=>i.type==="file"?{...i,data:i.data instanceof Uint8Array?dR(i.data):i.data}:i)})))}function qR(t){return{inputTokens:t.inputTokens.total,inputTokenDetails:{noCacheTokens:t.inputTokens.noCache,cacheReadTokens:t.inputTokens.cacheRead,cacheWriteTokens:t.inputTokens.cacheWrite},outputTokens:t.outputTokens.total,outputTokenDetails:{textTokens:t.outputTokens.text,reasoningTokens:t.outputTokens.reasoning},totalTokens:Kn(t.inputTokens.total,t.outputTokens.total),raw:t.raw,reasoningTokens:t.outputTokens.reasoning,cachedInputTokens:t.inputTokens.cacheRead}}function hd(){return{inputTokens:void 0,inputTokenDetails:{noCacheTokens:void 0,cacheReadTokens:void 0,cacheWriteTokens:void 0},outputTokens:void 0,outputTokenDetails:{textTokens:void 0,reasoningTokens:void 0},totalTokens:void 0,raw:void 0}}function jR(t,a){var i,l,s,u,d,p,m,h,y,T;return{inputTokens:Kn(t.inputTokens,a.inputTokens),inputTokenDetails:{noCacheTokens:Kn((i=t.inputTokenDetails)==null?void 0:i.noCacheTokens,(l=a.inputTokenDetails)==null?void 0:l.noCacheTokens),cacheReadTokens:Kn((s=t.inputTokenDetails)==null?void 0:s.cacheReadTokens,(u=a.inputTokenDetails)==null?void 0:u.cacheReadTokens),cacheWriteTokens:Kn((d=t.inputTokenDetails)==null?void 0:d.cacheWriteTokens,(p=a.inputTokenDetails)==null?void 0:p.cacheWriteTokens)},outputTokens:Kn(t.outputTokens,a.outputTokens),outputTokenDetails:{textTokens:Kn((m=t.outputTokenDetails)==null?void 0:m.textTokens,(h=a.outputTokenDetails)==null?void 0:h.textTokens),reasoningTokens:Kn((y=t.outputTokenDetails)==null?void 0:y.reasoningTokens,(T=a.outputTokenDetails)==null?void 0:T.reasoningTokens)},totalTokens:Kn(t.totalTokens,a.totalTokens),reasoningTokens:Kn(t.reasoningTokens,a.reasoningTokens),cachedInputTokens:Kn(t.cachedInputTokens,a.cachedInputTokens)}}function Kn(t,a){return t==null&&a==null?void 0:(t??0)+(a??0)}function Wd(t,a){if(t===void 0&&a===void 0)return;if(t===void 0)return a;if(a===void 0)return t;const i={...t};for(const l in a)if(Object.prototype.hasOwnProperty.call(a,l)){const s=a[l];if(s===void 0)continue;const u=l in t?t[l]:void 0,d=s!==null&&typeof s=="object"&&!Array.isArray(s)&&!(s instanceof Date)&&!(s instanceof RegExp),p=u!=null&&typeof u=="object"&&!Array.isArray(u)&&!(u instanceof Date)&&!(u instanceof RegExp);d&&p?i[l]=Wd(u,s):i[l]=s}return i}function ZR({error:t,exponentialBackoffDelay:a}){const i=t.responseHeaders;if(!i)return a;let l;const s=i["retry-after-ms"];if(s){const d=parseFloat(s);Number.isNaN(d)||(l=d)}const u=i["retry-after"];if(u&&l===void 0){const d=parseFloat(u);Number.isNaN(d)?l=Date.parse(u)-Date.now():l=d*1e3}return l!=null&&!Number.isNaN(l)&&0<=l&&(l<60*1e3||l<a)?l:a}var $R=({maxRetries:t=2,initialDelayInMs:a=2e3,backoffFactor:i=2,abortSignal:l}={})=>async s=>Q0(s,{maxRetries:t,delayInMs:a,backoffFactor:i,abortSignal:l});async function Q0(t,{maxRetries:a,delayInMs:i,backoffFactor:l,abortSignal:s},u=[]){try{return await t()}catch(d){if($o(d)||a===0)throw d;const p=I_(d),m=[...u,d],h=m.length;if(h>a)throw new Mg({message:`Failed after ${h} attempts. Last error: ${p}`,reason:"maxRetriesExceeded",errors:m});if(d instanceof Error&&jt.isInstance(d)&&d.isRetryable===!0&&h<=a)return await nO(ZR({error:d,exponentialBackoffDelay:i}),{abortSignal:s}),Q0(t,{maxRetries:a,delayInMs:l*i,backoffFactor:l,abortSignal:s},m);throw h===1?d:new Mg({message:`Failed after ${h} attempts with non-retryable error: '${p}'`,reason:"errorNotRetryable",errors:m})}}function BR({maxRetries:t,abortSignal:a}){if(t!=null){if(!Number.isInteger(t))throw new ca({parameter:"maxRetries",value:t,message:"maxRetries must be an integer"});if(t<0)throw new ca({parameter:"maxRetries",value:t,message:"maxRetries must be >= 0"})}const i=t??2;return{maxRetries:i,retry:$R({maxRetries:i,abortSignal:a})}}function HR({messages:t}){const a=t.at(-1);if(a?.role!="tool")return{approvedToolApprovals:[],deniedToolApprovals:[]};const i={};for(const m of t)if(m.role==="assistant"&&typeof m.content!="string"){const h=m.content;for(const y of h)y.type==="tool-call"&&(i[y.toolCallId]=y)}const l={};for(const m of t)if(m.role==="assistant"&&typeof m.content!="string"){const h=m.content;for(const y of h)y.type==="tool-approval-request"&&(l[y.approvalId]=y)}const s={};for(const m of a.content)m.type==="tool-result"&&(s[m.toolCallId]=m);const u=[],d=[],p=a.content.filter(m=>m.type==="tool-approval-response");for(const m of p){const h=l[m.approvalId];if(h==null)throw new D2({approvalId:m.approvalId});if(s[h.toolCallId]!=null)continue;const y=i[h.toolCallId];if(y==null)throw new v0({toolCallId:h.toolCallId,approvalId:h.approvalId});const T={approvalRequest:h,approvalResponse:m,toolCall:y};m.approved?u.push(T):d.push(T)}return{approvedToolApprovals:u,deniedToolApprovals:d}}async function K0({toolCall:t,tools:a,tracer:i,telemetry:l,messages:s,abortSignal:u,experimental_context:d,onPreliminaryToolResult:p}){const{toolName:m,toolCallId:h,input:y}=t,T=a?.[m];if(T?.execute!=null)return Ad({name:"ai.toolCall",attributes:Mi({telemetry:l,attributes:{...xd({operationId:"ai.toolCall",telemetry:l}),"ai.toolCall.name":m,"ai.toolCall.id":h,"ai.toolCall.args":{output:()=>JSON.stringify(y)}}}),tracer:i,fn:async b=>{let w;try{const z=fC({execute:T.execute.bind(T),input:y,options:{toolCallId:h,messages:s,abortSignal:u,experimental_context:d}});for await(const O of z)O.type==="preliminary"?p?.({...t,type:"tool-result",output:O.output,preliminary:!0}):w=O.output}catch(z){return X0(b,z),{type:"tool-error",toolCallId:h,toolName:m,input:y,error:z,dynamic:T.type==="dynamic",...t.providerMetadata!=null?{providerMetadata:t.providerMetadata}:{}}}try{b.setAttributes(await Mi({telemetry:l,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(w)}}}))}catch{}return{type:"tool-result",toolCallId:h,toolName:m,input:y,output:w,dynamic:T.type==="dynamic",...t.providerMetadata!=null?{providerMetadata:t.providerMetadata}:{}}}})}var LR=class{constructor({data:t,mediaType:a}){const i=t instanceof Uint8Array;this.base64Data=i?void 0:t,this.uint8ArrayData=i?t:void 0,this.mediaType=a}get base64(){return this.base64Data==null&&(this.base64Data=Yl(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=Zi(this.base64Data)),this.uint8ArrayData}},GR=class extends LR{constructor(t){super(t),this.type="file"}};async function VR({tool:t,toolCall:a,messages:i,experimental_context:l}){return t.needsApproval==null?!1:typeof t.needsApproval=="boolean"?t.needsApproval:await t.needsApproval(a.input,{toolCallId:a.toolCallId,messages:i,experimental_context:l})}var YR={};z2(YR,{array:()=>QR,choice:()=>KR,json:()=>PR,object:()=>XR,text:()=>Od});function JR(t){const a=["ROOT"];let i=-1,l=null;function s(m,h,y){switch(m){case'"':{i=h,a.pop(),a.push(y),a.push("INSIDE_STRING");break}case"f":case"t":case"n":{i=h,l=h,a.pop(),a.push(y),a.push("INSIDE_LITERAL");break}case"-":{a.pop(),a.push(y),a.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{i=h,a.pop(),a.push(y),a.push("INSIDE_NUMBER");break}case"{":{i=h,a.pop(),a.push(y),a.push("INSIDE_OBJECT_START");break}case"[":{i=h,a.pop(),a.push(y),a.push("INSIDE_ARRAY_START");break}}}function u(m,h){switch(m){case",":{a.pop(),a.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{i=h,a.pop();break}}}function d(m,h){switch(m){case",":{a.pop(),a.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{i=h,a.pop();break}}}for(let m=0;m<t.length;m++){const h=t[m];switch(a[a.length-1]){case"ROOT":s(h,m,"FINISH");break;case"INSIDE_OBJECT_START":{switch(h){case'"':{a.pop(),a.push("INSIDE_OBJECT_KEY");break}case"}":{i=m,a.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{h==='"'&&(a.pop(),a.push("INSIDE_OBJECT_KEY"));break}case"INSIDE_OBJECT_KEY":{h==='"'&&(a.pop(),a.push("INSIDE_OBJECT_AFTER_KEY"));break}case"INSIDE_OBJECT_AFTER_KEY":{h===":"&&(a.pop(),a.push("INSIDE_OBJECT_BEFORE_VALUE"));break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(h,m,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{u(h,m);break}case"INSIDE_STRING":{switch(h){case'"':{a.pop(),i=m;break}case"\\":{a.push("INSIDE_STRING_ESCAPE");break}default:i=m}break}case"INSIDE_ARRAY_START":{h==="]"?(i=m,a.pop()):(i=m,s(h,m,"INSIDE_ARRAY_AFTER_VALUE"));break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(h){case",":{a.pop(),a.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{i=m,a.pop();break}default:{i=m;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(h,m,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{a.pop(),i=m;break}case"INSIDE_NUMBER":{switch(h){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{i=m;break}case"e":case"E":case"-":case".":break;case",":{a.pop(),a[a.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&d(h,m),a[a.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&u(h,m);break}case"}":{a.pop(),a[a.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&u(h,m);break}case"]":{a.pop(),a[a.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&d(h,m);break}default:{a.pop();break}}break}case"INSIDE_LITERAL":{const T=t.substring(l,m+1);!"false".startsWith(T)&&!"true".startsWith(T)&&!"null".startsWith(T)?(a.pop(),a[a.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?u(h,m):a[a.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&d(h,m)):i=m;break}}}let p=t.slice(0,i+1);for(let m=a.length-1;m>=0;m--)switch(a[m]){case"INSIDE_STRING":{p+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{p+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{p+="]";break}case"INSIDE_LITERAL":{const y=t.substring(l,t.length);"true".startsWith(y)?p+="true".slice(y.length):"false".startsWith(y)?p+="false".slice(y.length):"null".startsWith(y)&&(p+="null".slice(y.length))}}return p}async function er(t){if(t===void 0)return{value:void 0,state:"undefined-input"};let a=await Wn({text:t});return a.success?{value:a.value,state:"successful-parse"}:(a=await Wn({text:JR(t)}),a.success?{value:a.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Od=()=>({name:"text",responseFormat:Promise.resolve({type:"text"}),async parseCompleteOutput({text:t}){return t},async parsePartialOutput({text:t}){return{partial:t}},createElementStreamTransform(){}}),XR=({schema:t,name:a,description:i})=>{const l=Bi(t);return{name:"object",responseFormat:Qt(l.jsonSchema).then(s=>({type:"json",schema:s,...a!=null&&{name:a},...i!=null&&{description:i}})),async parseCompleteOutput({text:s},u){const d=await Wn({text:s});if(!d.success)throw new ro({message:"No object generated: could not parse the response.",cause:d.error,text:s,response:u.response,usage:u.usage,finishReason:u.finishReason});const p=await Fn({value:d.value,schema:l});if(!p.success)throw new ro({message:"No object generated: response did not match schema.",cause:p.error,text:s,response:u.response,usage:u.usage,finishReason:u.finishReason});return p.value},async parsePartialOutput({text:s}){const u=await er(s);switch(u.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:u.value}}},createElementStreamTransform(){}}},QR=({element:t,name:a,description:i})=>{const l=Bi(t);return{name:"array",responseFormat:Qt(l.jsonSchema).then(s=>{const{$schema:u,...d}=s;return{type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:d}},required:["elements"],additionalProperties:!1},...a!=null&&{name:a},...i!=null&&{description:i}}}),async parseCompleteOutput({text:s},u){const d=await Wn({text:s});if(!d.success)throw new ro({message:"No object generated: could not parse the response.",cause:d.error,text:s,response:u.response,usage:u.usage,finishReason:u.finishReason});const p=d.value;if(p==null||typeof p!="object"||!("elements"in p)||!Array.isArray(p.elements))throw new ro({message:"No object generated: response did not match schema.",cause:new Zo({value:p,cause:"response must be an object with an elements array"}),text:s,response:u.response,usage:u.usage,finishReason:u.finishReason});for(const m of p.elements){const h=await Fn({value:m,schema:l});if(!h.success)throw new ro({message:"No object generated: response did not match schema.",cause:h.error,text:s,response:u.response,usage:u.usage,finishReason:u.finishReason})}return p.elements},async parsePartialOutput({text:s}){const u=await er(s);switch(u.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const d=u.value;if(d==null||typeof d!="object"||!("elements"in d)||!Array.isArray(d.elements))return;const p=u.state==="repaired-parse"&&d.elements.length>0?d.elements.slice(0,-1):d.elements,m=[];for(const h of p){const y=await Fn({value:h,schema:l});y.success&&m.push(y.value)}return{partial:m}}}},createElementStreamTransform(){let s=0;return new TransformStream({transform({partialOutput:u},d){if(u!=null)for(;s<u.length;s++)d.enqueue(u[s])}})}}},KR=({options:t,name:a,description:i})=>({name:"choice",responseFormat:Promise.resolve({type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:t}},required:["result"],additionalProperties:!1},...a!=null&&{name:a},...i!=null&&{description:i}}),async parseCompleteOutput({text:l},s){const u=await Wn({text:l});if(!u.success)throw new ro({message:"No object generated: could not parse the response.",cause:u.error,text:l,response:s.response,usage:s.usage,finishReason:s.finishReason});const d=u.value;if(d==null||typeof d!="object"||!("result"in d)||typeof d.result!="string"||!t.includes(d.result))throw new ro({message:"No object generated: response did not match schema.",cause:new Zo({value:d,cause:"response must be an object that contains a choice value."}),text:l,response:s.response,usage:s.usage,finishReason:s.finishReason});return d.result},async parsePartialOutput({text:l}){const s=await er(l);switch(s.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const u=s.value;if(u==null||typeof u!="object"||!("result"in u)||typeof u.result!="string")return;const d=t.filter(p=>p.startsWith(u.result));return s.state==="successful-parse"?d.includes(u.result)?{partial:u.result}:void 0:d.length===1?{partial:d[0]}:void 0}}},createElementStreamTransform(){}}),PR=({name:t,description:a}={})=>({name:"json",responseFormat:Promise.resolve({type:"json",...t!=null&&{name:t},...a!=null&&{description:a}}),async parseCompleteOutput({text:i},l){const s=await Wn({text:i});if(!s.success)throw new ro({message:"No object generated: could not parse the response.",cause:s.error,text:i,response:l.response,usage:l.usage,finishReason:l.finishReason});return s.value},async parsePartialOutput({text:i}){const l=await er(i);switch(l.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return l.value===void 0?void 0:{partial:l.value}}},createElementStreamTransform(){}});async function FR({toolCall:t,tools:a,repairToolCall:i,system:l,messages:s}){var u;try{if(a==null){if(t.providerExecuted&&t.dynamic)return await P0(t);throw new Ed({toolName:t.toolName})}try{return await kg({toolCall:t,tools:a})}catch(d){if(i==null||!(Ed.isInstance(d)||Fd.isInstance(d)))throw d;let p=null;try{p=await i({toolCall:t,tools:a,inputSchema:async({toolName:m})=>{const{inputSchema:h}=a[m];return await Bi(h).jsonSchema},system:l,messages:s,error:d})}catch(m){throw new L2({cause:m,originalError:d})}if(p==null)throw d;return await kg({toolCall:p,tools:a})}}catch(d){const p=await Wn({text:t.input}),m=p.success?p.value:t.input;return{type:"tool-call",toolCallId:t.toolCallId,toolName:t.toolName,input:m,dynamic:!0,invalid:!0,error:d,title:(u=a?.[t.toolName])==null?void 0:u.title,providerExecuted:t.providerExecuted,providerMetadata:t.providerMetadata}}}async function P0(t){const a=t.input.trim()===""?{success:!0,value:{}}:await Wn({text:t.input});if(a.success===!1)throw new Fd({toolName:t.toolName,toolInput:t.input,cause:a.error});return{type:"tool-call",toolCallId:t.toolCallId,toolName:t.toolName,input:a.value,providerExecuted:!0,dynamic:!0,providerMetadata:t.providerMetadata}}async function kg({toolCall:t,tools:a}){const i=t.toolName,l=a[i];if(l==null){if(t.providerExecuted&&t.dynamic)return await P0(t);throw new Ed({toolName:t.toolName,availableTools:Object.keys(a)})}const s=Bi(l.inputSchema),u=t.input.trim()===""?await Fn({value:{},schema:s}):await Wn({text:t.input,schema:s});if(u.success===!1)throw new Fd({toolName:i,toolInput:t.input,cause:u.error});return l.type==="dynamic"?{type:"tool-call",toolCallId:t.toolCallId,toolName:t.toolName,input:u.value,providerExecuted:t.providerExecuted,providerMetadata:t.providerMetadata,dynamic:!0,title:l.title}:{type:"tool-call",toolCallId:t.toolCallId,toolName:i,input:u.value,providerExecuted:t.providerExecuted,providerMetadata:t.providerMetadata,title:l.title}}var WR=class{constructor({content:t,finishReason:a,rawFinishReason:i,usage:l,warnings:s,request:u,response:d,providerMetadata:p}){this.content=t,this.finishReason=a,this.rawFinishReason=i,this.usage=l,this.warnings=s,this.request=u,this.response=d,this.providerMetadata=p}get text(){return this.content.filter(t=>t.type==="text").map(t=>t.text).join("")}get reasoning(){return this.content.filter(t=>t.type==="reasoning")}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(t=>t.text).join("")}get files(){return this.content.filter(t=>t.type==="file").map(t=>t.file)}get sources(){return this.content.filter(t=>t.type==="source")}get toolCalls(){return this.content.filter(t=>t.type==="tool-call")}get staticToolCalls(){return this.toolCalls.filter(t=>t.dynamic!==!0)}get dynamicToolCalls(){return this.toolCalls.filter(t=>t.dynamic===!0)}get toolResults(){return this.content.filter(t=>t.type==="tool-result")}get staticToolResults(){return this.toolResults.filter(t=>t.dynamic!==!0)}get dynamicToolResults(){return this.toolResults.filter(t=>t.dynamic===!0)}};function eM(t){return({steps:a})=>a.length===t}async function tM({stopConditions:t,steps:a}){return(await Promise.all(t.map(i=>i({steps:a})))).some(i=>i)}async function Dg({content:t,tools:a}){const i=[],l=[];for(const u of t)if(u.type!=="source"&&!((u.type==="tool-result"||u.type==="tool-error")&&!u.providerExecuted)&&!(u.type==="text"&&u.text.length===0))switch(u.type){case"text":l.push({type:"text",text:u.text,providerOptions:u.providerMetadata});break;case"reasoning":l.push({type:"reasoning",text:u.text,providerOptions:u.providerMetadata});break;case"file":l.push({type:"file",data:u.file.base64,mediaType:u.file.mediaType,providerOptions:u.providerMetadata});break;case"tool-call":l.push({type:"tool-call",toolCallId:u.toolCallId,toolName:u.toolName,input:u.input,providerExecuted:u.providerExecuted,providerOptions:u.providerMetadata});break;case"tool-result":{const d=await Ts({toolCallId:u.toolCallId,input:u.input,tool:a?.[u.toolName],output:u.output,errorMode:"none"});l.push({type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,output:d,providerOptions:u.providerMetadata});break}case"tool-error":{const d=await Ts({toolCallId:u.toolCallId,input:u.input,tool:a?.[u.toolName],output:u.error,errorMode:"json"});l.push({type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,output:d,providerOptions:u.providerMetadata});break}case"tool-approval-request":l.push({type:"tool-approval-request",approvalId:u.approvalId,toolCallId:u.toolCall.toolCallId});break}l.length>0&&i.push({role:"assistant",content:l});const s=[];for(const u of t){if(!(u.type==="tool-result"||u.type==="tool-error")||u.providerExecuted)continue;const d=await Ts({toolCallId:u.toolCallId,input:u.input,tool:a?.[u.toolName],output:u.type==="tool-result"?u.output:u.error,errorMode:u.type==="tool-error"?"text":"none"});s.push({type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,output:d,...u.providerMetadata!=null?{providerOptions:u.providerMetadata}:{}})}return s.length>0&&i.push({role:"tool",content:s}),i}function nM(...t){const a=t.filter(l=>l!=null);if(a.length===0)return;if(a.length===1)return a[0];const i=new AbortController;for(const l of a){if(l.aborted)return i.abort(l.reason),i.signal;l.addEventListener("abort",()=>{i.abort(l.reason)},{once:!0})}return i.signal}Fl({prefix:"aitxt",size:24});function Bs(t,a){const i=new Headers(t??{});for(const[l,s]of Object.entries(a))i.has(l)||i.set(l,s);return i}function aM({status:t,statusText:a,headers:i,textStream:l}){return new Response(l.pipeThrough(new TextEncoderStream),{status:t??200,statusText:a,headers:Bs(i,{"content-type":"text/plain; charset=utf-8"})})}function F0({response:t,status:a,statusText:i,headers:l,stream:s}){const u=a??200;i!==void 0?t.writeHead(u,i,l):t.writeHead(u,l);const d=s.getReader();(async()=>{try{for(;;){const{done:m,value:h}=await d.read();if(m)break;t.write(h)||await new Promise(T=>{t.once("drain",T)})}}catch(m){throw m}finally{t.end()}})()}function oM({response:t,status:a,statusText:i,headers:l,textStream:s}){F0({response:t,status:a,statusText:i,headers:Object.fromEntries(Bs(l,{"content-type":"text/plain; charset=utf-8"}).entries()),stream:s.pipeThrough(new TextEncoderStream)})}var W0=class extends TransformStream{constructor(){super({transform(t,a){a.enqueue(`data: ${JSON.stringify(t)}

`)},flush(t){t.enqueue(`data: [DONE]

`)}})}},eb={"content-type":"text/event-stream","cache-control":"no-cache",connection:"keep-alive","x-vercel-ai-ui-message-stream":"v1","x-accel-buffering":"no"};function iM({status:t,statusText:a,headers:i,stream:l,consumeSseStream:s}){let u=l.pipeThrough(new W0);if(s){const[d,p]=u.tee();u=d,s({stream:p})}return new Response(u.pipeThrough(new TextEncoderStream),{status:t,statusText:a,headers:Bs(i,eb)})}function lM({originalMessages:t,responseMessageId:a}){if(t==null)return;const i=t[t.length-1];return i?.role==="assistant"?i.id:typeof a=="function"?a():a}function rM(t){return t.type.startsWith("data-")}function Cd(t){return t.type.startsWith("tool-")}function sM(t){return t.type==="dynamic-tool"}function uM(t){return Cd(t)||sM(t)}function Ug(t){return t.type.split("-").slice(1).join("-")}function cM({lastMessage:t,messageId:a}){return{message:t?.role==="assistant"?t:{id:a,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function dM({stream:t,messageMetadataSchema:a,dataPartSchemas:i,runUpdateMessageJob:l,onError:s,onToolCall:u,onData:d}){return t.pipeThrough(new TransformStream({async transform(p,m){await l(async({state:h,write:y})=>{var T,b,w,z;function O(x){const ne=h.message.parts.filter(uM).find(E=>E.toolCallId===x);if(ne==null)throw new Oi({chunkType:"tool-invocation",chunkId:x,message:`No tool invocation found for tool call ID "${x}".`});return ne}function N(x){var W;const ne=h.message.parts.find(ge=>Cd(ge)&&ge.toolCallId===x.toolCallId),E=x,$=ne;ne!=null?(ne.state=x.state,$.input=E.input,$.output=E.output,$.errorText=E.errorText,$.rawInput=E.rawInput,$.preliminary=E.preliminary,x.title!==void 0&&($.title=x.title),$.providerExecuted=(W=E.providerExecuted)!=null?W:ne.providerExecuted,E.providerMetadata!=null&&(ne.callProviderMetadata=E.providerMetadata)):h.message.parts.push({type:`tool-${x.toolName}`,toolCallId:x.toolCallId,state:x.state,title:x.title,input:E.input,output:E.output,rawInput:E.rawInput,errorText:E.errorText,providerExecuted:E.providerExecuted,preliminary:E.preliminary,...E.providerMetadata!=null?{callProviderMetadata:E.providerMetadata}:{}})}function X(x){var W,ne;const E=h.message.parts.find(le=>le.type==="dynamic-tool"&&le.toolCallId===x.toolCallId),$=x,ge=E;E!=null?(E.state=x.state,ge.toolName=x.toolName,ge.input=$.input,ge.output=$.output,ge.errorText=$.errorText,ge.rawInput=(W=$.rawInput)!=null?W:ge.rawInput,ge.preliminary=$.preliminary,x.title!==void 0&&(ge.title=x.title),ge.providerExecuted=(ne=$.providerExecuted)!=null?ne:E.providerExecuted,$.providerMetadata!=null&&(E.callProviderMetadata=$.providerMetadata)):h.message.parts.push({type:"dynamic-tool",toolName:x.toolName,toolCallId:x.toolCallId,state:x.state,input:$.input,output:$.output,errorText:$.errorText,preliminary:$.preliminary,providerExecuted:$.providerExecuted,title:x.title,...$.providerMetadata!=null?{callProviderMetadata:$.providerMetadata}:{}})}async function K(x){if(x!=null){const W=h.message.metadata!=null?Wd(h.message.metadata,x):x;a!=null&&await cn({value:W,schema:a}),h.message.metadata=W}}switch(p.type){case"text-start":{const x={type:"text",text:"",providerMetadata:p.providerMetadata,state:"streaming"};h.activeTextParts[p.id]=x,h.message.parts.push(x),y();break}case"text-delta":{const x=h.activeTextParts[p.id];if(x==null)throw new Oi({chunkType:"text-delta",chunkId:p.id,message:`Received text-delta for missing text part with ID "${p.id}". Ensure a "text-start" chunk is sent before any "text-delta" chunks.`});x.text+=p.delta,x.providerMetadata=(T=p.providerMetadata)!=null?T:x.providerMetadata,y();break}case"text-end":{const x=h.activeTextParts[p.id];if(x==null)throw new Oi({chunkType:"text-end",chunkId:p.id,message:`Received text-end for missing text part with ID "${p.id}". Ensure a "text-start" chunk is sent before any "text-end" chunks.`});x.state="done",x.providerMetadata=(b=p.providerMetadata)!=null?b:x.providerMetadata,delete h.activeTextParts[p.id],y();break}case"reasoning-start":{const x={type:"reasoning",text:"",providerMetadata:p.providerMetadata,state:"streaming"};h.activeReasoningParts[p.id]=x,h.message.parts.push(x),y();break}case"reasoning-delta":{const x=h.activeReasoningParts[p.id];if(x==null)throw new Oi({chunkType:"reasoning-delta",chunkId:p.id,message:`Received reasoning-delta for missing reasoning part with ID "${p.id}". Ensure a "reasoning-start" chunk is sent before any "reasoning-delta" chunks.`});x.text+=p.delta,x.providerMetadata=(w=p.providerMetadata)!=null?w:x.providerMetadata,y();break}case"reasoning-end":{const x=h.activeReasoningParts[p.id];if(x==null)throw new Oi({chunkType:"reasoning-end",chunkId:p.id,message:`Received reasoning-end for missing reasoning part with ID "${p.id}". Ensure a "reasoning-start" chunk is sent before any "reasoning-end" chunks.`});x.providerMetadata=(z=p.providerMetadata)!=null?z:x.providerMetadata,x.state="done",delete h.activeReasoningParts[p.id],y();break}case"file":{h.message.parts.push({type:"file",mediaType:p.mediaType,url:p.url}),y();break}case"source-url":{h.message.parts.push({type:"source-url",sourceId:p.sourceId,url:p.url,title:p.title,providerMetadata:p.providerMetadata}),y();break}case"source-document":{h.message.parts.push({type:"source-document",sourceId:p.sourceId,mediaType:p.mediaType,title:p.title,filename:p.filename,providerMetadata:p.providerMetadata}),y();break}case"tool-input-start":{const x=h.message.parts.filter(Cd);h.partialToolCalls[p.toolCallId]={text:"",toolName:p.toolName,index:x.length,dynamic:p.dynamic,title:p.title},p.dynamic?X({toolCallId:p.toolCallId,toolName:p.toolName,state:"input-streaming",input:void 0,providerExecuted:p.providerExecuted,title:p.title,providerMetadata:p.providerMetadata}):N({toolCallId:p.toolCallId,toolName:p.toolName,state:"input-streaming",input:void 0,providerExecuted:p.providerExecuted,title:p.title,providerMetadata:p.providerMetadata}),y();break}case"tool-input-delta":{const x=h.partialToolCalls[p.toolCallId];if(x==null)throw new Oi({chunkType:"tool-input-delta",chunkId:p.toolCallId,message:`Received tool-input-delta for missing tool call with ID "${p.toolCallId}". Ensure a "tool-input-start" chunk is sent before any "tool-input-delta" chunks.`});x.text+=p.inputTextDelta;const{value:W}=await er(x.text);x.dynamic?X({toolCallId:p.toolCallId,toolName:x.toolName,state:"input-streaming",input:W,title:x.title}):N({toolCallId:p.toolCallId,toolName:x.toolName,state:"input-streaming",input:W,title:x.title}),y();break}case"tool-input-available":{p.dynamic?X({toolCallId:p.toolCallId,toolName:p.toolName,state:"input-available",input:p.input,providerExecuted:p.providerExecuted,providerMetadata:p.providerMetadata,title:p.title}):N({toolCallId:p.toolCallId,toolName:p.toolName,state:"input-available",input:p.input,providerExecuted:p.providerExecuted,providerMetadata:p.providerMetadata,title:p.title}),y(),u&&!p.providerExecuted&&await u({toolCall:p});break}case"tool-input-error":{p.dynamic?X({toolCallId:p.toolCallId,toolName:p.toolName,state:"output-error",input:p.input,errorText:p.errorText,providerExecuted:p.providerExecuted,providerMetadata:p.providerMetadata}):N({toolCallId:p.toolCallId,toolName:p.toolName,state:"output-error",input:void 0,rawInput:p.input,errorText:p.errorText,providerExecuted:p.providerExecuted,providerMetadata:p.providerMetadata}),y();break}case"tool-approval-request":{const x=O(p.toolCallId);x.state="approval-requested",x.approval={id:p.approvalId},y();break}case"tool-output-denied":{const x=O(p.toolCallId);x.state="output-denied",y();break}case"tool-output-available":{const x=O(p.toolCallId);x.type==="dynamic-tool"?X({toolCallId:p.toolCallId,toolName:x.toolName,state:"output-available",input:x.input,output:p.output,preliminary:p.preliminary,providerExecuted:p.providerExecuted,title:x.title}):N({toolCallId:p.toolCallId,toolName:Ug(x),state:"output-available",input:x.input,output:p.output,providerExecuted:p.providerExecuted,preliminary:p.preliminary,title:x.title}),y();break}case"tool-output-error":{const x=O(p.toolCallId);x.type==="dynamic-tool"?X({toolCallId:p.toolCallId,toolName:x.toolName,state:"output-error",input:x.input,errorText:p.errorText,providerExecuted:p.providerExecuted,title:x.title}):N({toolCallId:p.toolCallId,toolName:Ug(x),state:"output-error",input:x.input,rawInput:x.rawInput,errorText:p.errorText,providerExecuted:p.providerExecuted,title:x.title}),y();break}case"start-step":{h.message.parts.push({type:"step-start"});break}case"finish-step":{h.activeTextParts={},h.activeReasoningParts={};break}case"start":{p.messageId!=null&&(h.message.id=p.messageId),await K(p.messageMetadata),(p.messageId!=null||p.messageMetadata!=null)&&y();break}case"finish":{p.finishReason!=null&&(h.finishReason=p.finishReason),await K(p.messageMetadata),p.messageMetadata!=null&&y();break}case"message-metadata":{await K(p.messageMetadata),p.messageMetadata!=null&&y();break}case"error":{s?.(new Error(p.errorText));break}default:if(rM(p)){i?.[p.type]!=null&&await cn({value:p.data,schema:i[p.type]});const x=p;if(x.transient){d?.(x);break}const W=x.id!=null?h.message.parts.find(ne=>x.type===ne.type&&x.id===ne.id):void 0;W!=null?W.data=x.data:h.message.parts.push(x),d?.(x),y()}}m.enqueue(p)})}}))}function fM({messageId:t,originalMessages:a=[],onFinish:i,onError:l,stream:s}){let u=a?.[a.length-1];u?.role!=="assistant"?u=void 0:t=u.id;let d=!1;const p=s.pipeThrough(new TransformStream({transform(b,w){if(b.type==="start"){const z=b;z.messageId==null&&t!=null&&(z.messageId=t)}b.type==="abort"&&(d=!0),w.enqueue(b)}}));if(i==null)return p;const m=cM({lastMessage:u?structuredClone(u):void 0,messageId:t??""}),h=async b=>{await b({state:m,write:()=>{}})};let y=!1;const T=async()=>{if(y||!i)return;y=!0;const b=m.message.id===u?.id;await i({isAborted:d,isContinuation:b,responseMessage:m.message,messages:[...b?a.slice(0,-1):a,m.message],finishReason:m.finishReason})};return dM({stream:p,runUpdateMessageJob:h,onError:l}).pipeThrough(new TransformStream({transform(b,w){w.enqueue(b)},async cancel(){await T()},async flush(){await T()}}))}function pM({response:t,status:a,statusText:i,headers:l,stream:s,consumeSseStream:u}){let d=s.pipeThrough(new W0);if(u){const[p,m]=d.tee();d=p,u({stream:m})}F0({response:t,status:a,statusText:i,headers:Object.fromEntries(Bs(l,eb).entries()),stream:d.pipeThrough(new TextEncoderStream)})}function Zl(t){const a=t.pipeThrough(new TransformStream);return a[Symbol.asyncIterator]=function(){const i=this.getReader();let l=!1;async function s(u){var d;if(!l){l=!0;try{u&&await((d=i.cancel)==null?void 0:d.call(i))}finally{try{i.releaseLock()}catch{}}}}return{async next(){if(l)return{done:!0,value:void 0};const{done:u,value:d}=await i.read();return u?(await s(!0),{done:!0,value:void 0}):{done:!1,value:d}},async return(){return await s(!0),{done:!0,value:void 0}},async throw(u){throw await s(!0),u}}},a}async function mM({stream:t,onError:a}){const i=t.getReader();try{for(;;){const{done:l}=await i.read();if(l)break}}catch(l){a?.(l)}finally{i.releaseLock()}}function qg(){let t,a;return{promise:new Promise((l,s)=>{t=l,a=s}),resolve:t,reject:a}}function hM(){let t=[],a=null,i=!1,l=qg();const s=()=>{i=!0,l.resolve(),t.forEach(d=>d.cancel()),t=[],a?.close()},u=async()=>{if(i&&t.length===0){a?.close();return}if(t.length===0)return l=qg(),await l.promise,u();try{const{value:d,done:p}=await t[0].read();p?(t.shift(),t.length===0&&i?a?.close():await u()):a?.enqueue(d)}catch(d){a?.error(d),t.shift(),s()}};return{stream:new ReadableStream({start(d){a=d},pull:u,async cancel(){for(const d of t)await d.cancel();t=[],i=!0}}),addStream:d=>{if(i)throw new Error("Cannot add inner stream: outer stream is closed");t.push(d.getReader()),l.resolve()},close:()=>{i=!0,l.resolve(),t.length===0&&a?.close()},terminate:s}}function vM(){var t,a;return(a=(t=globalThis?.performance)==null?void 0:t.now())!=null?a:Date.now()}function gM({tools:t,generatorStream:a,tracer:i,telemetry:l,system:s,messages:u,abortSignal:d,repairToolCall:p,experimental_context:m,generateId:h}){let y=null;const T=new ReadableStream({start(x){y=x}}),b=new Set,w=new Map,z=new Map;let O=!1,N;function X(){O&&b.size===0&&(N!=null&&y.enqueue(N),y.close())}const K=new TransformStream({async transform(x,W){const ne=x.type;switch(ne){case"stream-start":case"text-start":case"text-delta":case"text-end":case"reasoning-start":case"reasoning-delta":case"reasoning-end":case"tool-input-start":case"tool-input-delta":case"tool-input-end":case"source":case"response-metadata":case"error":case"raw":{W.enqueue(x);break}case"file":{W.enqueue({type:"file",file:new GR({data:x.data,mediaType:x.mediaType})});break}case"finish":{N={type:"finish",finishReason:x.finishReason.unified,rawFinishReason:x.finishReason.raw,usage:qR(x.usage),providerMetadata:x.providerMetadata};break}case"tool-approval-request":{const E=z.get(x.toolCallId);if(E==null){y.enqueue({type:"error",error:new v0({toolCallId:x.toolCallId,approvalId:x.approvalId})});break}W.enqueue({type:"tool-approval-request",approvalId:x.approvalId,toolCall:E});break}case"tool-call":{try{const E=await FR({toolCall:x,tools:t,repairToolCall:p,system:s,messages:u});if(z.set(E.toolCallId,E),W.enqueue(E),E.invalid){y.enqueue({type:"tool-error",toolCallId:E.toolCallId,toolName:E.toolName,input:E.input,error:I_(E.error),dynamic:!0,title:E.title});break}const $=t?.[E.toolName];if($==null)break;if($.onInputAvailable!=null&&await $.onInputAvailable({input:E.input,toolCallId:E.toolCallId,messages:u,abortSignal:d,experimental_context:m}),await VR({tool:$,toolCall:E,messages:u,experimental_context:m})){y.enqueue({type:"tool-approval-request",approvalId:h(),toolCall:E});break}if(w.set(E.toolCallId,E.input),$.execute!=null&&E.providerExecuted!==!0){const ge=h();b.add(ge),K0({toolCall:E,tools:t,tracer:i,telemetry:l,messages:u,abortSignal:d,experimental_context:m,onPreliminaryToolResult:le=>{y.enqueue(le)}}).then(le=>{y.enqueue(le)}).catch(le=>{y.enqueue({type:"error",error:le})}).finally(()=>{b.delete(ge),X()})}}catch(E){y.enqueue({type:"error",error:E})}break}case"tool-result":{const E=x.toolName;x.isError?y.enqueue({type:"tool-error",toolCallId:x.toolCallId,toolName:E,input:w.get(x.toolCallId),providerExecuted:!0,error:x.result,dynamic:x.dynamic}):W.enqueue({type:"tool-result",toolCallId:x.toolCallId,toolName:E,input:w.get(x.toolCallId),output:x.result,providerExecuted:!0,dynamic:x.dynamic});break}default:{const E=ne;throw new Error(`Unhandled chunk type: ${E}`)}}},flush(){O=!0,X()}});return new ReadableStream({async start(x){return Promise.all([a.pipeThrough(K).pipeTo(new WritableStream({write(W){x.enqueue(W)},close(){}})),T.pipeTo(new WritableStream({write(W){x.enqueue(W)},close(){x.close()}}))])}})}var yM=Fl({prefix:"aitxt",size:24});function _M({model:t,tools:a,toolChoice:i,system:l,prompt:s,messages:u,maxRetries:d,abortSignal:p,timeout:m,headers:h,stopWhen:y=eM(1),experimental_output:T,output:b=T,experimental_telemetry:w,prepareStep:z,providerOptions:O,experimental_activeTools:N,activeTools:X=N,experimental_repairToolCall:K,experimental_transform:x,experimental_download:W,includeRawChunks:ne=!1,onChunk:E,onError:$=({error:te})=>{console.error(te)},onFinish:ge,onAbort:le,onStepFinish:ke,experimental_context:ae,_internal:{now:ee=vM,generateId:ue=yM}={},...se}){const te=H0(m),k=tR(m),B=nR(m),P=k!=null?new AbortController:void 0,we=B!=null?new AbortController:void 0;return new SM({model:B0(t),telemetry:w,headers:h,settings:se,maxRetries:d,abortSignal:nM(p,te!=null?AbortSignal.timeout(te):void 0,P?.signal,we?.signal),stepTimeoutMs:k,stepAbortController:P,chunkTimeoutMs:B,chunkAbortController:we,system:l,prompt:s,messages:u,tools:a,toolChoice:i,transforms:ks(x),activeTools:X,repairToolCall:K,stopConditions:ks(y),output:b,providerOptions:O,prepareStep:z,includeRawChunks:ne,onChunk:E,onError:$,onFinish:ge,onAbort:le,onStepFinish:ke,now:ee,generateId:ue,experimental_context:ae,download:W})}function bM(t){let a,i="",l="",s,u="";function d({controller:p,partialOutput:m=void 0}){p.enqueue({part:{type:"text-delta",id:a,text:l,providerMetadata:s},partialOutput:m}),l=""}return new TransformStream({async transform(p,m){var h;if(p.type==="finish-step"&&l.length>0&&d({controller:m}),p.type!=="text-delta"&&p.type!=="text-start"&&p.type!=="text-end"){m.enqueue({part:p,partialOutput:void 0});return}if(a==null)a=p.id;else if(p.id!==a){m.enqueue({part:p,partialOutput:void 0});return}if(p.type==="text-start"){m.enqueue({part:p,partialOutput:void 0});return}if(p.type==="text-end"){l.length>0&&d({controller:m}),m.enqueue({part:p,partialOutput:void 0});return}i+=p.text,l+=p.text,s=(h=p.providerMetadata)!=null?h:s;const y=await t.parsePartialOutput({text:i});if(y!==void 0){const T=JSON.stringify(y.partial);T!==u&&(d({controller:m,partialOutput:y.partial}),u=T)}}})}var SM=class{constructor({model:t,telemetry:a,headers:i,settings:l,maxRetries:s,abortSignal:u,stepTimeoutMs:d,stepAbortController:p,chunkTimeoutMs:m,chunkAbortController:h,system:y,prompt:T,messages:b,tools:w,toolChoice:z,transforms:O,activeTools:N,repairToolCall:X,stopConditions:K,output:x,providerOptions:W,prepareStep:ne,includeRawChunks:E,now:$,generateId:ge,onChunk:le,onError:ke,onFinish:ae,onAbort:ee,onStepFinish:ue,experimental_context:se,download:te}){this._totalUsage=new ql,this._finishReason=new ql,this._rawFinishReason=new ql,this._steps=new ql,this.outputSpecification=x,this.includeRawChunks=E,this.tools=w;let k,B=[];const P=[];let we,ce,C,L={},oe=[];const re=[],Q=new Map;let pe,xe={},Ee={};const tt=new TransformStream({async transform(Me,Ze){var nt,$e,Yt,St;Ze.enqueue(Me);const{part:de}=Me;if((de.type==="text-delta"||de.type==="reasoning-delta"||de.type==="source"||de.type==="tool-call"||de.type==="tool-result"||de.type==="tool-input-start"||de.type==="tool-input-delta"||de.type==="raw")&&await le?.({chunk:de}),de.type==="error"&&await ke({error:NR(de.error)}),de.type==="text-start"&&(xe[de.id]={type:"text",text:"",providerMetadata:de.providerMetadata},B.push(xe[de.id])),de.type==="text-delta"){const Ke=xe[de.id];if(Ke==null){Ze.enqueue({part:{type:"error",error:`text part ${de.id} not found`},partialOutput:void 0});return}Ke.text+=de.text,Ke.providerMetadata=(nt=de.providerMetadata)!=null?nt:Ke.providerMetadata}if(de.type==="text-end"){const Ke=xe[de.id];if(Ke==null){Ze.enqueue({part:{type:"error",error:`text part ${de.id} not found`},partialOutput:void 0});return}Ke.providerMetadata=($e=de.providerMetadata)!=null?$e:Ke.providerMetadata,delete xe[de.id]}if(de.type==="reasoning-start"&&(Ee[de.id]={type:"reasoning",text:"",providerMetadata:de.providerMetadata},B.push(Ee[de.id])),de.type==="reasoning-delta"){const Ke=Ee[de.id];if(Ke==null){Ze.enqueue({part:{type:"error",error:`reasoning part ${de.id} not found`},partialOutput:void 0});return}Ke.text+=de.text,Ke.providerMetadata=(Yt=de.providerMetadata)!=null?Yt:Ke.providerMetadata}if(de.type==="reasoning-end"){const Ke=Ee[de.id];if(Ke==null){Ze.enqueue({part:{type:"error",error:`reasoning part ${de.id} not found`},partialOutput:void 0});return}Ke.providerMetadata=(St=de.providerMetadata)!=null?St:Ke.providerMetadata,delete Ee[de.id]}if(de.type==="file"&&B.push({type:"file",file:de.file}),de.type==="source"&&B.push(de),de.type==="tool-call"&&B.push(de),de.type==="tool-result"&&!de.preliminary&&B.push(de),de.type==="tool-approval-request"&&B.push(de),de.type==="tool-error"&&B.push(de),de.type==="start-step"&&(B=[],Ee={},xe={},L=de.request,oe=de.warnings),de.type==="finish-step"){const Ke=await Dg({content:B,tools:w}),Ln=new WR({content:B,finishReason:de.finishReason,rawFinishReason:de.rawFinishReason,usage:de.usage,warnings:oe,request:L,response:{...de.response,messages:[...P,...Ke]},providerMetadata:de.providerMetadata});await ue?.(Ln),j0({warnings:oe,provider:t.provider,model:t.modelId}),re.push(Ln),P.push(...Ke),k.resolve()}de.type==="finish"&&(C=de.totalUsage,we=de.finishReason,ce=de.rawFinishReason)},async flush(Me){try{if(re.length===0){const Yt=u?.aborted?u.reason:new $2({message:"No output generated. Check the stream for errors."});ie._finishReason.reject(Yt),ie._rawFinishReason.reject(Yt),ie._totalUsage.reject(Yt),ie._steps.reject(Yt);return}const Ze=we??"other",nt=C??hd();ie._finishReason.resolve(Ze),ie._rawFinishReason.resolve(ce),ie._totalUsage.resolve(nt),ie._steps.resolve(re);const $e=re[re.length-1];await ae?.({finishReason:$e.finishReason,rawFinishReason:$e.rawFinishReason,totalUsage:nt,usage:$e.usage,content:$e.content,text:$e.text,reasoningText:$e.reasoningText,reasoning:$e.reasoning,files:$e.files,sources:$e.sources,toolCalls:$e.toolCalls,staticToolCalls:$e.staticToolCalls,dynamicToolCalls:$e.dynamicToolCalls,toolResults:$e.toolResults,staticToolResults:$e.staticToolResults,dynamicToolResults:$e.dynamicToolResults,request:$e.request,response:$e.response,warnings:$e.warnings,providerMetadata:$e.providerMetadata,steps:re,experimental_context:se}),pe.setAttributes(await Mi({telemetry:a,attributes:{"ai.response.finishReason":Ze,"ai.response.text":{output:()=>$e.text},"ai.response.toolCalls":{output:()=>{var Yt;return(Yt=$e.toolCalls)!=null&&Yt.length?JSON.stringify($e.toolCalls):void 0}},"ai.response.providerMetadata":JSON.stringify($e.providerMetadata),"ai.usage.inputTokens":nt.inputTokens,"ai.usage.outputTokens":nt.outputTokens,"ai.usage.totalTokens":nt.totalTokens,"ai.usage.reasoningTokens":nt.reasoningTokens,"ai.usage.cachedInputTokens":nt.cachedInputTokens}}))}catch(Ze){Me.error(Ze)}finally{pe.end()}}}),tn=hM();this.addStream=tn.addStream,this.closeStream=tn.close;const fa=tn.stream.getReader();let na=new ReadableStream({async start(Me){Me.enqueue({type:"start"})},async pull(Me){function Ze(){ee?.({steps:re}),Me.enqueue({type:"abort",...u?.reason!==void 0?{reason:jo(u.reason)}:{}}),Me.close()}try{const{done:nt,value:$e}=await fa.read();if(nt){Me.close();return}if(u?.aborted){Ze();return}Me.enqueue($e)}catch(nt){$o(nt)&&u?.aborted?Ze():Me.error(nt)}},cancel(Me){return tn.stream.cancel(Me)}});for(const Me of O)na=na.pipeThrough(Me({tools:w,stopStream(){tn.terminate()}}));this.baseStream=na.pipeThrough(bM(x??Od())).pipeThrough(tt);const{maxRetries:ho,retry:An}=BR({maxRetries:s,abortSignal:u}),Hn=DR(a),Vt=vR(l),R=zR({model:t,telemetry:a,headers:i,settings:{...Vt,maxRetries:ho}}),ie=this;Ad({name:"ai.streamText",attributes:Mi({telemetry:a,attributes:{...xd({operationId:"ai.streamText",telemetry:a}),...R,"ai.prompt":{input:()=>JSON.stringify({system:y,prompt:T,messages:b})}}}),tracer:Hn,endWhenDone:!1,fn:async Me=>{pe=Me;const Ze=await MR({system:y,prompt:T,messages:b}),nt=Ze.messages,$e=[],{approvedToolApprovals:Yt,deniedToolApprovals:St}=HR({messages:nt});if(St.length>0||Yt.length>0){const Ke=[...Yt,...St].filter(kt=>kt.toolCall.providerExecuted),Ln=Yt.filter(kt=>!kt.toolCall.providerExecuted),aa=St.filter(kt=>!kt.toolCall.providerExecuted),Ho=St.filter(kt=>kt.toolCall.providerExecuted);let Pt;const Lo=new ReadableStream({start(kt){Pt=kt}});ie.addStream(Lo);try{for(const Tt of[...aa,...Ho])Pt?.enqueue({type:"tool-output-denied",toolCallId:Tt.toolCall.toolCallId,toolName:Tt.toolCall.toolName});const kt=[];if(await Promise.all(Ln.map(async Tt=>{const Le=await K0({toolCall:Tt.toolCall,tools:w,tracer:Hn,telemetry:a,messages:nt,abortSignal:u,experimental_context:se,onPreliminaryToolResult:fn=>{Pt?.enqueue(fn)}});Le!=null&&(Pt?.enqueue(Le),kt.push(Le))})),Ke.length>0&&$e.push({role:"tool",content:Ke.map(Tt=>({type:"tool-approval-response",approvalId:Tt.approvalResponse.approvalId,approved:Tt.approvalResponse.approved,reason:Tt.approvalResponse.reason,providerExecuted:!0}))}),kt.length>0||aa.length>0){const Tt=[];for(const Le of kt)Tt.push({type:"tool-result",toolCallId:Le.toolCallId,toolName:Le.toolName,output:await Ts({toolCallId:Le.toolCallId,input:Le.input,tool:w?.[Le.toolName],output:Le.type==="tool-result"?Le.output:Le.error,errorMode:Le.type==="tool-error"?"json":"none"})});for(const Le of aa)Tt.push({type:"tool-result",toolCallId:Le.toolCall.toolCallId,toolName:Le.toolCall.toolName,output:{type:"execution-denied",reason:Le.approvalResponse.reason}});$e.push({role:"tool",content:Tt})}}finally{Pt?.close()}}P.push(...$e);async function de({currentStep:Ke,responseMessages:Ln,usage:aa}){var Ho,Pt,Lo,kt,Tt,Le;const fn=ie.includeRawChunks,Jt=d!=null?setTimeout(()=>p.abort(),d):void 0;let ka;function Hs(){m!=null&&(ka!=null&&clearTimeout(ka),ka=setTimeout(()=>h.abort(),m))}function Ls(){ka!=null&&(clearTimeout(ka),ka=void 0)}function Go(){Jt!=null&&clearTimeout(Jt)}k=new ql;const oa=[...nt,...Ln],Nt=await ne?.({model:t,steps:re,stepNumber:re.length,messages:oa,experimental_context:se}),nn=B0((Ho=Nt?.model)!=null?Ho:t),vo=await fR({prompt:{system:(Pt=Nt?.system)!=null?Pt:Ze.system,messages:(Lo=Nt?.messages)!=null?Lo:oa},supportedUrls:await nn.supportedUrls,download:te}),{toolChoice:pa,tools:Li}=await yR({tools:w,toolChoice:(kt=Nt?.toolChoice)!=null?kt:z,activeTools:(Tt=Nt?.activeTools)!=null?Tt:N});se=(Le=Nt?.experimental_context)!=null?Le:se;const tr=Wd(W,Nt?.providerOptions),{result:{stream:Gi,response:Da,request:nr},doStreamSpan:ma,startTimestampMs:Vi}=await An(()=>Ad({name:"ai.streamText.doStream",attributes:Mi({telemetry:a,attributes:{...xd({operationId:"ai.streamText.doStream",telemetry:a}),...R,"ai.model.provider":nn.provider,"ai.model.id":nn.modelId,"ai.prompt.messages":{input:()=>UR(vo)},"ai.prompt.tools":{input:()=>Li?.map(_e=>JSON.stringify(_e))},"ai.prompt.toolChoice":{input:()=>pa!=null?JSON.stringify(pa):void 0},"gen_ai.system":nn.provider,"gen_ai.request.model":nn.modelId,"gen_ai.request.frequency_penalty":Vt.frequencyPenalty,"gen_ai.request.max_tokens":Vt.maxOutputTokens,"gen_ai.request.presence_penalty":Vt.presencePenalty,"gen_ai.request.stop_sequences":Vt.stopSequences,"gen_ai.request.temperature":Vt.temperature,"gen_ai.request.top_k":Vt.topK,"gen_ai.request.top_p":Vt.topP}}),tracer:Hn,endWhenDone:!1,fn:async _e=>({startTimestampMs:$(),doStreamSpan:_e,result:await nn.doStream({...Vt,tools:Li,toolChoice:pa,responseFormat:await x?.responseFormat,prompt:vo,providerOptions:tr,abortSignal:u,headers:i,includeRawChunks:fn})})})),ar=gM({tools:w,generatorStream:Gi,tracer:Hn,telemetry:a,system:y,messages:oa,repairToolCall:X,abortSignal:u,experimental_context:se,generateId:ge}),Yi=nr??{},ha=[],Ua=[];let Vo;const On={};let ft="other",Dt,Ut=hd(),go,or=!0,Cn={id:ge(),timestamp:new Date,modelId:t.modelId},Ji="";ie.addStream(ar.pipeThrough(new TransformStream({async transform(_e,wt){var Rn,Mn,ia,rt,st;if(Hs(),_e.type==="stream-start"){Vo=_e.warnings;return}if(or){const ht=$()-Vi;or=!1,ma.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":ht}),ma.setAttributes({"ai.response.msToFirstChunk":ht}),wt.enqueue({type:"start-step",request:Yi,warnings:Vo??[]})}const Yo=_e.type;switch(Yo){case"tool-approval-request":case"text-start":case"text-end":{wt.enqueue(_e);break}case"text-delta":{_e.delta.length>0&&(wt.enqueue({type:"text-delta",id:_e.id,text:_e.delta,providerMetadata:_e.providerMetadata}),Ji+=_e.delta);break}case"reasoning-start":case"reasoning-end":{wt.enqueue(_e);break}case"reasoning-delta":{wt.enqueue({type:"reasoning-delta",id:_e.id,text:_e.delta,providerMetadata:_e.providerMetadata});break}case"tool-call":{wt.enqueue(_e),ha.push(_e);break}case"tool-result":{wt.enqueue(_e),_e.preliminary||Ua.push(_e);break}case"tool-error":{wt.enqueue(_e),Ua.push(_e);break}case"response-metadata":{Cn={id:(Rn=_e.id)!=null?Rn:Cn.id,timestamp:(Mn=_e.timestamp)!=null?Mn:Cn.timestamp,modelId:(ia=_e.modelId)!=null?ia:Cn.modelId};break}case"finish":{Ut=_e.usage,ft=_e.finishReason,Dt=_e.rawFinishReason,go=_e.providerMetadata;const ht=$()-Vi;ma.addEvent("ai.stream.finish"),ma.setAttributes({"ai.response.msToFinish":ht,"ai.response.avgOutputTokensPerSecond":1e3*((rt=Ut.outputTokens)!=null?rt:0)/ht});break}case"file":{wt.enqueue(_e);break}case"source":{wt.enqueue(_e);break}case"tool-input-start":{On[_e.id]=_e.toolName;const ht=w?.[_e.toolName];ht?.onInputStart!=null&&await ht.onInputStart({toolCallId:_e.id,messages:oa,abortSignal:u,experimental_context:se}),wt.enqueue({..._e,dynamic:(st=_e.dynamic)!=null?st:ht?.type==="dynamic",title:ht?.title});break}case"tool-input-end":{delete On[_e.id],wt.enqueue(_e);break}case"tool-input-delta":{const ht=On[_e.id],Gn=w?.[ht];Gn?.onInputDelta!=null&&await Gn.onInputDelta({inputTextDelta:_e.delta,toolCallId:_e.id,messages:oa,abortSignal:u,experimental_context:se}),wt.enqueue(_e);break}case"error":{wt.enqueue(_e),ft="error";break}case"raw":{fn&&wt.enqueue(_e);break}default:{const ht=Yo;throw new Error(`Unknown chunk type: ${ht}`)}}},async flush(_e){const wt=ha.length>0?JSON.stringify(ha):void 0;try{ma.setAttributes(await Mi({telemetry:a,attributes:{"ai.response.finishReason":ft,"ai.response.text":{output:()=>Ji},"ai.response.toolCalls":{output:()=>wt},"ai.response.id":Cn.id,"ai.response.model":Cn.modelId,"ai.response.timestamp":Cn.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(go),"ai.usage.inputTokens":Ut.inputTokens,"ai.usage.outputTokens":Ut.outputTokens,"ai.usage.totalTokens":Ut.totalTokens,"ai.usage.reasoningTokens":Ut.reasoningTokens,"ai.usage.cachedInputTokens":Ut.cachedInputTokens,"gen_ai.response.finish_reasons":[ft],"gen_ai.response.id":Cn.id,"gen_ai.response.model":Cn.modelId,"gen_ai.usage.input_tokens":Ut.inputTokens,"gen_ai.usage.output_tokens":Ut.outputTokens}}))}catch{}finally{ma.end()}_e.enqueue({type:"finish-step",finishReason:ft,rawFinishReason:Dt,usage:Ut,providerMetadata:go,response:{...Cn,headers:Da?.headers}});const Rn=jR(aa,Ut);await k.promise;const Mn=ha.filter(rt=>rt.providerExecuted!==!0),ia=Ua.filter(rt=>rt.providerExecuted!==!0);for(const rt of ha){if(rt.providerExecuted!==!0)continue;const st=w?.[rt.toolName];st?.type==="provider"&&st.supportsDeferredResults&&(Ua.some(ht=>ht.type==="tool-result"&&ht.toolCallId===rt.toolCallId)||Q.set(rt.toolCallId,{toolName:rt.toolName}))}for(const rt of Ua)rt.type==="tool-result"&&Q.delete(rt.toolCallId);if(Go(),Ls(),(Mn.length>0&&ia.length===Mn.length||Q.size>0)&&!await tM({stopConditions:K,steps:re})){Ln.push(...await Dg({content:re[re.length-1].content,tools:w}));try{await de({currentStep:Ke+1,responseMessages:Ln,usage:Rn})}catch(rt){_e.enqueue({type:"error",error:rt}),ie.closeStream()}}else _e.enqueue({type:"finish",finishReason:ft,rawFinishReason:Dt,totalUsage:Rn}),ie.closeStream()}})))}await de({currentStep:0,responseMessages:$e,usage:hd()})}}).catch(Me=>{ie.addStream(new ReadableStream({start(Ze){Ze.enqueue({type:"error",error:Me}),Ze.close()}})),ie.closeStream()})}get steps(){return this.consumeStream(),this._steps.promise}get finalStep(){return this.steps.then(t=>t[t.length-1])}get content(){return this.finalStep.then(t=>t.content)}get warnings(){return this.finalStep.then(t=>t.warnings)}get providerMetadata(){return this.finalStep.then(t=>t.providerMetadata)}get text(){return this.finalStep.then(t=>t.text)}get reasoningText(){return this.finalStep.then(t=>t.reasoningText)}get reasoning(){return this.finalStep.then(t=>t.reasoning)}get sources(){return this.finalStep.then(t=>t.sources)}get files(){return this.finalStep.then(t=>t.files)}get toolCalls(){return this.finalStep.then(t=>t.toolCalls)}get staticToolCalls(){return this.finalStep.then(t=>t.staticToolCalls)}get dynamicToolCalls(){return this.finalStep.then(t=>t.dynamicToolCalls)}get toolResults(){return this.finalStep.then(t=>t.toolResults)}get staticToolResults(){return this.finalStep.then(t=>t.staticToolResults)}get dynamicToolResults(){return this.finalStep.then(t=>t.dynamicToolResults)}get usage(){return this.finalStep.then(t=>t.usage)}get request(){return this.finalStep.then(t=>t.request)}get response(){return this.finalStep.then(t=>t.response)}get totalUsage(){return this.consumeStream(),this._totalUsage.promise}get finishReason(){return this.consumeStream(),this._finishReason.promise}get rawFinishReason(){return this.consumeStream(),this._rawFinishReason.promise}teeStream(){const[t,a]=this.baseStream.tee();return this.baseStream=a,t}get textStream(){return Zl(this.teeStream().pipeThrough(new TransformStream({transform({part:t},a){t.type==="text-delta"&&a.enqueue(t.text)}})))}get fullStream(){return Zl(this.teeStream().pipeThrough(new TransformStream({transform({part:t},a){a.enqueue(t)}})))}async consumeStream(t){var a;try{await mM({stream:this.fullStream,onError:t?.onError})}catch(i){(a=t?.onError)==null||a.call(t,i)}}get experimental_partialOutputStream(){return this.partialOutputStream}get partialOutputStream(){return Zl(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:t},a){t!=null&&a.enqueue(t)}})))}get elementStream(){var t,a,i;const l=(t=this.outputSpecification)==null?void 0:t.createElementStreamTransform();if(l==null)throw new Sn({functionality:`element streams in ${(i=(a=this.outputSpecification)==null?void 0:a.name)!=null?i:"text"} mode`});return Zl(this.teeStream().pipeThrough(l))}get output(){return this.finalStep.then(t=>{var a;return((a=this.outputSpecification)!=null?a:Od()).parseCompleteOutput({text:t.text},{response:t.response,usage:t.usage,finishReason:t.finishReason})})}toUIMessageStream({originalMessages:t,generateMessageId:a,onFinish:i,messageMetadata:l,sendReasoning:s=!0,sendSources:u=!1,sendStart:d=!0,sendFinish:p=!0,onError:m=jo}={}){const h=a!=null?lM({originalMessages:t,responseMessageId:a}):void 0,y=b=>{var w;const z=(w=this.tools)==null?void 0:w[b.toolName];return z==null?b.dynamic:z?.type==="dynamic"?!0:void 0},T=this.fullStream.pipeThrough(new TransformStream({transform:async(b,w)=>{const z=l?.({part:b}),O=b.type;switch(O){case"text-start":{w.enqueue({type:"text-start",id:b.id,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"text-delta":{w.enqueue({type:"text-delta",id:b.id,delta:b.text,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"text-end":{w.enqueue({type:"text-end",id:b.id,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"reasoning-start":{w.enqueue({type:"reasoning-start",id:b.id,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"reasoning-delta":{s&&w.enqueue({type:"reasoning-delta",id:b.id,delta:b.text,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"reasoning-end":{w.enqueue({type:"reasoning-end",id:b.id,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"file":{w.enqueue({type:"file",mediaType:b.file.mediaType,url:`data:${b.file.mediaType};base64,${b.file.base64}`});break}case"source":{u&&b.sourceType==="url"&&w.enqueue({type:"source-url",sourceId:b.id,url:b.url,title:b.title,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}}),u&&b.sourceType==="document"&&w.enqueue({type:"source-document",sourceId:b.id,mediaType:b.mediaType,title:b.title,filename:b.filename,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"tool-input-start":{const N=y(b);w.enqueue({type:"tool-input-start",toolCallId:b.id,toolName:b.toolName,...b.providerExecuted!=null?{providerExecuted:b.providerExecuted}:{},...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{},...N!=null?{dynamic:N}:{},...b.title!=null?{title:b.title}:{}});break}case"tool-input-delta":{w.enqueue({type:"tool-input-delta",toolCallId:b.id,inputTextDelta:b.delta});break}case"tool-call":{const N=y(b);b.invalid?w.enqueue({type:"tool-input-error",toolCallId:b.toolCallId,toolName:b.toolName,input:b.input,...b.providerExecuted!=null?{providerExecuted:b.providerExecuted}:{},...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{},...N!=null?{dynamic:N}:{},errorText:m(b.error),...b.title!=null?{title:b.title}:{}}):w.enqueue({type:"tool-input-available",toolCallId:b.toolCallId,toolName:b.toolName,input:b.input,...b.providerExecuted!=null?{providerExecuted:b.providerExecuted}:{},...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{},...N!=null?{dynamic:N}:{},...b.title!=null?{title:b.title}:{}});break}case"tool-approval-request":{w.enqueue({type:"tool-approval-request",approvalId:b.approvalId,toolCallId:b.toolCall.toolCallId});break}case"tool-result":{const N=y(b);w.enqueue({type:"tool-output-available",toolCallId:b.toolCallId,output:b.output,...b.providerExecuted!=null?{providerExecuted:b.providerExecuted}:{},...b.preliminary!=null?{preliminary:b.preliminary}:{},...N!=null?{dynamic:N}:{}});break}case"tool-error":{const N=y(b);w.enqueue({type:"tool-output-error",toolCallId:b.toolCallId,errorText:m(b.error),...b.providerExecuted!=null?{providerExecuted:b.providerExecuted}:{},...N!=null?{dynamic:N}:{}});break}case"tool-output-denied":{w.enqueue({type:"tool-output-denied",toolCallId:b.toolCallId});break}case"error":{w.enqueue({type:"error",errorText:m(b.error)});break}case"start-step":{w.enqueue({type:"start-step"});break}case"finish-step":{w.enqueue({type:"finish-step"});break}case"start":{d&&w.enqueue({type:"start",...z!=null?{messageMetadata:z}:{},...h!=null?{messageId:h}:{}});break}case"finish":{p&&w.enqueue({type:"finish",finishReason:b.finishReason,...z!=null?{messageMetadata:z}:{}});break}case"abort":{w.enqueue(b);break}case"tool-input-end":break;case"raw":break;default:{const N=O;throw new Error(`Unknown chunk type: ${N}`)}}z!=null&&O!=="start"&&O!=="finish"&&w.enqueue({type:"message-metadata",messageMetadata:z})}}));return Zl(fM({stream:T,messageId:h??a?.(),originalMessages:t,onFinish:i,onError:m}))}pipeUIMessageStreamToResponse(t,{originalMessages:a,generateMessageId:i,onFinish:l,messageMetadata:s,sendReasoning:u,sendSources:d,sendFinish:p,sendStart:m,onError:h,...y}={}){pM({response:t,stream:this.toUIMessageStream({originalMessages:a,generateMessageId:i,onFinish:l,messageMetadata:s,sendReasoning:u,sendSources:d,sendFinish:p,sendStart:m,onError:h}),...y})}pipeTextStreamToResponse(t,a){oM({response:t,textStream:this.textStream,...a})}toUIMessageStreamResponse({originalMessages:t,generateMessageId:a,onFinish:i,messageMetadata:l,sendReasoning:s,sendSources:u,sendFinish:d,sendStart:p,onError:m,...h}={}){return iM({stream:this.toUIMessageStream({originalMessages:t,generateMessageId:a,onFinish:i,messageMetadata:l,sendReasoning:s,sendSources:u,sendFinish:d,sendStart:p,onError:m}),...h})}toTextStreamResponse(t){return aM({textStream:this.textStream,...t})}};Fl({prefix:"aiobj",size:24});Fl({prefix:"aiobj",size:24});var TM="3.0.10",wM=ye(()=>ve(S({error:S({code:D().nullable(),message:v(),status:v()})}))),Pl=co({errorSchema:wM,errorToMessage:t=>t.error.message}),EM=ye(()=>ve(S({outputDimensionality:D().optional(),taskType:Ae(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),xM=class{constructor(t,a){this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=t,this.config=a}get provider(){return this.config.provider}async doEmbed({values:t,headers:a,abortSignal:i,providerOptions:l}){const s=await En({provider:"google",providerOptions:l,schema:EM});if(t.length>this.maxEmbeddingsPerCall)throw new xy({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});const u=It(await Qt(this.config.headers),a);if(t.length===1){const{responseHeaders:h,value:y,rawValue:T}=await Zt({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:u,body:{model:`models/${this.modelId}`,content:{parts:[{text:t[0]}]},outputDimensionality:s?.outputDimensionality,taskType:s?.taskType},failedResponseHandler:Pl,successfulResponseHandler:Kt(OM),abortSignal:i,fetch:this.config.fetch});return{warnings:[],embeddings:[y.embedding.values],usage:void 0,response:{headers:h,body:T}}}const{responseHeaders:d,value:p,rawValue:m}=await Zt({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:u,body:{requests:t.map(h=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:h}]},outputDimensionality:s?.outputDimensionality,taskType:s?.taskType}))},failedResponseHandler:Pl,successfulResponseHandler:Kt(AM),abortSignal:i,fetch:this.config.fetch});return{warnings:[],embeddings:p.embeddings.map(h=>h.values),usage:void 0,response:{headers:d,body:m}}}},AM=ye(()=>ve(S({embeddings:F(S({values:F(D())}))}))),OM=ye(()=>ve(S({embedding:S({values:F(D())})})));function jg(t){var a,i,l,s;if(t==null)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};const u=(a=t.promptTokenCount)!=null?a:0,d=(i=t.candidatesTokenCount)!=null?i:0,p=(l=t.cachedContentTokenCount)!=null?l:0,m=(s=t.thoughtsTokenCount)!=null?s:0;return{inputTokens:{total:u,noCache:u-p,cacheRead:p,cacheWrite:void 0},outputTokens:{total:d+m,text:d,reasoning:m},raw:t}}function da(t,a=!0){if(t==null)return;if(CM(t))return a?void 0:typeof t=="object"&&t.description?{type:"object",description:t.description}:{type:"object"};if(typeof t=="boolean")return{type:"boolean",properties:{}};const{type:i,description:l,required:s,properties:u,items:d,allOf:p,anyOf:m,oneOf:h,format:y,const:T,minLength:b,enum:w}=t,z={};if(l&&(z.description=l),s&&(z.required=s),y&&(z.format=y),T!==void 0&&(z.enum=[T]),i)if(Array.isArray(i)){const O=i.includes("null"),N=i.filter(X=>X!=="null");N.length===0?z.type="null":(z.anyOf=N.map(X=>({type:X})),O&&(z.nullable=!0))}else z.type=i;if(w!==void 0&&(z.enum=w),u!=null&&(z.properties=Object.entries(u).reduce((O,[N,X])=>(O[N]=da(X,!1),O),{})),d&&(z.items=Array.isArray(d)?d.map(O=>da(O,!1)):da(d,!1)),p&&(z.allOf=p.map(O=>da(O,!1))),m)if(m.some(O=>typeof O=="object"&&O?.type==="null")){const O=m.filter(N=>!(typeof N=="object"&&N?.type==="null"));if(O.length===1){const N=da(O[0],!1);typeof N=="object"&&(z.nullable=!0,Object.assign(z,N))}else z.anyOf=O.map(N=>da(N,!1)),z.nullable=!0}else z.anyOf=m.map(O=>da(O,!1));return h&&(z.oneOf=h.map(O=>da(O,!1))),b!==void 0&&(z.minLength=b),z}function CM(t){return t!=null&&typeof t=="object"&&t.type==="object"&&(t.properties==null||Object.keys(t.properties).length===0)&&!t.additionalProperties}function RM(t,a){var i,l,s;const u=[],d=[];let p=!0;const m=(i=a?.isGemmaModel)!=null?i:!1,h=(l=a?.providerOptionsName)!=null?l:"google";for(const{role:y,content:T}of t)switch(y){case"system":{if(!p)throw new Sn({functionality:"system messages are only supported at the beginning of the conversation"});u.push({text:T});break}case"user":{p=!1;const b=[];for(const w of T)switch(w.type){case"text":{b.push({text:w.text});break}case"file":{const z=w.mediaType==="image/*"?"image/jpeg":w.mediaType;b.push(w.data instanceof URL?{fileData:{mimeType:z,fileUri:w.data.toString()}}:{inlineData:{mimeType:z,data:lo(w.data)}});break}}d.push({role:"user",parts:b});break}case"assistant":{p=!1,d.push({role:"model",parts:T.map(b=>{var w;const z=(w=b.providerOptions)==null?void 0:w[h],O=z?.thoughtSignature!=null?String(z.thoughtSignature):void 0;switch(b.type){case"text":return b.text.length===0?void 0:{text:b.text,thoughtSignature:O};case"reasoning":return b.text.length===0?void 0:{text:b.text,thought:!0,thoughtSignature:O};case"file":{if(b.data instanceof URL)throw new Sn({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:b.mediaType,data:lo(b.data)},thoughtSignature:O}}case"tool-call":return{functionCall:{name:b.toolName,args:b.input},thoughtSignature:O}}}).filter(b=>b!==void 0)});break}case"tool":{p=!1;const b=[];for(const w of T){if(w.type==="tool-approval-response")continue;const z=w.output;if(z.type==="content")for(const O of z.value)switch(O.type){case"text":b.push({functionResponse:{name:w.toolName,response:{name:w.toolName,content:O.text}}});break;case"image-data":b.push({inlineData:{mimeType:O.mediaType,data:O.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:b.push({text:JSON.stringify(O)});break}else b.push({functionResponse:{name:w.toolName,response:{name:w.toolName,content:z.type==="execution-denied"?(s=z.reason)!=null?s:"Tool execution denied.":z.value}}})}d.push({role:"user",parts:b});break}}if(m&&u.length>0&&d.length>0&&d[0].role==="user"){const y=u.map(T=>T.text).join(`

`);d[0].parts.unshift({text:y+`

`})}return{systemInstruction:u.length>0&&!m?{parts:u}:void 0,contents:d}}function Zg(t){return t.includes("/")?t:`models/${t}`}var $g=ye(()=>ve(S({responseModalities:F(Ae(["TEXT","IMAGE"])).optional(),thinkingConfig:S({thinkingBudget:D().optional(),includeThoughts:at().optional(),thinkingLevel:Ae(["minimal","low","medium","high"]).optional()}).optional(),cachedContent:v().optional(),structuredOutputs:at().optional(),safetySettings:F(S({category:Ae(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:Ae(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:Ae(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:at().optional(),labels:dt(v(),v()).optional(),mediaResolution:Ae(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:S({aspectRatio:Ae(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:Ae(["1K","2K","4K"]).optional()}).optional(),retrievalConfig:S({latLng:S({latitude:D(),longitude:D()}).optional()}).optional()})));function MM({tools:t,toolChoice:a,modelId:i}){var l;t=t?.length?t:void 0;const s=[],u=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(w=>w===i),d=i.includes("gemini-2")||i.includes("gemini-3")||u,p=i.includes("gemini-1.5-flash")&&!i.includes("-8b"),m=i.includes("gemini-2.5")||i.includes("gemini-3");if(t==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const h=t.some(w=>w.type==="function"),y=t.some(w=>w.type==="provider");if(h&&y&&s.push({type:"unsupported",feature:"combination of function and provider-defined tools"}),y){const w=[];return t.filter(O=>O.type==="provider").forEach(O=>{switch(O.id){case"google.google_search":d?w.push({googleSearch:{}}):p?w.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:O.args.mode,dynamicThreshold:O.args.dynamicThreshold}}}):w.push({googleSearchRetrieval:{}});break;case"google.enterprise_web_search":d?w.push({enterpriseWebSearch:{}}):s.push({type:"unsupported",feature:`provider-defined tool ${O.id}`,details:"Enterprise Web Search requires Gemini 2.0 or newer."});break;case"google.url_context":d?w.push({urlContext:{}}):s.push({type:"unsupported",feature:`provider-defined tool ${O.id}`,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":d?w.push({codeExecution:{}}):s.push({type:"unsupported",feature:`provider-defined tool ${O.id}`,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":m?w.push({fileSearch:{...O.args}}):s.push({type:"unsupported",feature:`provider-defined tool ${O.id}`,details:"The file search tool is only supported with Gemini 2.5 models and Gemini 3 models."});break;case"google.vertex_rag_store":d?w.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:O.args.ragCorpus},similarity_top_k:O.args.topK}}}):s.push({type:"unsupported",feature:`provider-defined tool ${O.id}`,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;case"google.google_maps":d?w.push({googleMaps:{}}):s.push({type:"unsupported",feature:`provider-defined tool ${O.id}`,details:"The Google Maps grounding tool is not supported with Gemini models other than Gemini 2 or newer."});break;default:s.push({type:"unsupported",feature:`provider-defined tool ${O.id}`});break}}),{tools:w.length>0?w:void 0,toolConfig:void 0,toolWarnings:s}}const T=[];for(const w of t)w.type==="function"?T.push({name:w.name,description:(l=w.description)!=null?l:"",parameters:da(w.inputSchema)}):s.push({type:"unsupported",feature:`function tool ${w.name}`});if(a==null)return{tools:[{functionDeclarations:T}],toolConfig:void 0,toolWarnings:s};const b=a.type;switch(b){case"auto":return{tools:[{functionDeclarations:T}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:[{functionDeclarations:T}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:[{functionDeclarations:T}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:[{functionDeclarations:T}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[a.toolName]}},toolWarnings:s};default:{const w=b;throw new Sn({functionality:`tool choice type: ${w}`})}}}function Bg({finishReason:t,hasToolCalls:a}){switch(t){case"STOP":return a?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"MALFORMED_FUNCTION_CALL":return"error";default:return"other"}}var NM=class{constructor(t,a){this.specificationVersion="v3";var i;this.modelId=t,this.config=a,this.generateId=(i=a.generateId)!=null?i:Gt}get provider(){return this.config.provider}get supportedUrls(){var t,a,i;return(i=(a=(t=this.config).supportedUrls)==null?void 0:a.call(t))!=null?i:{}}async getArgs({prompt:t,maxOutputTokens:a,temperature:i,topP:l,topK:s,frequencyPenalty:u,presencePenalty:d,stopSequences:p,responseFormat:m,seed:h,tools:y,toolChoice:T,providerOptions:b}){var w;const z=[],O=this.config.provider.includes("vertex")?"vertex":"google";let N=await En({provider:O,providerOptions:b,schema:$g});N==null&&O!=="google"&&(N=await En({provider:"google",providerOptions:b,schema:$g})),y?.some($=>$.type==="provider"&&$.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&z.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});const X=this.modelId.toLowerCase().startsWith("gemma-"),{contents:K,systemInstruction:x}=RM(t,{isGemmaModel:X,providerOptionsName:O}),{tools:W,toolConfig:ne,toolWarnings:E}=MM({tools:y,toolChoice:T,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:a,temperature:i,topK:s,topP:l,frequencyPenalty:u,presencePenalty:d,stopSequences:p,seed:h,responseMimeType:m?.type==="json"?"application/json":void 0,responseSchema:m?.type==="json"&&m.schema!=null&&((w=N?.structuredOutputs)==null||w)?da(m.schema):void 0,...N?.audioTimestamp&&{audioTimestamp:N.audioTimestamp},responseModalities:N?.responseModalities,thinkingConfig:N?.thinkingConfig,...N?.mediaResolution&&{mediaResolution:N.mediaResolution},...N?.imageConfig&&{imageConfig:N.imageConfig}},contents:K,systemInstruction:X?void 0:x,safetySettings:N?.safetySettings,tools:W,toolConfig:N?.retrievalConfig?{...ne,retrievalConfig:N.retrievalConfig}:ne,cachedContent:N?.cachedContent,labels:N?.labels},warnings:[...z,...E],providerOptionsName:O}}async doGenerate(t){var a,i,l,s,u,d,p,m,h;const{args:y,warnings:T,providerOptionsName:b}=await this.getArgs(t),w=It(await Qt(this.config.headers),t.headers),{responseHeaders:z,value:O,rawValue:N}=await Zt({url:`${this.config.baseURL}/${Zg(this.modelId)}:generateContent`,headers:w,body:y,failedResponseHandler:Pl,successfulResponseHandler:Kt(IM),abortSignal:t.abortSignal,fetch:this.config.fetch}),X=O.candidates[0],K=[],x=(i=(a=X.content)==null?void 0:a.parts)!=null?i:[],W=O.usageMetadata;let ne;for(const $ of x)if("executableCode"in $&&((l=$.executableCode)!=null&&l.code)){const ge=this.config.generateId();ne=ge,K.push({type:"tool-call",toolCallId:ge,toolName:"code_execution",input:JSON.stringify($.executableCode),providerExecuted:!0})}else"codeExecutionResult"in $&&$.codeExecutionResult?(K.push({type:"tool-result",toolCallId:ne,toolName:"code_execution",result:{outcome:$.codeExecutionResult.outcome,output:$.codeExecutionResult.output}}),ne=void 0):"text"in $&&$.text!=null&&$.text.length>0?K.push({type:$.thought===!0?"reasoning":"text",text:$.text,providerMetadata:$.thoughtSignature?{[b]:{thoughtSignature:$.thoughtSignature}}:void 0}):"functionCall"in $?K.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:$.functionCall.name,input:JSON.stringify($.functionCall.args),providerMetadata:$.thoughtSignature?{[b]:{thoughtSignature:$.thoughtSignature}}:void 0}):"inlineData"in $&&K.push({type:"file",data:$.inlineData.data,mediaType:$.inlineData.mimeType,providerMetadata:$.thoughtSignature?{[b]:{thoughtSignature:$.thoughtSignature}}:void 0});const E=(s=Hg({groundingMetadata:X.groundingMetadata,generateId:this.config.generateId}))!=null?s:[];for(const $ of E)K.push($);return{content:K,finishReason:{unified:Bg({finishReason:X.finishReason,hasToolCalls:K.some($=>$.type==="tool-call"&&!$.providerExecuted)}),raw:(u=X.finishReason)!=null?u:void 0},usage:jg(W),warnings:T,providerMetadata:{[b]:{promptFeedback:(d=O.promptFeedback)!=null?d:null,groundingMetadata:(p=X.groundingMetadata)!=null?p:null,urlContextMetadata:(m=X.urlContextMetadata)!=null?m:null,safetyRatings:(h=X.safetyRatings)!=null?h:null,usageMetadata:W??null}},request:{body:y},response:{headers:z,body:N}}}async doStream(t){const{args:a,warnings:i,providerOptionsName:l}=await this.getArgs(t),s=It(await Qt(this.config.headers),t.headers),{responseHeaders:u,value:d}=await Zt({url:`${this.config.baseURL}/${Zg(this.modelId)}:streamGenerateContent?alt=sse`,headers:s,body:a,failedResponseHandler:Pl,successfulResponseHandler:Wl(kM),abortSignal:t.abortSignal,fetch:this.config.fetch});let p={unified:"other",raw:void 0},m,h;const y=this.config.generateId;let T=!1,b=null,w=null,z=0;const O=new Set;let N;return{stream:d.pipeThrough(new TransformStream({start(X){X.enqueue({type:"stream-start",warnings:i})},transform(X,K){var x,W,ne,E,$,ge,le;if(t.includeRawChunks&&K.enqueue({type:"raw",rawValue:X.rawValue}),!X.success){K.enqueue({type:"error",error:X.error});return}const ke=X.value,ae=ke.usageMetadata;ae!=null&&(m=ae);const ee=(x=ke.candidates)==null?void 0:x[0];if(ee==null)return;const ue=ee.content,se=Hg({groundingMetadata:ee.groundingMetadata,generateId:y});if(se!=null)for(const te of se)te.sourceType==="url"&&!O.has(te.url)&&(O.add(te.url),K.enqueue(te));if(ue!=null){const te=(W=ue.parts)!=null?W:[];for(const B of te)if("executableCode"in B&&((ne=B.executableCode)!=null&&ne.code)){const P=y();N=P,K.enqueue({type:"tool-call",toolCallId:P,toolName:"code_execution",input:JSON.stringify(B.executableCode),providerExecuted:!0})}else if("codeExecutionResult"in B&&B.codeExecutionResult){const P=N;P&&(K.enqueue({type:"tool-result",toolCallId:P,toolName:"code_execution",result:{outcome:B.codeExecutionResult.outcome,output:B.codeExecutionResult.output}}),N=void 0)}else"text"in B&&B.text!=null&&B.text.length>0?B.thought===!0?(b!==null&&(K.enqueue({type:"text-end",id:b}),b=null),w===null&&(w=String(z++),K.enqueue({type:"reasoning-start",id:w,providerMetadata:B.thoughtSignature?{[l]:{thoughtSignature:B.thoughtSignature}}:void 0})),K.enqueue({type:"reasoning-delta",id:w,delta:B.text,providerMetadata:B.thoughtSignature?{[l]:{thoughtSignature:B.thoughtSignature}}:void 0})):(w!==null&&(K.enqueue({type:"reasoning-end",id:w}),w=null),b===null&&(b=String(z++),K.enqueue({type:"text-start",id:b,providerMetadata:B.thoughtSignature?{[l]:{thoughtSignature:B.thoughtSignature}}:void 0})),K.enqueue({type:"text-delta",id:b,delta:B.text,providerMetadata:B.thoughtSignature?{[l]:{thoughtSignature:B.thoughtSignature}}:void 0})):"inlineData"in B&&K.enqueue({type:"file",mediaType:B.inlineData.mimeType,data:B.inlineData.data});const k=zM({parts:ue.parts,generateId:y,providerOptionsName:l});if(k!=null)for(const B of k)K.enqueue({type:"tool-input-start",id:B.toolCallId,toolName:B.toolName,providerMetadata:B.providerMetadata}),K.enqueue({type:"tool-input-delta",id:B.toolCallId,delta:B.args,providerMetadata:B.providerMetadata}),K.enqueue({type:"tool-input-end",id:B.toolCallId,providerMetadata:B.providerMetadata}),K.enqueue({type:"tool-call",toolCallId:B.toolCallId,toolName:B.toolName,input:B.args,providerMetadata:B.providerMetadata}),T=!0}ee.finishReason!=null&&(p={unified:Bg({finishReason:ee.finishReason,hasToolCalls:T}),raw:ee.finishReason},h={[l]:{promptFeedback:(E=ke.promptFeedback)!=null?E:null,groundingMetadata:($=ee.groundingMetadata)!=null?$:null,urlContextMetadata:(ge=ee.urlContextMetadata)!=null?ge:null,safetyRatings:(le=ee.safetyRatings)!=null?le:null}},ae!=null&&(h[l].usageMetadata=ae))},flush(X){b!==null&&X.enqueue({type:"text-end",id:b}),w!==null&&X.enqueue({type:"reasoning-end",id:w}),X.enqueue({type:"finish",finishReason:p,usage:jg(m),providerMetadata:h})}})),response:{headers:u},request:{body:a}}}};function zM({parts:t,generateId:a,providerOptionsName:i}){const l=t?.filter(s=>"functionCall"in s);return l==null||l.length===0?void 0:l.map(s=>({type:"tool-call",toolCallId:a(),toolName:s.functionCall.name,args:JSON.stringify(s.functionCall.args),providerMetadata:s.thoughtSignature?{[i]:{thoughtSignature:s.thoughtSignature}}:void 0}))}function Hg({groundingMetadata:t,generateId:a}){var i,l,s,u,d;if(!t?.groundingChunks)return;const p=[];for(const m of t.groundingChunks)if(m.web!=null)p.push({type:"source",sourceType:"url",id:a(),url:m.web.uri,title:(i=m.web.title)!=null?i:void 0});else if(m.retrievedContext!=null){const h=m.retrievedContext.uri,y=m.retrievedContext.fileSearchStore;if(h&&(h.startsWith("http://")||h.startsWith("https://")))p.push({type:"source",sourceType:"url",id:a(),url:h,title:(l=m.retrievedContext.title)!=null?l:void 0});else if(h){const T=(s=m.retrievedContext.title)!=null?s:"Unknown Document";let b="application/octet-stream",w;h.endsWith(".pdf")?(b="application/pdf",w=h.split("/").pop()):h.endsWith(".txt")?(b="text/plain",w=h.split("/").pop()):h.endsWith(".docx")?(b="application/vnd.openxmlformats-officedocument.wordprocessingml.document",w=h.split("/").pop()):h.endsWith(".doc")?(b="application/msword",w=h.split("/").pop()):(h.match(/\.(md|markdown)$/)&&(b="text/markdown"),w=h.split("/").pop()),p.push({type:"source",sourceType:"document",id:a(),mediaType:b,title:T,filename:w})}else if(y){const T=(u=m.retrievedContext.title)!=null?u:"Unknown Document";p.push({type:"source",sourceType:"document",id:a(),mediaType:"application/octet-stream",title:T,filename:y.split("/").pop()})}}else m.maps!=null&&m.maps.uri&&p.push({type:"source",sourceType:"url",id:a(),url:m.maps.uri,title:(d=m.maps.title)!=null?d:void 0});return p.length>0?p:void 0}var tb=()=>S({webSearchQueries:F(v()).nullish(),retrievalQueries:F(v()).nullish(),searchEntryPoint:S({renderedContent:v()}).nullish(),groundingChunks:F(S({web:S({uri:v(),title:v().nullish()}).nullish(),retrievedContext:S({uri:v().nullish(),title:v().nullish(),text:v().nullish(),fileSearchStore:v().nullish()}).nullish(),maps:S({uri:v().nullish(),title:v().nullish(),text:v().nullish(),placeId:v().nullish()}).nullish()})).nullish(),groundingSupports:F(S({segment:S({startIndex:D().nullish(),endIndex:D().nullish(),text:v().nullish()}),segment_text:v().nullish(),groundingChunkIndices:F(D()).nullish(),supportChunkIndices:F(D()).nullish(),confidenceScores:F(D()).nullish(),confidenceScore:F(D()).nullish()})).nullish(),retrievalMetadata:Ce([S({webDynamicRetrievalScore:D()}),S({})]).nullish()}),nb=()=>S({parts:F(Ce([S({functionCall:S({name:v(),args:Pn()}),thoughtSignature:v().nullish()}),S({inlineData:S({mimeType:v(),data:v()}),thoughtSignature:v().nullish()}),S({executableCode:S({language:v(),code:v()}).nullish(),codeExecutionResult:S({outcome:v(),output:v()}).nullish(),text:v().nullish(),thought:at().nullish(),thoughtSignature:v().nullish()})])).nullish()}),Ds=()=>S({category:v().nullish(),probability:v().nullish(),probabilityScore:D().nullish(),severity:v().nullish(),severityScore:D().nullish(),blocked:at().nullish()}),ab=S({cachedContentTokenCount:D().nullish(),thoughtsTokenCount:D().nullish(),promptTokenCount:D().nullish(),candidatesTokenCount:D().nullish(),totalTokenCount:D().nullish(),trafficType:v().nullish()}),ob=()=>S({urlMetadata:F(S({retrievedUrl:v(),urlRetrievalStatus:v()}))}),IM=ye(()=>ve(S({candidates:F(S({content:nb().nullish().or(S({}).strict()),finishReason:v().nullish(),safetyRatings:F(Ds()).nullish(),groundingMetadata:tb().nullish(),urlContextMetadata:ob().nullish()})),usageMetadata:ab.nullish(),promptFeedback:S({blockReason:v().nullish(),safetyRatings:F(Ds()).nullish()}).nullish()}))),kM=ye(()=>ve(S({candidates:F(S({content:nb().nullish(),finishReason:v().nullish(),safetyRatings:F(Ds()).nullish(),groundingMetadata:tb().nullish(),urlContextMetadata:ob().nullish()})).nullish(),usageMetadata:ab.nullish(),promptFeedback:S({blockReason:v().nullish(),safetyRatings:F(Ds()).nullish()}).nullish()}))),DM=ta({id:"google.code_execution",inputSchema:S({language:v().describe("The programming language of the code."),code:v().describe("The code to be executed.")}),outputSchema:S({outcome:v().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:v().describe("The output from the code execution.")})}),UM=Hi({id:"google.enterprise_web_search",inputSchema:ye(()=>ve(S({})))}),qM=S({fileSearchStoreNames:F(v()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:D().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:v().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),jM=ye(()=>ve(qM)),ZM=Hi({id:"google.file_search",inputSchema:jM}),$M=Hi({id:"google.google_maps",inputSchema:ye(()=>ve(S({})))}),BM=Hi({id:"google.google_search",inputSchema:ye(()=>ve(S({mode:Ae(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:D().default(1)})))}),HM=Hi({id:"google.url_context",inputSchema:ye(()=>ve(S({})))}),LM=Hi({id:"google.vertex_rag_store",inputSchema:S({ragCorpus:v(),topK:D().optional()})}),GM={googleSearch:BM,enterpriseWebSearch:UM,googleMaps:$M,urlContext:HM,fileSearch:ZM,codeExecution:DM,vertexRagStore:LM},VM=class{constructor(t,a,i){this.modelId=t,this.settings=a,this.config=i,this.specificationVersion="v3"}get maxImagesPerCall(){var t;return(t=this.settings.maxImagesPerCall)!=null?t:4}get provider(){return this.config.provider}async doGenerate(t){var a,i,l;const{prompt:s,n:u=1,size:d,aspectRatio:p="1:1",seed:m,providerOptions:h,headers:y,abortSignal:T,files:b,mask:w}=t,z=[];if(b!=null&&b.length>0)throw new Error("Google Generative AI does not support image editing. Use Google Vertex AI (@ai-sdk/google-vertex) for image editing capabilities.");if(w!=null)throw new Error("Google Generative AI does not support image editing with masks. Use Google Vertex AI (@ai-sdk/google-vertex) for image editing capabilities.");d!=null&&z.push({type:"unsupported",feature:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),m!=null&&z.push({type:"unsupported",feature:"seed",details:"This model does not support the `seed` option through this provider."});const O=await En({provider:"google",providerOptions:h,schema:JM}),N=(l=(i=(a=this.config._internal)==null?void 0:a.currentDate)==null?void 0:i.call(a))!=null?l:new Date,X={sampleCount:u};p!=null&&(X.aspectRatio=p),O&&Object.assign(X,O);const K={instances:[{prompt:s}],parameters:X},{responseHeaders:x,value:W}=await Zt({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:It(await Qt(this.config.headers),y),body:K,failedResponseHandler:Pl,successfulResponseHandler:Kt(YM),abortSignal:T,fetch:this.config.fetch});return{images:W.predictions.map(ne=>ne.bytesBase64Encoded),warnings:z??[],providerMetadata:{google:{images:W.predictions.map(ne=>({}))}},response:{timestamp:N,modelId:this.modelId,headers:x}}}},YM=ye(()=>ve(S({predictions:F(S({bytesBase64Encoded:v()})).default([])}))),JM=ye(()=>ve(S({personGeneration:Ae(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:Ae(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function ib(t={}){var a,i;const l=(a=Gd(t.baseURL))!=null?a:"https://generativelanguage.googleapis.com/v1beta",s=(i=t.name)!=null?i:"google.generative-ai",u=()=>$i({"x-goog-api-key":U_({apiKey:t.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...t.headers},`ai-sdk/google/${TM}`),d=y=>{var T;return new NM(y,{provider:s,baseURL:l,headers:u,generateId:(T=t.generateId)!=null?T:Gt,supportedUrls:()=>({"*":[new RegExp(`^${l}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:t.fetch})},p=y=>new xM(y,{provider:s,baseURL:l,headers:u,fetch:t.fetch}),m=(y,T={})=>new VM(y,T,{provider:s,baseURL:l,headers:u,fetch:t.fetch}),h=function(y){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return d(y)};return h.specificationVersion="v3",h.languageModel=d,h.chat=d,h.generativeAI=d,h.embedding=p,h.embeddingModel=p,h.textEmbedding=p,h.textEmbeddingModel=p,h.image=m,h.imageModel=m,h.tools=GM,h}ib();var ef=S({error:S({message:v(),type:v().nullish(),param:Tn().nullish(),code:Ce([v(),D()]).nullish()})}),ea=co({errorSchema:ef,errorToMessage:t=>t.error.message});function lb(t){const a=t.startsWith("o3")||t.startsWith("o4-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat"),i=t.startsWith("gpt-4")||t.startsWith("gpt-5-mini")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-nano")&&!t.startsWith("gpt-5-chat")||t.startsWith("o3")||t.startsWith("o4-mini"),l=t.startsWith("o1")||t.startsWith("o3")||t.startsWith("o4-mini")||t.startsWith("codex-mini")||t.startsWith("computer-use-preview")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat"),s=t.startsWith("gpt-5.1")||t.startsWith("gpt-5.2");return{supportsFlexProcessing:a,supportsPriorityProcessing:i,isReasoningModel:l,systemMessageMode:l?"developer":"system",supportsNonReasoningParameters:s}}function Lg(t){var a,i,l,s,u,d;if(t==null)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};const p=(a=t.prompt_tokens)!=null?a:0,m=(i=t.completion_tokens)!=null?i:0,h=(s=(l=t.prompt_tokens_details)==null?void 0:l.cached_tokens)!=null?s:0,y=(d=(u=t.completion_tokens_details)==null?void 0:u.reasoning_tokens)!=null?d:0;return{inputTokens:{total:p,noCache:p-h,cacheRead:h,cacheWrite:void 0},outputTokens:{total:m,text:m-y,reasoning:y},raw:t}}function XM({prompt:t,systemMessageMode:a="system"}){var i;const l=[],s=[];for(const{role:u,content:d}of t)switch(u){case"system":{switch(a){case"system":{l.push({role:"system",content:d});break}case"developer":{l.push({role:"developer",content:d});break}case"remove":{s.push({type:"other",message:"system messages are removed for this model"});break}default:{const p=a;throw new Error(`Unsupported system message mode: ${p}`)}}break}case"user":{if(d.length===1&&d[0].type==="text"){l.push({role:"user",content:d[0].text});break}l.push({role:"user",content:d.map((p,m)=>{var h,y,T;switch(p.type){case"text":return{type:"text",text:p.text};case"file":if(p.mediaType.startsWith("image/")){const b=p.mediaType==="image/*"?"image/jpeg":p.mediaType;return{type:"image_url",image_url:{url:p.data instanceof URL?p.data.toString():`data:${b};base64,${lo(p.data)}`,detail:(y=(h=p.providerOptions)==null?void 0:h.openai)==null?void 0:y.imageDetail}}}else if(p.mediaType.startsWith("audio/")){if(p.data instanceof URL)throw new Sn({functionality:"audio file parts with URLs"});switch(p.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:lo(p.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:lo(p.data),format:"mp3"}};default:throw new Sn({functionality:`audio content parts with media type ${p.mediaType}`})}}else if(p.mediaType==="application/pdf"){if(p.data instanceof URL)throw new Sn({functionality:"PDF file parts with URLs"});return{type:"file",file:typeof p.data=="string"&&p.data.startsWith("file-")?{file_id:p.data}:{filename:(T=p.filename)!=null?T:`part-${m}.pdf`,file_data:`data:application/pdf;base64,${lo(p.data)}`}}}else throw new Sn({functionality:`file part media type ${p.mediaType}`})}})});break}case"assistant":{let p="";const m=[];for(const h of d)switch(h.type){case"text":{p+=h.text;break}case"tool-call":{m.push({id:h.toolCallId,type:"function",function:{name:h.toolName,arguments:JSON.stringify(h.input)}});break}}l.push({role:"assistant",content:p,tool_calls:m.length>0?m:void 0});break}case"tool":{for(const p of d){if(p.type==="tool-approval-response")continue;const m=p.output;let h;switch(m.type){case"text":case"error-text":h=m.value;break;case"execution-denied":h=(i=m.reason)!=null?i:"Tool execution denied.";break;case"content":case"json":case"error-json":h=JSON.stringify(m.value);break}l.push({role:"tool",tool_call_id:p.toolCallId,content:h})}break}default:{const p=u;throw new Error(`Unsupported role: ${p}`)}}return{messages:l,warnings:s}}function vd({id:t,model:a,created:i}){return{id:t??void 0,modelId:a??void 0,timestamp:i?new Date(i*1e3):void 0}}function Gg(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"other"}}var QM=ye(()=>ve(S({id:v().nullish(),created:D().nullish(),model:v().nullish(),choices:F(S({message:S({role:Z("assistant").nullish(),content:v().nullish(),tool_calls:F(S({id:v().nullish(),type:Z("function"),function:S({name:v(),arguments:v()})})).nullish(),annotations:F(S({type:Z("url_citation"),url_citation:S({start_index:D(),end_index:D(),url:v(),title:v()})})).nullish()}),index:D(),logprobs:S({content:F(S({token:v(),logprob:D(),top_logprobs:F(S({token:v(),logprob:D()}))})).nullish()}).nullish(),finish_reason:v().nullish()})),usage:S({prompt_tokens:D().nullish(),completion_tokens:D().nullish(),total_tokens:D().nullish(),prompt_tokens_details:S({cached_tokens:D().nullish()}).nullish(),completion_tokens_details:S({reasoning_tokens:D().nullish(),accepted_prediction_tokens:D().nullish(),rejected_prediction_tokens:D().nullish()}).nullish()}).nullish()}))),KM=ye(()=>ve(Ce([S({id:v().nullish(),created:D().nullish(),model:v().nullish(),choices:F(S({delta:S({role:Ae(["assistant"]).nullish(),content:v().nullish(),tool_calls:F(S({index:D(),id:v().nullish(),type:Z("function").nullish(),function:S({name:v().nullish(),arguments:v().nullish()})})).nullish(),annotations:F(S({type:Z("url_citation"),url_citation:S({start_index:D(),end_index:D(),url:v(),title:v()})})).nullish()}).nullish(),logprobs:S({content:F(S({token:v(),logprob:D(),top_logprobs:F(S({token:v(),logprob:D()}))})).nullish()}).nullish(),finish_reason:v().nullish(),index:D()})),usage:S({prompt_tokens:D().nullish(),completion_tokens:D().nullish(),total_tokens:D().nullish(),prompt_tokens_details:S({cached_tokens:D().nullish()}).nullish(),completion_tokens_details:S({reasoning_tokens:D().nullish(),accepted_prediction_tokens:D().nullish(),rejected_prediction_tokens:D().nullish()}).nullish()}).nullish()}),ef]))),PM=ye(()=>ve(S({logitBias:dt(PA(),D()).optional(),logprobs:Ce([at(),D()]).optional(),parallelToolCalls:at().optional(),user:v().optional(),reasoningEffort:Ae(["none","minimal","low","medium","high","xhigh"]).optional(),maxCompletionTokens:D().optional(),store:at().optional(),metadata:dt(v().max(64),v().max(512)).optional(),prediction:dt(v(),Tn()).optional(),serviceTier:Ae(["auto","flex","priority","default"]).optional(),strictJsonSchema:at().optional(),textVerbosity:Ae(["low","medium","high"]).optional(),promptCacheKey:v().optional(),promptCacheRetention:Ae(["in_memory","24h"]).optional(),safetyIdentifier:v().optional(),systemMessageMode:Ae(["system","developer","remove"]).optional(),forceReasoning:at().optional()})));function FM({tools:t,toolChoice:a}){t=t?.length?t:void 0;const i=[];if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:i};const l=[];for(const u of t)u.type==="function"?l.push({type:"function",function:{name:u.name,description:u.description,parameters:u.inputSchema,...u.strict!=null?{strict:u.strict}:{}}}):i.push({type:"unsupported",feature:`tool type: ${u.type}`});if(a==null)return{tools:l,toolChoice:void 0,toolWarnings:i};const s=a.type;switch(s){case"auto":case"none":case"required":return{tools:l,toolChoice:s,toolWarnings:i};case"tool":return{tools:l,toolChoice:{type:"function",function:{name:a.toolName}},toolWarnings:i};default:{const u=s;throw new Sn({functionality:`tool choice type: ${u}`})}}}var WM=class{constructor(t,a){this.specificationVersion="v3",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=t,this.config=a}get provider(){return this.config.provider}async getArgs({prompt:t,maxOutputTokens:a,temperature:i,topP:l,topK:s,frequencyPenalty:u,presencePenalty:d,stopSequences:p,responseFormat:m,seed:h,tools:y,toolChoice:T,providerOptions:b}){var w,z,O,N,X;const K=[],x=(w=await En({provider:"openai",providerOptions:b,schema:PM}))!=null?w:{},W=lb(this.modelId),ne=(z=x.forceReasoning)!=null?z:W.isReasoningModel;s!=null&&K.push({type:"unsupported",feature:"topK"});const{messages:E,warnings:$}=XM({prompt:t,systemMessageMode:(O=x.systemMessageMode)!=null?O:ne?"developer":W.systemMessageMode});K.push(...$);const ge=(N=x.strictJsonSchema)!=null?N:!0,le={model:this.modelId,logit_bias:x.logitBias,logprobs:x.logprobs===!0||typeof x.logprobs=="number"?!0:void 0,top_logprobs:typeof x.logprobs=="number"?x.logprobs:typeof x.logprobs=="boolean"&&x.logprobs?0:void 0,user:x.user,parallel_tool_calls:x.parallelToolCalls,max_tokens:a,temperature:i,top_p:l,frequency_penalty:u,presence_penalty:d,response_format:m?.type==="json"?m.schema!=null?{type:"json_schema",json_schema:{schema:m.schema,strict:ge,name:(X=m.name)!=null?X:"response",description:m.description}}:{type:"json_object"}:void 0,stop:p,seed:h,verbosity:x.textVerbosity,max_completion_tokens:x.maxCompletionTokens,store:x.store,metadata:x.metadata,prediction:x.prediction,reasoning_effort:x.reasoningEffort,service_tier:x.serviceTier,prompt_cache_key:x.promptCacheKey,prompt_cache_retention:x.promptCacheRetention,safety_identifier:x.safetyIdentifier,messages:E};ne?((x.reasoningEffort!=="none"||!W.supportsNonReasoningParameters)&&(le.temperature!=null&&(le.temperature=void 0,K.push({type:"unsupported",feature:"temperature",details:"temperature is not supported for reasoning models"})),le.top_p!=null&&(le.top_p=void 0,K.push({type:"unsupported",feature:"topP",details:"topP is not supported for reasoning models"})),le.logprobs!=null&&(le.logprobs=void 0,K.push({type:"other",message:"logprobs is not supported for reasoning models"}))),le.frequency_penalty!=null&&(le.frequency_penalty=void 0,K.push({type:"unsupported",feature:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),le.presence_penalty!=null&&(le.presence_penalty=void 0,K.push({type:"unsupported",feature:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),le.logit_bias!=null&&(le.logit_bias=void 0,K.push({type:"other",message:"logitBias is not supported for reasoning models"})),le.top_logprobs!=null&&(le.top_logprobs=void 0,K.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),le.max_tokens!=null&&(le.max_completion_tokens==null&&(le.max_completion_tokens=le.max_tokens),le.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&le.temperature!=null&&(le.temperature=void 0,K.push({type:"unsupported",feature:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),x.serviceTier==="flex"&&!W.supportsFlexProcessing&&(K.push({type:"unsupported",feature:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),le.service_tier=void 0),x.serviceTier==="priority"&&!W.supportsPriorityProcessing&&(K.push({type:"unsupported",feature:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),le.service_tier=void 0);const{tools:ke,toolChoice:ae,toolWarnings:ee}=FM({tools:y,toolChoice:T});return{args:{...le,tools:ke,tool_choice:ae},warnings:[...K,...ee]}}async doGenerate(t){var a,i,l,s,u,d,p;const{args:m,warnings:h}=await this.getArgs(t),{responseHeaders:y,value:T,rawValue:b}=await Zt({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:It(this.config.headers(),t.headers),body:m,failedResponseHandler:ea,successfulResponseHandler:Kt(QM),abortSignal:t.abortSignal,fetch:this.config.fetch}),w=T.choices[0],z=[],O=w.message.content;O!=null&&O.length>0&&z.push({type:"text",text:O});for(const K of(a=w.message.tool_calls)!=null?a:[])z.push({type:"tool-call",toolCallId:(i=K.id)!=null?i:Gt(),toolName:K.function.name,input:K.function.arguments});for(const K of(l=w.message.annotations)!=null?l:[])z.push({type:"source",sourceType:"url",id:Gt(),url:K.url_citation.url,title:K.url_citation.title});const N=(s=T.usage)==null?void 0:s.completion_tokens_details;(u=T.usage)==null||u.prompt_tokens_details;const X={openai:{}};return N?.accepted_prediction_tokens!=null&&(X.openai.acceptedPredictionTokens=N?.accepted_prediction_tokens),N?.rejected_prediction_tokens!=null&&(X.openai.rejectedPredictionTokens=N?.rejected_prediction_tokens),((d=w.logprobs)==null?void 0:d.content)!=null&&(X.openai.logprobs=w.logprobs.content),{content:z,finishReason:{unified:Gg(w.finish_reason),raw:(p=w.finish_reason)!=null?p:void 0},usage:Lg(T.usage),request:{body:m},response:{...vd(T),headers:y,body:b},warnings:h,providerMetadata:X}}async doStream(t){const{args:a,warnings:i}=await this.getArgs(t),l={...a,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:s,value:u}=await Zt({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:It(this.config.headers(),t.headers),body:l,failedResponseHandler:ea,successfulResponseHandler:Wl(KM),abortSignal:t.abortSignal,fetch:this.config.fetch}),d=[];let p={unified:"other",raw:void 0},m,h=!1,y=!1;const T={openai:{}};return{stream:u.pipeThrough(new TransformStream({start(b){b.enqueue({type:"stream-start",warnings:i})},transform(b,w){var z,O,N,X,K,x,W,ne,E,$,ge,le,ke,ae,ee,ue,se;if(t.includeRawChunks&&w.enqueue({type:"raw",rawValue:b.rawValue}),!b.success){p={unified:"error",raw:void 0},w.enqueue({type:"error",error:b.error});return}const te=b.value;if("error"in te){p={unified:"error",raw:void 0},w.enqueue({type:"error",error:te.error});return}if(!h){const P=vd(te);Object.values(P).some(Boolean)&&(h=!0,w.enqueue({type:"response-metadata",...vd(te)}))}te.usage!=null&&(m=te.usage,((z=te.usage.completion_tokens_details)==null?void 0:z.accepted_prediction_tokens)!=null&&(T.openai.acceptedPredictionTokens=(O=te.usage.completion_tokens_details)==null?void 0:O.accepted_prediction_tokens),((N=te.usage.completion_tokens_details)==null?void 0:N.rejected_prediction_tokens)!=null&&(T.openai.rejectedPredictionTokens=(X=te.usage.completion_tokens_details)==null?void 0:X.rejected_prediction_tokens));const k=te.choices[0];if(k?.finish_reason!=null&&(p={unified:Gg(k.finish_reason),raw:k.finish_reason}),((K=k?.logprobs)==null?void 0:K.content)!=null&&(T.openai.logprobs=k.logprobs.content),k?.delta==null)return;const B=k.delta;if(B.content!=null&&(y||(w.enqueue({type:"text-start",id:"0"}),y=!0),w.enqueue({type:"text-delta",id:"0",delta:B.content})),B.tool_calls!=null)for(const P of B.tool_calls){const we=P.index;if(d[we]==null){if(P.type!=="function")throw new ad({data:P,message:"Expected 'function' type."});if(P.id==null)throw new ad({data:P,message:"Expected 'id' to be a string."});if(((x=P.function)==null?void 0:x.name)==null)throw new ad({data:P,message:"Expected 'function.name' to be a string."});w.enqueue({type:"tool-input-start",id:P.id,toolName:P.function.name}),d[we]={id:P.id,type:"function",function:{name:P.function.name,arguments:(W=P.function.arguments)!=null?W:""},hasFinished:!1};const C=d[we];((ne=C.function)==null?void 0:ne.name)!=null&&((E=C.function)==null?void 0:E.arguments)!=null&&(C.function.arguments.length>0&&w.enqueue({type:"tool-input-delta",id:C.id,delta:C.function.arguments}),eg(C.function.arguments)&&(w.enqueue({type:"tool-input-end",id:C.id}),w.enqueue({type:"tool-call",toolCallId:($=C.id)!=null?$:Gt(),toolName:C.function.name,input:C.function.arguments}),C.hasFinished=!0));continue}const ce=d[we];ce.hasFinished||(((ge=P.function)==null?void 0:ge.arguments)!=null&&(ce.function.arguments+=(ke=(le=P.function)==null?void 0:le.arguments)!=null?ke:""),w.enqueue({type:"tool-input-delta",id:ce.id,delta:(ae=P.function.arguments)!=null?ae:""}),((ee=ce.function)==null?void 0:ee.name)!=null&&((ue=ce.function)==null?void 0:ue.arguments)!=null&&eg(ce.function.arguments)&&(w.enqueue({type:"tool-input-end",id:ce.id}),w.enqueue({type:"tool-call",toolCallId:(se=ce.id)!=null?se:Gt(),toolName:ce.function.name,input:ce.function.arguments}),ce.hasFinished=!0))}if(B.annotations!=null)for(const P of B.annotations)w.enqueue({type:"source",sourceType:"url",id:Gt(),url:P.url_citation.url,title:P.url_citation.title})},flush(b){y&&b.enqueue({type:"text-end",id:"0"}),b.enqueue({type:"finish",finishReason:p,usage:Lg(m),...T!=null?{providerMetadata:T}:{}})}})),request:{body:l},response:{headers:s}}}};function Vg(t){var a,i,l,s;if(t==null)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};const u=(a=t.prompt_tokens)!=null?a:0,d=(i=t.completion_tokens)!=null?i:0;return{inputTokens:{total:(l=t.prompt_tokens)!=null?l:void 0,noCache:u,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:(s=t.completion_tokens)!=null?s:void 0,text:d,reasoning:void 0},raw:t}}function eN({prompt:t,user:a="user",assistant:i="assistant"}){let l="";t[0].role==="system"&&(l+=`${t[0].content}

`,t=t.slice(1));for(const{role:s,content:u}of t)switch(s){case"system":throw new Uo({message:"Unexpected system message in prompt: ${content}",prompt:t});case"user":{const d=u.map(p=>{if(p.type==="text")return p.text}).filter(Boolean).join("");l+=`${a}:
${d}

`;break}case"assistant":{const d=u.map(p=>{switch(p.type){case"text":return p.text;case"tool-call":throw new Sn({functionality:"tool-call messages"})}}).join("");l+=`${i}:
${d}

`;break}case"tool":throw new Sn({functionality:"tool messages"});default:{const d=s;throw new Error(`Unsupported role: ${d}`)}}return l+=`${i}:
`,{prompt:l,stopSequences:[`
${a}:`]}}function Yg({id:t,model:a,created:i}){return{id:t??void 0,modelId:a??void 0,timestamp:i!=null?new Date(i*1e3):void 0}}function Jg(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"other"}}var tN=ye(()=>ve(S({id:v().nullish(),created:D().nullish(),model:v().nullish(),choices:F(S({text:v(),finish_reason:v(),logprobs:S({tokens:F(v()),token_logprobs:F(D()),top_logprobs:F(dt(v(),D())).nullish()}).nullish()})),usage:S({prompt_tokens:D(),completion_tokens:D(),total_tokens:D()}).nullish()}))),nN=ye(()=>ve(Ce([S({id:v().nullish(),created:D().nullish(),model:v().nullish(),choices:F(S({text:v(),finish_reason:v().nullish(),index:D(),logprobs:S({tokens:F(v()),token_logprobs:F(D()),top_logprobs:F(dt(v(),D())).nullish()}).nullish()})),usage:S({prompt_tokens:D(),completion_tokens:D(),total_tokens:D()}).nullish()}),ef]))),Xg=ye(()=>ve(S({echo:at().optional(),logitBias:dt(v(),D()).optional(),suffix:v().optional(),user:v().optional(),logprobs:Ce([at(),D()]).optional()}))),aN=class{constructor(t,a){this.specificationVersion="v3",this.supportedUrls={},this.modelId=t,this.config=a}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:t,maxOutputTokens:a,temperature:i,topP:l,topK:s,frequencyPenalty:u,presencePenalty:d,stopSequences:p,responseFormat:m,tools:h,toolChoice:y,seed:T,providerOptions:b}){const w=[],z={...await En({provider:"openai",providerOptions:b,schema:Xg}),...await En({provider:this.providerOptionsName,providerOptions:b,schema:Xg})};s!=null&&w.push({type:"unsupported",feature:"topK"}),h?.length&&w.push({type:"unsupported",feature:"tools"}),y!=null&&w.push({type:"unsupported",feature:"toolChoice"}),m!=null&&m.type!=="text"&&w.push({type:"unsupported",feature:"responseFormat",details:"JSON response format is not supported."});const{prompt:O,stopSequences:N}=eN({prompt:t}),X=[...N??[],...p??[]];return{args:{model:this.modelId,echo:z.echo,logit_bias:z.logitBias,logprobs:z?.logprobs===!0?0:z?.logprobs===!1?void 0:z?.logprobs,suffix:z.suffix,user:z.user,max_tokens:a,temperature:i,top_p:l,frequency_penalty:u,presence_penalty:d,seed:T,prompt:O,stop:X.length>0?X:void 0},warnings:w}}async doGenerate(t){var a;const{args:i,warnings:l}=await this.getArgs(t),{responseHeaders:s,value:u,rawValue:d}=await Zt({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:It(this.config.headers(),t.headers),body:i,failedResponseHandler:ea,successfulResponseHandler:Kt(tN),abortSignal:t.abortSignal,fetch:this.config.fetch}),p=u.choices[0],m={openai:{}};return p.logprobs!=null&&(m.openai.logprobs=p.logprobs),{content:[{type:"text",text:p.text}],usage:Vg(u.usage),finishReason:{unified:Jg(p.finish_reason),raw:(a=p.finish_reason)!=null?a:void 0},request:{body:i},response:{...Yg(u),headers:s,body:d},providerMetadata:m,warnings:l}}async doStream(t){const{args:a,warnings:i}=await this.getArgs(t),l={...a,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:s,value:u}=await Zt({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:It(this.config.headers(),t.headers),body:l,failedResponseHandler:ea,successfulResponseHandler:Wl(nN),abortSignal:t.abortSignal,fetch:this.config.fetch});let d={unified:"other",raw:void 0};const p={openai:{}};let m,h=!0;return{stream:u.pipeThrough(new TransformStream({start(y){y.enqueue({type:"stream-start",warnings:i})},transform(y,T){if(t.includeRawChunks&&T.enqueue({type:"raw",rawValue:y.rawValue}),!y.success){d={unified:"error",raw:void 0},T.enqueue({type:"error",error:y.error});return}const b=y.value;if("error"in b){d={unified:"error",raw:void 0},T.enqueue({type:"error",error:b.error});return}h&&(h=!1,T.enqueue({type:"response-metadata",...Yg(b)}),T.enqueue({type:"text-start",id:"0"})),b.usage!=null&&(m=b.usage);const w=b.choices[0];w?.finish_reason!=null&&(d={unified:Jg(w.finish_reason),raw:w.finish_reason}),w?.logprobs!=null&&(p.openai.logprobs=w.logprobs),w?.text!=null&&w.text.length>0&&T.enqueue({type:"text-delta",id:"0",delta:w.text})},flush(y){h||y.enqueue({type:"text-end",id:"0"}),y.enqueue({type:"finish",finishReason:d,providerMetadata:p,usage:Vg(m)})}})),request:{body:l},response:{headers:s}}}},oN=ye(()=>ve(S({dimensions:D().optional(),user:v().optional()}))),iN=ye(()=>ve(S({data:F(S({embedding:F(D())})),usage:S({prompt_tokens:D()}).nullish()}))),lN=class{constructor(t,a){this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=t,this.config=a}get provider(){return this.config.provider}async doEmbed({values:t,headers:a,abortSignal:i,providerOptions:l}){var s;if(t.length>this.maxEmbeddingsPerCall)throw new xy({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});const u=(s=await En({provider:"openai",providerOptions:l,schema:oN}))!=null?s:{},{responseHeaders:d,value:p,rawValue:m}=await Zt({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:It(this.config.headers(),a),body:{model:this.modelId,input:t,encoding_format:"float",dimensions:u.dimensions,user:u.user},failedResponseHandler:ea,successfulResponseHandler:Kt(iN),abortSignal:i,fetch:this.config.fetch});return{warnings:[],embeddings:p.data.map(h=>h.embedding),usage:p.usage?{tokens:p.usage.prompt_tokens}:void 0,response:{headers:d,body:m}}}},Qg=ye(()=>ve(S({created:D().nullish(),data:F(S({b64_json:v(),revised_prompt:v().nullish()})),background:v().nullish(),output_format:v().nullish(),size:v().nullish(),quality:v().nullish(),usage:S({input_tokens:D().nullish(),output_tokens:D().nullish(),total_tokens:D().nullish(),input_tokens_details:S({image_tokens:D().nullish(),text_tokens:D().nullish()}).nullish()}).nullish()}))),rN={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10,"gpt-image-1-mini":10,"gpt-image-1.5":10},sN=["gpt-image-1-mini","gpt-image-1.5","gpt-image-1"];function uN(t){return sN.some(a=>t.startsWith(a))}var cN=class{constructor(t,a){this.modelId=t,this.config=a,this.specificationVersion="v3"}get maxImagesPerCall(){var t;return(t=rN[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:t,files:a,mask:i,n:l,size:s,aspectRatio:u,seed:d,providerOptions:p,headers:m,abortSignal:h}){var y,T,b,w,z,O,N,X,K,x,W;const ne=[];u!=null&&ne.push({type:"unsupported",feature:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),d!=null&&ne.push({type:"unsupported",feature:"seed"});const E=(b=(T=(y=this.config._internal)==null?void 0:y.currentDate)==null?void 0:T.call(y))!=null?b:new Date;if(a!=null){const{value:le,responseHeaders:ke}=await B_({url:this.config.url({path:"/images/edits",modelId:this.modelId}),headers:It(this.config.headers(),m),formData:iO({model:this.modelId,prompt:t,image:await Promise.all(a.map(ae=>ae.type==="file"?new Blob([ae.data instanceof Uint8Array?new Blob([ae.data],{type:ae.mediaType}):new Blob([Zi(ae.data)],{type:ae.mediaType})],{type:ae.mediaType}):z_(ae.url))),mask:i!=null?await dN(i):void 0,n:l,size:s,...(w=p.openai)!=null?w:{}}),failedResponseHandler:ea,successfulResponseHandler:Kt(Qg),abortSignal:h,fetch:this.config.fetch});return{images:le.data.map(ae=>ae.b64_json),warnings:ne,usage:le.usage!=null?{inputTokens:(z=le.usage.input_tokens)!=null?z:void 0,outputTokens:(O=le.usage.output_tokens)!=null?O:void 0,totalTokens:(N=le.usage.total_tokens)!=null?N:void 0}:void 0,response:{timestamp:E,modelId:this.modelId,headers:ke},providerMetadata:{openai:{images:le.data.map(ae=>{var ee,ue,se,te,k;return{...ae.revised_prompt?{revisedPrompt:ae.revised_prompt}:{},created:(ee=le.created)!=null?ee:void 0,size:(ue=le.size)!=null?ue:void 0,quality:(se=le.quality)!=null?se:void 0,background:(te=le.background)!=null?te:void 0,outputFormat:(k=le.output_format)!=null?k:void 0}})}}}}const{value:$,responseHeaders:ge}=await Zt({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:It(this.config.headers(),m),body:{model:this.modelId,prompt:t,n:l,size:s,...(X=p.openai)!=null?X:{},...uN(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:ea,successfulResponseHandler:Kt(Qg),abortSignal:h,fetch:this.config.fetch});return{images:$.data.map(le=>le.b64_json),warnings:ne,usage:$.usage!=null?{inputTokens:(K=$.usage.input_tokens)!=null?K:void 0,outputTokens:(x=$.usage.output_tokens)!=null?x:void 0,totalTokens:(W=$.usage.total_tokens)!=null?W:void 0}:void 0,response:{timestamp:E,modelId:this.modelId,headers:ge},providerMetadata:{openai:{images:$.data.map(le=>{var ke,ae,ee,ue,se;return{...le.revised_prompt?{revisedPrompt:le.revised_prompt}:{},created:(ke=$.created)!=null?ke:void 0,size:(ae=$.size)!=null?ae:void 0,quality:(ee=$.quality)!=null?ee:void 0,background:(ue=$.background)!=null?ue:void 0,outputFormat:(se=$.output_format)!=null?se:void 0}})}}}}};async function dN(t){if(!t)return;if(t.type==="url")return z_(t.url);const a=t.data instanceof Uint8Array?t.data:Zi(t.data);return new Blob([a],{type:t.mediaType})}var fN=ye(()=>ve(S({callId:v(),operation:bt("type",[S({type:Z("create_file"),path:v(),diff:v()}),S({type:Z("delete_file"),path:v()}),S({type:Z("update_file"),path:v(),diff:v()})])}))),rb=ye(()=>ve(S({status:Ae(["completed","failed"]),output:v().optional()}))),pN=ta({id:"openai.apply_patch",inputSchema:fN,outputSchema:rb}),mN=pN,hN=ye(()=>ve(S({code:v().nullish(),containerId:v()}))),vN=ye(()=>ve(S({outputs:F(bt("type",[S({type:Z("logs"),logs:v()}),S({type:Z("image"),url:v()})])).nullish()}))),gN=ye(()=>ve(S({container:Ce([v(),S({fileIds:F(v()).optional()})]).optional()}))),yN=ta({id:"openai.code_interpreter",inputSchema:hN,outputSchema:vN}),_N=(t={})=>yN(t),sb=S({key:v(),type:Ae(["eq","ne","gt","gte","lt","lte","in","nin"]),value:Ce([v(),D(),at(),F(v())])}),ub=S({type:Ae(["and","or"]),filters:F(Ce([sb,Zd(()=>ub)]))}),bN=ye(()=>ve(S({vectorStoreIds:F(v()),maxNumResults:D().optional(),ranking:S({ranker:v().optional(),scoreThreshold:D().optional()}).optional(),filters:Ce([sb,ub]).optional()}))),SN=ye(()=>ve(S({queries:F(v()),results:F(S({attributes:dt(v(),Pn()),fileId:v(),filename:v(),score:D(),text:v()})).nullable()}))),TN=ta({id:"openai.file_search",inputSchema:S({}),outputSchema:SN}),wN=ye(()=>ve(S({background:Ae(["auto","opaque","transparent"]).optional(),inputFidelity:Ae(["low","high"]).optional(),inputImageMask:S({fileId:v().optional(),imageUrl:v().optional()}).optional(),model:v().optional(),moderation:Ae(["auto"]).optional(),outputCompression:D().int().min(0).max(100).optional(),outputFormat:Ae(["png","jpeg","webp"]).optional(),partialImages:D().int().min(0).max(3).optional(),quality:Ae(["auto","low","medium","high"]).optional(),size:Ae(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict())),EN=ye(()=>ve(S({}))),xN=ye(()=>ve(S({result:v()}))),AN=ta({id:"openai.image_generation",inputSchema:EN,outputSchema:xN}),ON=(t={})=>AN(t),cb=ye(()=>ve(S({action:S({type:Z("exec"),command:F(v()),timeoutMs:D().optional(),user:v().optional(),workingDirectory:v().optional(),env:dt(v(),v()).optional()})}))),db=ye(()=>ve(S({output:v()}))),CN=ta({id:"openai.local_shell",inputSchema:cb,outputSchema:db}),fb=ye(()=>ve(S({action:S({commands:F(v()),timeoutMs:D().optional(),maxOutputLength:D().optional()})}))),pb=ye(()=>ve(S({output:F(S({stdout:v(),stderr:v(),outcome:bt("type",[S({type:Z("timeout")}),S({type:Z("exit"),exitCode:D()})])}))}))),RN=ta({id:"openai.shell",inputSchema:fb,outputSchema:pb}),MN=ye(()=>ve(S({externalWebAccess:at().optional(),filters:S({allowedDomains:F(v()).optional()}).optional(),searchContextSize:Ae(["low","medium","high"]).optional(),userLocation:S({type:Z("approximate"),country:v().optional(),city:v().optional(),region:v().optional(),timezone:v().optional()}).optional()}))),NN=ye(()=>ve(S({}))),zN=ye(()=>ve(S({action:bt("type",[S({type:Z("search"),query:v().optional()}),S({type:Z("openPage"),url:v().nullish()}),S({type:Z("findInPage"),url:v().nullish(),pattern:v().nullish()})]),sources:F(bt("type",[S({type:Z("url"),url:v()}),S({type:Z("api"),name:v()})])).optional()}))),IN=ta({id:"openai.web_search",inputSchema:NN,outputSchema:zN}),kN=(t={})=>IN(t),DN=ye(()=>ve(S({searchContextSize:Ae(["low","medium","high"]).optional(),userLocation:S({type:Z("approximate"),country:v().optional(),city:v().optional(),region:v().optional(),timezone:v().optional()}).optional()}))),UN=ye(()=>ve(S({}))),qN=ye(()=>ve(S({action:bt("type",[S({type:Z("search"),query:v().optional()}),S({type:Z("openPage"),url:v().nullish()}),S({type:Z("findInPage"),url:v().nullish(),pattern:v().nullish()})])}))),jN=ta({id:"openai.web_search_preview",inputSchema:UN,outputSchema:qN}),Rd=Zd(()=>Ce([v(),D(),at(),x_(),F(Rd),dt(v(),Rd)])),ZN=ye(()=>ve(S({serverLabel:v(),allowedTools:Ce([F(v()),S({readOnly:at().optional(),toolNames:F(v()).optional()})]).optional(),authorization:v().optional(),connectorId:v().optional(),headers:dt(v(),v()).optional(),requireApproval:Ce([Ae(["always","never"]),S({never:S({toolNames:F(v()).optional()}).optional()})]).optional(),serverDescription:v().optional(),serverUrl:v().optional()}).refine(t=>t.serverUrl!=null||t.connectorId!=null,"One of serverUrl or connectorId must be provided."))),$N=ye(()=>ve(S({}))),BN=ye(()=>ve(S({type:Z("call"),serverLabel:v(),name:v(),arguments:v(),output:v().nullish(),error:Ce([v(),Rd]).optional()}))),HN=ta({id:"openai.mcp",inputSchema:$N,outputSchema:BN}),LN=t=>HN(t),GN={applyPatch:mN,codeInterpreter:_N,fileSearch:TN,imageGeneration:ON,localShell:CN,shell:RN,webSearchPreview:jN,webSearch:kN,mcp:LN};function Kg(t){var a,i,l,s;if(t==null)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};const u=t.input_tokens,d=t.output_tokens,p=(i=(a=t.input_tokens_details)==null?void 0:a.cached_tokens)!=null?i:0,m=(s=(l=t.output_tokens_details)==null?void 0:l.reasoning_tokens)!=null?s:0;return{inputTokens:{total:u,noCache:u-p,cacheRead:p,cacheWrite:void 0},outputTokens:{total:d,text:d-m,reasoning:m},raw:t}}function Pg(t,a){return a?a.some(i=>t.startsWith(i)):!1}async function VN({prompt:t,toolNameMapping:a,systemMessageMode:i,providerOptionsName:l,fileIdPrefixes:s,store:u,hasLocalShellTool:d=!1,hasShellTool:p=!1,hasApplyPatchTool:m=!1}){var h,y,T,b,w,z,O,N,X,K,x,W,ne;const E=[],$=[],ge=new Set;for(const{role:le,content:ke}of t)switch(le){case"system":{switch(i){case"system":{E.push({role:"system",content:ke});break}case"developer":{E.push({role:"developer",content:ke});break}case"remove":{$.push({type:"other",message:"system messages are removed for this model"});break}default:{const ae=i;throw new Error(`Unsupported system message mode: ${ae}`)}}break}case"user":{E.push({role:"user",content:ke.map((ae,ee)=>{var ue,se,te;switch(ae.type){case"text":return{type:"input_text",text:ae.text};case"file":if(ae.mediaType.startsWith("image/")){const k=ae.mediaType==="image/*"?"image/jpeg":ae.mediaType;return{type:"input_image",...ae.data instanceof URL?{image_url:ae.data.toString()}:typeof ae.data=="string"&&Pg(ae.data,s)?{file_id:ae.data}:{image_url:`data:${k};base64,${lo(ae.data)}`},detail:(se=(ue=ae.providerOptions)==null?void 0:ue[l])==null?void 0:se.imageDetail}}else{if(ae.mediaType==="application/pdf")return ae.data instanceof URL?{type:"input_file",file_url:ae.data.toString()}:{type:"input_file",...typeof ae.data=="string"&&Pg(ae.data,s)?{file_id:ae.data}:{filename:(te=ae.filename)!=null?te:`part-${ee}.pdf`,file_data:`data:application/pdf;base64,${lo(ae.data)}`}};throw new Sn({functionality:`file part media type ${ae.mediaType}`})}}})});break}case"assistant":{const ae={};for(const ee of ke)switch(ee.type){case"text":{const ue=(y=(h=ee.providerOptions)==null?void 0:h[l])==null?void 0:y.itemId;if(u&&ue!=null){E.push({type:"item_reference",id:ue});break}E.push({role:"assistant",content:[{type:"output_text",text:ee.text}],id:ue});break}case"tool-call":{const ue=(O=(b=(T=ee.providerOptions)==null?void 0:T[l])==null?void 0:b.itemId)!=null?O:(z=(w=ee.providerMetadata)==null?void 0:w[l])==null?void 0:z.itemId;if(ee.providerExecuted){u&&ue!=null&&E.push({type:"item_reference",id:ue});break}if(u&&ue!=null){E.push({type:"item_reference",id:ue});break}const se=a.toProviderToolName(ee.toolName);if(d&&se==="local_shell"){const te=await cn({value:ee.input,schema:cb});E.push({type:"local_shell_call",call_id:ee.toolCallId,id:ue,action:{type:"exec",command:te.action.command,timeout_ms:te.action.timeoutMs,user:te.action.user,working_directory:te.action.workingDirectory,env:te.action.env}});break}if(p&&se==="shell"){const te=await cn({value:ee.input,schema:fb});E.push({type:"shell_call",call_id:ee.toolCallId,id:ue,status:"completed",action:{commands:te.action.commands,timeout_ms:te.action.timeoutMs,max_output_length:te.action.maxOutputLength}});break}E.push({type:"function_call",call_id:ee.toolCallId,name:se,arguments:JSON.stringify(ee.input),id:ue});break}case"tool-result":{if(ee.output.type==="execution-denied"||ee.output.type==="json"&&typeof ee.output.value=="object"&&ee.output.value!=null&&"type"in ee.output.value&&ee.output.value.type==="execution-denied")break;if(u){const ue=(K=(X=(N=ee.providerMetadata)==null?void 0:N[l])==null?void 0:X.itemId)!=null?K:ee.toolCallId;E.push({type:"item_reference",id:ue})}else $.push({type:"other",message:`Results for OpenAI tool ${ee.toolName} are not sent to the API when store is false`});break}case"reasoning":{const ue=await En({provider:l,providerOptions:ee.providerOptions,schema:YN}),se=ue?.itemId;if(se!=null){const te=ae[se];if(u)te===void 0&&(E.push({type:"item_reference",id:se}),ae[se]={type:"reasoning",id:se,summary:[]});else{const k=[];ee.text.length>0?k.push({type:"summary_text",text:ee.text}):te!==void 0&&$.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(ee)}.`}),te===void 0?(ae[se]={type:"reasoning",id:se,encrypted_content:ue?.reasoningEncryptedContent,summary:k},E.push(ae[se])):(te.summary.push(...k),ue?.reasoningEncryptedContent!=null&&(te.encrypted_content=ue.reasoningEncryptedContent))}}else $.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(ee)}.`});break}}break}case"tool":{for(const ae of ke){if(ae.type==="tool-approval-response"){const te=ae;if(ge.has(te.approvalId))continue;ge.add(te.approvalId),u&&E.push({type:"item_reference",id:te.approvalId}),E.push({type:"mcp_approval_response",approval_request_id:te.approvalId,approve:te.approved});continue}const ee=ae.output;if(ee.type==="execution-denied"&&((W=(x=ee.providerOptions)==null?void 0:x.openai)==null?void 0:W.approvalId))continue;const ue=a.toProviderToolName(ae.toolName);if(d&&ue==="local_shell"&&ee.type==="json"){const te=await cn({value:ee.value,schema:db});E.push({type:"local_shell_call_output",call_id:ae.toolCallId,output:te.output});continue}if(p&&ue==="shell"&&ee.type==="json"){const te=await cn({value:ee.value,schema:pb});E.push({type:"shell_call_output",call_id:ae.toolCallId,output:te.output.map(k=>({stdout:k.stdout,stderr:k.stderr,outcome:k.outcome.type==="timeout"?{type:"timeout"}:{type:"exit",exit_code:k.outcome.exitCode}}))});continue}if(m&&ae.toolName==="apply_patch"&&ee.type==="json"){const te=await cn({value:ee.value,schema:rb});E.push({type:"apply_patch_call_output",call_id:ae.toolCallId,status:te.status,output:te.output});continue}let se;switch(ee.type){case"text":case"error-text":se=ee.value;break;case"execution-denied":se=(ne=ee.reason)!=null?ne:"Tool execution denied.";break;case"json":case"error-json":se=JSON.stringify(ee.value);break;case"content":se=ee.value.map(te=>{var k;switch(te.type){case"text":return{type:"input_text",text:te.text};case"image-data":return{type:"input_image",image_url:`data:${te.mediaType};base64,${te.data}`};case"image-url":return{type:"input_image",image_url:te.url};case"file-data":return{type:"input_file",filename:(k=te.filename)!=null?k:"data",file_data:`data:${te.mediaType};base64,${te.data}`};default:{$.push({type:"other",message:`unsupported tool content part type: ${te.type}`});return}}}).filter(cO);break}E.push({type:"function_call_output",call_id:ae.toolCallId,output:se})}break}default:{const ae=le;throw new Error(`Unsupported role: ${ae}`)}}return{input:E,warnings:$}}var YN=S({itemId:v().nullish(),reasoningEncryptedContent:v().nullish()});function Fg({finishReason:t,hasFunctionCall:a}){switch(t){case void 0:case null:return a?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return a?"tool-calls":"other"}}var JN=ye(()=>ve(Ce([S({type:Z("response.output_text.delta"),item_id:v(),delta:v(),logprobs:F(S({token:v(),logprob:D(),top_logprobs:F(S({token:v(),logprob:D()}))})).nullish()}),S({type:Ae(["response.completed","response.incomplete"]),response:S({incomplete_details:S({reason:v()}).nullish(),usage:S({input_tokens:D(),input_tokens_details:S({cached_tokens:D().nullish()}).nullish(),output_tokens:D(),output_tokens_details:S({reasoning_tokens:D().nullish()}).nullish()}),service_tier:v().nullish()})}),S({type:Z("response.created"),response:S({id:v(),created_at:D(),model:v(),service_tier:v().nullish()})}),S({type:Z("response.output_item.added"),output_index:D(),item:bt("type",[S({type:Z("message"),id:v()}),S({type:Z("reasoning"),id:v(),encrypted_content:v().nullish()}),S({type:Z("function_call"),id:v(),call_id:v(),name:v(),arguments:v()}),S({type:Z("web_search_call"),id:v(),status:v()}),S({type:Z("computer_call"),id:v(),status:v()}),S({type:Z("file_search_call"),id:v()}),S({type:Z("image_generation_call"),id:v()}),S({type:Z("code_interpreter_call"),id:v(),container_id:v(),code:v().nullable(),outputs:F(bt("type",[S({type:Z("logs"),logs:v()}),S({type:Z("image"),url:v()})])).nullable(),status:v()}),S({type:Z("mcp_call"),id:v(),status:v(),approval_request_id:v().nullish()}),S({type:Z("mcp_list_tools"),id:v()}),S({type:Z("mcp_approval_request"),id:v()}),S({type:Z("apply_patch_call"),id:v(),call_id:v(),status:Ae(["in_progress","completed"]),operation:bt("type",[S({type:Z("create_file"),path:v(),diff:v()}),S({type:Z("delete_file"),path:v()}),S({type:Z("update_file"),path:v(),diff:v()})])}),S({type:Z("shell_call"),id:v(),call_id:v(),status:Ae(["in_progress","completed","incomplete"]),action:S({commands:F(v())})})])}),S({type:Z("response.output_item.done"),output_index:D(),item:bt("type",[S({type:Z("message"),id:v()}),S({type:Z("reasoning"),id:v(),encrypted_content:v().nullish()}),S({type:Z("function_call"),id:v(),call_id:v(),name:v(),arguments:v(),status:Z("completed")}),S({type:Z("code_interpreter_call"),id:v(),code:v().nullable(),container_id:v(),outputs:F(bt("type",[S({type:Z("logs"),logs:v()}),S({type:Z("image"),url:v()})])).nullable()}),S({type:Z("image_generation_call"),id:v(),result:v()}),S({type:Z("web_search_call"),id:v(),status:v(),action:bt("type",[S({type:Z("search"),query:v().nullish(),sources:F(bt("type",[S({type:Z("url"),url:v()}),S({type:Z("api"),name:v()})])).nullish()}),S({type:Z("open_page"),url:v().nullish()}),S({type:Z("find_in_page"),url:v().nullish(),pattern:v().nullish()})])}),S({type:Z("file_search_call"),id:v(),queries:F(v()),results:F(S({attributes:dt(v(),Ce([v(),D(),at()])),file_id:v(),filename:v(),score:D(),text:v()})).nullish()}),S({type:Z("local_shell_call"),id:v(),call_id:v(),action:S({type:Z("exec"),command:F(v()),timeout_ms:D().optional(),user:v().optional(),working_directory:v().optional(),env:dt(v(),v()).optional()})}),S({type:Z("computer_call"),id:v(),status:Z("completed")}),S({type:Z("mcp_call"),id:v(),status:v(),arguments:v(),name:v(),server_label:v(),output:v().nullish(),error:Ce([v(),S({type:v().optional(),code:Ce([D(),v()]).optional(),message:v().optional()}).loose()]).nullish(),approval_request_id:v().nullish()}),S({type:Z("mcp_list_tools"),id:v(),server_label:v(),tools:F(S({name:v(),description:v().optional(),input_schema:Tn(),annotations:dt(v(),Pn()).optional()})),error:Ce([v(),S({type:v().optional(),code:Ce([D(),v()]).optional(),message:v().optional()}).loose()]).optional()}),S({type:Z("mcp_approval_request"),id:v(),server_label:v(),name:v(),arguments:v(),approval_request_id:v().optional()}),S({type:Z("apply_patch_call"),id:v(),call_id:v(),status:Ae(["in_progress","completed"]),operation:bt("type",[S({type:Z("create_file"),path:v(),diff:v()}),S({type:Z("delete_file"),path:v()}),S({type:Z("update_file"),path:v(),diff:v()})])}),S({type:Z("shell_call"),id:v(),call_id:v(),status:Ae(["in_progress","completed","incomplete"]),action:S({commands:F(v())})})])}),S({type:Z("response.function_call_arguments.delta"),item_id:v(),output_index:D(),delta:v()}),S({type:Z("response.image_generation_call.partial_image"),item_id:v(),output_index:D(),partial_image_b64:v()}),S({type:Z("response.code_interpreter_call_code.delta"),item_id:v(),output_index:D(),delta:v()}),S({type:Z("response.code_interpreter_call_code.done"),item_id:v(),output_index:D(),code:v()}),S({type:Z("response.output_text.annotation.added"),annotation:bt("type",[S({type:Z("url_citation"),start_index:D(),end_index:D(),url:v(),title:v()}),S({type:Z("file_citation"),file_id:v(),filename:v(),index:D()}),S({type:Z("container_file_citation"),container_id:v(),file_id:v(),filename:v(),start_index:D(),end_index:D()}),S({type:Z("file_path"),file_id:v(),index:D()})])}),S({type:Z("response.reasoning_summary_part.added"),item_id:v(),summary_index:D()}),S({type:Z("response.reasoning_summary_text.delta"),item_id:v(),summary_index:D(),delta:v()}),S({type:Z("response.reasoning_summary_part.done"),item_id:v(),summary_index:D()}),S({type:Z("response.apply_patch_call_operation_diff.delta"),item_id:v(),output_index:D(),delta:v(),obfuscation:v().nullish()}),S({type:Z("response.apply_patch_call_operation_diff.done"),item_id:v(),output_index:D(),diff:v()}),S({type:Z("error"),sequence_number:D(),error:S({type:v(),code:v(),message:v(),param:v().nullish()})}),S({type:v()}).loose().transform(t=>({type:"unknown_chunk",message:t.type}))]))),XN=ye(()=>ve(S({id:v().optional(),created_at:D().optional(),error:S({message:v(),type:v(),param:v().nullish(),code:v()}).nullish(),model:v().optional(),output:F(bt("type",[S({type:Z("message"),role:Z("assistant"),id:v(),content:F(S({type:Z("output_text"),text:v(),logprobs:F(S({token:v(),logprob:D(),top_logprobs:F(S({token:v(),logprob:D()}))})).nullish(),annotations:F(bt("type",[S({type:Z("url_citation"),start_index:D(),end_index:D(),url:v(),title:v()}),S({type:Z("file_citation"),file_id:v(),filename:v(),index:D()}),S({type:Z("container_file_citation"),container_id:v(),file_id:v(),filename:v(),start_index:D(),end_index:D()}),S({type:Z("file_path"),file_id:v(),index:D()})]))}))}),S({type:Z("web_search_call"),id:v(),status:v(),action:bt("type",[S({type:Z("search"),query:v().nullish(),sources:F(bt("type",[S({type:Z("url"),url:v()}),S({type:Z("api"),name:v()})])).nullish()}),S({type:Z("open_page"),url:v().nullish()}),S({type:Z("find_in_page"),url:v().nullish(),pattern:v().nullish()})])}),S({type:Z("file_search_call"),id:v(),queries:F(v()),results:F(S({attributes:dt(v(),Ce([v(),D(),at()])),file_id:v(),filename:v(),score:D(),text:v()})).nullish()}),S({type:Z("code_interpreter_call"),id:v(),code:v().nullable(),container_id:v(),outputs:F(bt("type",[S({type:Z("logs"),logs:v()}),S({type:Z("image"),url:v()})])).nullable()}),S({type:Z("image_generation_call"),id:v(),result:v()}),S({type:Z("local_shell_call"),id:v(),call_id:v(),action:S({type:Z("exec"),command:F(v()),timeout_ms:D().optional(),user:v().optional(),working_directory:v().optional(),env:dt(v(),v()).optional()})}),S({type:Z("function_call"),call_id:v(),name:v(),arguments:v(),id:v()}),S({type:Z("computer_call"),id:v(),status:v().optional()}),S({type:Z("reasoning"),id:v(),encrypted_content:v().nullish(),summary:F(S({type:Z("summary_text"),text:v()}))}),S({type:Z("mcp_call"),id:v(),status:v(),arguments:v(),name:v(),server_label:v(),output:v().nullish(),error:Ce([v(),S({type:v().optional(),code:Ce([D(),v()]).optional(),message:v().optional()}).loose()]).nullish(),approval_request_id:v().nullish()}),S({type:Z("mcp_list_tools"),id:v(),server_label:v(),tools:F(S({name:v(),description:v().optional(),input_schema:Tn(),annotations:dt(v(),Pn()).optional()})),error:Ce([v(),S({type:v().optional(),code:Ce([D(),v()]).optional(),message:v().optional()}).loose()]).optional()}),S({type:Z("mcp_approval_request"),id:v(),server_label:v(),name:v(),arguments:v(),approval_request_id:v().optional()}),S({type:Z("apply_patch_call"),id:v(),call_id:v(),status:Ae(["in_progress","completed"]),operation:bt("type",[S({type:Z("create_file"),path:v(),diff:v()}),S({type:Z("delete_file"),path:v()}),S({type:Z("update_file"),path:v(),diff:v()})])}),S({type:Z("shell_call"),id:v(),call_id:v(),status:Ae(["in_progress","completed","incomplete"]),action:S({commands:F(v())})})])).optional(),service_tier:v().nullish(),incomplete_details:S({reason:v()}).nullish(),usage:S({input_tokens:D(),input_tokens_details:S({cached_tokens:D().nullish()}).nullish(),output_tokens:D(),output_tokens_details:S({reasoning_tokens:D().nullish()}).nullish()}).optional()}))),mb=20,Wg=ye(()=>ve(S({conversation:v().nullish(),include:F(Ae(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:v().nullish(),logprobs:Ce([at(),D().min(1).max(mb)]).optional(),maxToolCalls:D().nullish(),metadata:Tn().nullish(),parallelToolCalls:at().nullish(),previousResponseId:v().nullish(),promptCacheKey:v().nullish(),promptCacheRetention:Ae(["in_memory","24h"]).nullish(),reasoningEffort:v().nullish(),reasoningSummary:v().nullish(),safetyIdentifier:v().nullish(),serviceTier:Ae(["auto","flex","priority","default"]).nullish(),store:at().nullish(),strictJsonSchema:at().nullish(),textVerbosity:Ae(["low","medium","high"]).nullish(),truncation:Ae(["auto","disabled"]).nullish(),user:v().nullish(),systemMessageMode:Ae(["system","developer","remove"]).optional(),forceReasoning:at().optional()})));async function QN({tools:t,toolChoice:a}){t=t?.length?t:void 0;const i=[];if(t==null)return{tools:void 0,toolChoice:void 0,toolWarnings:i};const l=[];for(const u of t)switch(u.type){case"function":l.push({type:"function",name:u.name,description:u.description,parameters:u.inputSchema,...u.strict!=null?{strict:u.strict}:{}});break;case"provider":{switch(u.id){case"openai.file_search":{const d=await cn({value:u.args,schema:bN});l.push({type:"file_search",vector_store_ids:d.vectorStoreIds,max_num_results:d.maxNumResults,ranking_options:d.ranking?{ranker:d.ranking.ranker,score_threshold:d.ranking.scoreThreshold}:void 0,filters:d.filters});break}case"openai.local_shell":{l.push({type:"local_shell"});break}case"openai.shell":{l.push({type:"shell"});break}case"openai.apply_patch":{l.push({type:"apply_patch"});break}case"openai.web_search_preview":{const d=await cn({value:u.args,schema:DN});l.push({type:"web_search_preview",search_context_size:d.searchContextSize,user_location:d.userLocation});break}case"openai.web_search":{const d=await cn({value:u.args,schema:MN});l.push({type:"web_search",filters:d.filters!=null?{allowed_domains:d.filters.allowedDomains}:void 0,external_web_access:d.externalWebAccess,search_context_size:d.searchContextSize,user_location:d.userLocation});break}case"openai.code_interpreter":{const d=await cn({value:u.args,schema:gN});l.push({type:"code_interpreter",container:d.container==null?{type:"auto",file_ids:void 0}:typeof d.container=="string"?d.container:{type:"auto",file_ids:d.container.fileIds}});break}case"openai.image_generation":{const d=await cn({value:u.args,schema:wN});l.push({type:"image_generation",background:d.background,input_fidelity:d.inputFidelity,input_image_mask:d.inputImageMask?{file_id:d.inputImageMask.fileId,image_url:d.inputImageMask.imageUrl}:void 0,model:d.model,moderation:d.moderation,partial_images:d.partialImages,quality:d.quality,output_compression:d.outputCompression,output_format:d.outputFormat,size:d.size});break}case"openai.mcp":{const d=await cn({value:u.args,schema:ZN}),p=y=>({tool_names:y.toolNames}),m=d.requireApproval,h=m==null?void 0:typeof m=="string"?m:m.never!=null?{never:p(m.never)}:void 0;l.push({type:"mcp",server_label:d.serverLabel,allowed_tools:Array.isArray(d.allowedTools)?d.allowedTools:d.allowedTools?{read_only:d.allowedTools.readOnly,tool_names:d.allowedTools.toolNames}:void 0,authorization:d.authorization,connector_id:d.connectorId,headers:d.headers,require_approval:h??"never",server_description:d.serverDescription,server_url:d.serverUrl});break}}break}default:i.push({type:"unsupported",feature:`function tool ${u}`});break}if(a==null)return{tools:l,toolChoice:void 0,toolWarnings:i};const s=a.type;switch(s){case"auto":case"none":case"required":return{tools:l,toolChoice:s,toolWarnings:i};case"tool":return{tools:l,toolChoice:a.toolName==="code_interpreter"||a.toolName==="file_search"||a.toolName==="image_generation"||a.toolName==="web_search_preview"||a.toolName==="web_search"||a.toolName==="mcp"||a.toolName==="apply_patch"?{type:a.toolName}:{type:"function",name:a.toolName},toolWarnings:i};default:{const u=s;throw new Sn({functionality:`tool choice type: ${u}`})}}}function ey(t){var a,i;const l={};for(const s of t)if(s.role==="assistant")for(const u of s.content){if(u.type!=="tool-call")continue;const d=(i=(a=u.providerOptions)==null?void 0:a.openai)==null?void 0:i.approvalRequestId;d!=null&&(l[d]=u.toolCallId)}return l}var KN=class{constructor(t,a){this.specificationVersion="v3",this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]},this.modelId=t,this.config=a}get provider(){return this.config.provider}async getArgs({maxOutputTokens:t,temperature:a,stopSequences:i,topP:l,topK:s,presencePenalty:u,frequencyPenalty:d,seed:p,prompt:m,providerOptions:h,tools:y,toolChoice:T,responseFormat:b}){var w,z,O,N,X,K;const x=[],W=lb(this.modelId);s!=null&&x.push({type:"unsupported",feature:"topK"}),p!=null&&x.push({type:"unsupported",feature:"seed"}),u!=null&&x.push({type:"unsupported",feature:"presencePenalty"}),d!=null&&x.push({type:"unsupported",feature:"frequencyPenalty"}),i!=null&&x.push({type:"unsupported",feature:"stopSequences"});const ne=this.config.provider.includes("azure")?"azure":"openai";let E=await En({provider:ne,providerOptions:h,schema:Wg});E==null&&ne!=="openai"&&(E=await En({provider:"openai",providerOptions:h,schema:Wg}));const $=(w=E?.forceReasoning)!=null?w:W.isReasoningModel;E?.conversation&&E?.previousResponseId&&x.push({type:"unsupported",feature:"conversation",details:"conversation and previousResponseId cannot be used together"});const ge=tO({tools:y,providerToolNames:{"openai.code_interpreter":"code_interpreter","openai.file_search":"file_search","openai.image_generation":"image_generation","openai.local_shell":"local_shell","openai.shell":"shell","openai.web_search":"web_search","openai.web_search_preview":"web_search_preview","openai.mcp":"mcp","openai.apply_patch":"apply_patch"}}),{input:le,warnings:ke}=await VN({prompt:m,toolNameMapping:ge,systemMessageMode:(z=E?.systemMessageMode)!=null?z:$?"developer":W.systemMessageMode,providerOptionsName:ne,fileIdPrefixes:this.config.fileIdPrefixes,store:(O=E?.store)!=null?O:!0,hasLocalShellTool:se("openai.local_shell"),hasShellTool:se("openai.shell"),hasApplyPatchTool:se("openai.apply_patch")});x.push(...ke);const ae=(N=E?.strictJsonSchema)!=null?N:!0;let ee=E?.include;function ue(L){ee==null?ee=[L]:ee.includes(L)||(ee=[...ee,L])}function se(L){return y?.find(oe=>oe.type==="provider"&&oe.id===L)!=null}const te=typeof E?.logprobs=="number"?E?.logprobs:E?.logprobs===!0?mb:void 0;te&&ue("message.output_text.logprobs");const k=(X=y?.find(L=>L.type==="provider"&&(L.id==="openai.web_search"||L.id==="openai.web_search_preview")))==null?void 0:X.name;k&&ue("web_search_call.action.sources"),se("openai.code_interpreter")&&ue("code_interpreter_call.outputs");const B=E?.store;B===!1&&$&&ue("reasoning.encrypted_content");const P={model:this.modelId,input:le,temperature:a,top_p:l,max_output_tokens:t,...(b?.type==="json"||E?.textVerbosity)&&{text:{...b?.type==="json"&&{format:b.schema!=null?{type:"json_schema",strict:ae,name:(K=b.name)!=null?K:"response",description:b.description,schema:b.schema}:{type:"json_object"}},...E?.textVerbosity&&{verbosity:E.textVerbosity}}},conversation:E?.conversation,max_tool_calls:E?.maxToolCalls,metadata:E?.metadata,parallel_tool_calls:E?.parallelToolCalls,previous_response_id:E?.previousResponseId,store:B,user:E?.user,instructions:E?.instructions,service_tier:E?.serviceTier,include:ee,prompt_cache_key:E?.promptCacheKey,prompt_cache_retention:E?.promptCacheRetention,safety_identifier:E?.safetyIdentifier,top_logprobs:te,truncation:E?.truncation,...$&&(E?.reasoningEffort!=null||E?.reasoningSummary!=null)&&{reasoning:{...E?.reasoningEffort!=null&&{effort:E.reasoningEffort},...E?.reasoningSummary!=null&&{summary:E.reasoningSummary}}}};$?E?.reasoningEffort==="none"&&W.supportsNonReasoningParameters||(P.temperature!=null&&(P.temperature=void 0,x.push({type:"unsupported",feature:"temperature",details:"temperature is not supported for reasoning models"})),P.top_p!=null&&(P.top_p=void 0,x.push({type:"unsupported",feature:"topP",details:"topP is not supported for reasoning models"}))):(E?.reasoningEffort!=null&&x.push({type:"unsupported",feature:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"}),E?.reasoningSummary!=null&&x.push({type:"unsupported",feature:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})),E?.serviceTier==="flex"&&!W.supportsFlexProcessing&&(x.push({type:"unsupported",feature:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete P.service_tier),E?.serviceTier==="priority"&&!W.supportsPriorityProcessing&&(x.push({type:"unsupported",feature:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete P.service_tier);const{tools:we,toolChoice:ce,toolWarnings:C}=await QN({tools:y,toolChoice:T});return{webSearchToolName:k,args:{...P,tools:we,tool_choice:ce},warnings:[...x,...C],store:B,toolNameMapping:ge,providerOptionsName:ne}}async doGenerate(t){var a,i,l,s,u,d,p,m,h,y,T,b,w,z,O,N,X,K,x,W,ne,E,$,ge,le;const{args:ke,warnings:ae,webSearchToolName:ee,toolNameMapping:ue,providerOptionsName:se}=await this.getArgs(t),te=this.config.url({path:"/responses",modelId:this.modelId}),k=ey(t.prompt),{responseHeaders:B,value:P,rawValue:we}=await Zt({url:te,headers:It(this.config.headers(),t.headers),body:ke,failedResponseHandler:ea,successfulResponseHandler:Kt(XN),abortSignal:t.abortSignal,fetch:this.config.fetch});if(P.error)throw new jt({message:P.error.message,url:te,requestBodyValues:ke,statusCode:400,responseHeaders:B,responseBody:we,isRetryable:!1});const ce=[],C=[];let L=!1;for(const Q of P.output)switch(Q.type){case"reasoning":{Q.summary.length===0&&Q.summary.push({type:"summary_text",text:""});for(const pe of Q.summary)ce.push({type:"reasoning",text:pe.text,providerMetadata:{[se]:{itemId:Q.id,reasoningEncryptedContent:(a=Q.encrypted_content)!=null?a:null}}});break}case"image_generation_call":{ce.push({type:"tool-call",toolCallId:Q.id,toolName:ue.toCustomToolName("image_generation"),input:"{}",providerExecuted:!0}),ce.push({type:"tool-result",toolCallId:Q.id,toolName:ue.toCustomToolName("image_generation"),result:{result:Q.result}});break}case"local_shell_call":{ce.push({type:"tool-call",toolCallId:Q.call_id,toolName:ue.toCustomToolName("local_shell"),input:JSON.stringify({action:Q.action}),providerMetadata:{[se]:{itemId:Q.id}}});break}case"shell_call":{ce.push({type:"tool-call",toolCallId:Q.call_id,toolName:ue.toCustomToolName("shell"),input:JSON.stringify({action:{commands:Q.action.commands}}),providerMetadata:{[se]:{itemId:Q.id}}});break}case"message":{for(const pe of Q.content){(l=(i=t.providerOptions)==null?void 0:i[se])!=null&&l.logprobs&&pe.logprobs&&C.push(pe.logprobs);const xe={itemId:Q.id,...pe.annotations.length>0&&{annotations:pe.annotations}};ce.push({type:"text",text:pe.text,providerMetadata:{[se]:xe}});for(const Ee of pe.annotations)Ee.type==="url_citation"?ce.push({type:"source",sourceType:"url",id:(d=(u=(s=this.config).generateId)==null?void 0:u.call(s))!=null?d:Gt(),url:Ee.url,title:Ee.title}):Ee.type==="file_citation"?ce.push({type:"source",sourceType:"document",id:(h=(m=(p=this.config).generateId)==null?void 0:m.call(p))!=null?h:Gt(),mediaType:"text/plain",title:Ee.filename,filename:Ee.filename,providerMetadata:{[se]:{type:Ee.type,fileId:Ee.file_id,index:Ee.index}}}):Ee.type==="container_file_citation"?ce.push({type:"source",sourceType:"document",id:(b=(T=(y=this.config).generateId)==null?void 0:T.call(y))!=null?b:Gt(),mediaType:"text/plain",title:Ee.filename,filename:Ee.filename,providerMetadata:{[se]:{type:Ee.type,fileId:Ee.file_id,containerId:Ee.container_id}}}):Ee.type==="file_path"&&ce.push({type:"source",sourceType:"document",id:(O=(z=(w=this.config).generateId)==null?void 0:z.call(w))!=null?O:Gt(),mediaType:"application/octet-stream",title:Ee.file_id,filename:Ee.file_id,providerMetadata:{[se]:{type:Ee.type,fileId:Ee.file_id,index:Ee.index}}})}break}case"function_call":{L=!0,ce.push({type:"tool-call",toolCallId:Q.call_id,toolName:Q.name,input:Q.arguments,providerMetadata:{[se]:{itemId:Q.id}}});break}case"web_search_call":{ce.push({type:"tool-call",toolCallId:Q.id,toolName:ue.toCustomToolName(ee??"web_search"),input:JSON.stringify({}),providerExecuted:!0}),ce.push({type:"tool-result",toolCallId:Q.id,toolName:ue.toCustomToolName(ee??"web_search"),result:ny(Q.action)});break}case"mcp_call":{const pe=Q.approval_request_id!=null&&(N=k[Q.approval_request_id])!=null?N:Q.id,xe=`mcp.${Q.name}`;ce.push({type:"tool-call",toolCallId:pe,toolName:xe,input:Q.arguments,providerExecuted:!0,dynamic:!0}),ce.push({type:"tool-result",toolCallId:pe,toolName:xe,result:{type:"call",serverLabel:Q.server_label,name:Q.name,arguments:Q.arguments,...Q.output!=null?{output:Q.output}:{},...Q.error!=null?{error:Q.error}:{}},providerMetadata:{[se]:{itemId:Q.id}}});break}case"mcp_list_tools":break;case"mcp_approval_request":{const pe=(X=Q.approval_request_id)!=null?X:Q.id,xe=(W=(x=(K=this.config).generateId)==null?void 0:x.call(K))!=null?W:Gt(),Ee=`mcp.${Q.name}`;ce.push({type:"tool-call",toolCallId:xe,toolName:Ee,input:Q.arguments,providerExecuted:!0,dynamic:!0}),ce.push({type:"tool-approval-request",approvalId:pe,toolCallId:xe});break}case"computer_call":{ce.push({type:"tool-call",toolCallId:Q.id,toolName:ue.toCustomToolName("computer_use"),input:"",providerExecuted:!0}),ce.push({type:"tool-result",toolCallId:Q.id,toolName:ue.toCustomToolName("computer_use"),result:{type:"computer_use_tool_result",status:Q.status||"completed"}});break}case"file_search_call":{ce.push({type:"tool-call",toolCallId:Q.id,toolName:ue.toCustomToolName("file_search"),input:"{}",providerExecuted:!0}),ce.push({type:"tool-result",toolCallId:Q.id,toolName:ue.toCustomToolName("file_search"),result:{queries:Q.queries,results:(E=(ne=Q.results)==null?void 0:ne.map(pe=>({attributes:pe.attributes,fileId:pe.file_id,filename:pe.filename,score:pe.score,text:pe.text})))!=null?E:null}});break}case"code_interpreter_call":{ce.push({type:"tool-call",toolCallId:Q.id,toolName:ue.toCustomToolName("code_interpreter"),input:JSON.stringify({code:Q.code,containerId:Q.container_id}),providerExecuted:!0}),ce.push({type:"tool-result",toolCallId:Q.id,toolName:ue.toCustomToolName("code_interpreter"),result:{outputs:Q.outputs}});break}case"apply_patch_call":{ce.push({type:"tool-call",toolCallId:Q.call_id,toolName:ue.toCustomToolName("apply_patch"),input:JSON.stringify({callId:Q.call_id,operation:Q.operation}),providerMetadata:{[se]:{itemId:Q.id}}});break}}const oe={[se]:{responseId:P.id}};C.length>0&&(oe[se].logprobs=C),typeof P.service_tier=="string"&&(oe[se].serviceTier=P.service_tier);const re=P.usage;return{content:ce,finishReason:{unified:Fg({finishReason:($=P.incomplete_details)==null?void 0:$.reason,hasFunctionCall:L}),raw:(le=(ge=P.incomplete_details)==null?void 0:ge.reason)!=null?le:void 0},usage:Kg(re),request:{body:ke},response:{id:P.id,timestamp:new Date(P.created_at*1e3),modelId:P.model,headers:B,body:we},providerMetadata:oe,warnings:ae}}async doStream(t){const{args:a,warnings:i,webSearchToolName:l,toolNameMapping:s,store:u,providerOptionsName:d}=await this.getArgs(t),{responseHeaders:p,value:m}=await Zt({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:It(this.config.headers(),t.headers),body:{...a,stream:!0},failedResponseHandler:ea,successfulResponseHandler:Wl(JN),abortSignal:t.abortSignal,fetch:this.config.fetch}),h=this,y=ey(t.prompt),T=new Map;let b={unified:"other",raw:void 0},w;const z=[];let O=null;const N={},X=[];let K=!1;const x={};let W;return{stream:m.pipeThrough(new TransformStream({start(ne){ne.enqueue({type:"stream-start",warnings:i})},transform(ne,E){var $,ge,le,ke,ae,ee,ue,se,te,k,B,P,we,ce,C,L,oe,re,Q,pe,xe,Ee,tt,tn,fa,na,ho,An,Hn,Vt;if(t.includeRawChunks&&E.enqueue({type:"raw",rawValue:ne.rawValue}),!ne.success){b={unified:"error",raw:void 0},E.enqueue({type:"error",error:ne.error});return}const R=ne.value;if(ty(R)){if(R.item.type==="function_call")N[R.output_index]={toolName:R.item.name,toolCallId:R.item.call_id},E.enqueue({type:"tool-input-start",id:R.item.call_id,toolName:R.item.name});else if(R.item.type==="web_search_call")N[R.output_index]={toolName:s.toCustomToolName(l??"web_search"),toolCallId:R.item.id},E.enqueue({type:"tool-input-start",id:R.item.id,toolName:s.toCustomToolName(l??"web_search"),providerExecuted:!0}),E.enqueue({type:"tool-input-end",id:R.item.id}),E.enqueue({type:"tool-call",toolCallId:R.item.id,toolName:s.toCustomToolName(l??"web_search"),input:JSON.stringify({}),providerExecuted:!0});else if(R.item.type==="computer_call")N[R.output_index]={toolName:s.toCustomToolName("computer_use"),toolCallId:R.item.id},E.enqueue({type:"tool-input-start",id:R.item.id,toolName:s.toCustomToolName("computer_use"),providerExecuted:!0});else if(R.item.type==="code_interpreter_call")N[R.output_index]={toolName:s.toCustomToolName("code_interpreter"),toolCallId:R.item.id,codeInterpreter:{containerId:R.item.container_id}},E.enqueue({type:"tool-input-start",id:R.item.id,toolName:s.toCustomToolName("code_interpreter"),providerExecuted:!0}),E.enqueue({type:"tool-input-delta",id:R.item.id,delta:`{"containerId":"${R.item.container_id}","code":"`});else if(R.item.type==="file_search_call")E.enqueue({type:"tool-call",toolCallId:R.item.id,toolName:s.toCustomToolName("file_search"),input:"{}",providerExecuted:!0});else if(R.item.type==="image_generation_call")E.enqueue({type:"tool-call",toolCallId:R.item.id,toolName:s.toCustomToolName("image_generation"),input:"{}",providerExecuted:!0});else if(!(R.item.type==="mcp_call"||R.item.type==="mcp_list_tools"||R.item.type==="mcp_approval_request"))if(R.item.type==="apply_patch_call"){const{call_id:ie,operation:Me}=R.item;if(N[R.output_index]={toolName:s.toCustomToolName("apply_patch"),toolCallId:ie,applyPatch:{hasDiff:Me.type==="delete_file",endEmitted:Me.type==="delete_file"}},E.enqueue({type:"tool-input-start",id:ie,toolName:s.toCustomToolName("apply_patch")}),Me.type==="delete_file"){const Ze=JSON.stringify({callId:ie,operation:Me});E.enqueue({type:"tool-input-delta",id:ie,delta:Ze}),E.enqueue({type:"tool-input-end",id:ie})}else E.enqueue({type:"tool-input-delta",id:ie,delta:`{"callId":"${Do(ie)}","operation":{"type":"${Do(Me.type)}","path":"${Do(Me.path)}","diff":"`})}else R.item.type==="shell_call"?N[R.output_index]={toolName:s.toCustomToolName("shell"),toolCallId:R.item.call_id}:R.item.type==="message"?(X.splice(0,X.length),E.enqueue({type:"text-start",id:R.item.id,providerMetadata:{[d]:{itemId:R.item.id}}})):ty(R)&&R.item.type==="reasoning"&&(x[R.item.id]={encryptedContent:R.item.encrypted_content,summaryParts:{0:"active"}},E.enqueue({type:"reasoning-start",id:`${R.item.id}:0`,providerMetadata:{[d]:{itemId:R.item.id,reasoningEncryptedContent:($=R.item.encrypted_content)!=null?$:null}}}))}else if(FN(R)){if(R.item.type==="message")E.enqueue({type:"text-end",id:R.item.id,providerMetadata:{[d]:{itemId:R.item.id,...X.length>0&&{annotations:X}}}});else if(R.item.type==="function_call")N[R.output_index]=void 0,K=!0,E.enqueue({type:"tool-input-end",id:R.item.call_id}),E.enqueue({type:"tool-call",toolCallId:R.item.call_id,toolName:R.item.name,input:R.item.arguments,providerMetadata:{[d]:{itemId:R.item.id}}});else if(R.item.type==="web_search_call")N[R.output_index]=void 0,E.enqueue({type:"tool-result",toolCallId:R.item.id,toolName:s.toCustomToolName(l??"web_search"),result:ny(R.item.action)});else if(R.item.type==="computer_call")N[R.output_index]=void 0,E.enqueue({type:"tool-input-end",id:R.item.id}),E.enqueue({type:"tool-call",toolCallId:R.item.id,toolName:s.toCustomToolName("computer_use"),input:"",providerExecuted:!0}),E.enqueue({type:"tool-result",toolCallId:R.item.id,toolName:s.toCustomToolName("computer_use"),result:{type:"computer_use_tool_result",status:R.item.status||"completed"}});else if(R.item.type==="file_search_call")N[R.output_index]=void 0,E.enqueue({type:"tool-result",toolCallId:R.item.id,toolName:s.toCustomToolName("file_search"),result:{queries:R.item.queries,results:(le=(ge=R.item.results)==null?void 0:ge.map(ie=>({attributes:ie.attributes,fileId:ie.file_id,filename:ie.filename,score:ie.score,text:ie.text})))!=null?le:null}});else if(R.item.type==="code_interpreter_call")N[R.output_index]=void 0,E.enqueue({type:"tool-result",toolCallId:R.item.id,toolName:s.toCustomToolName("code_interpreter"),result:{outputs:R.item.outputs}});else if(R.item.type==="image_generation_call")E.enqueue({type:"tool-result",toolCallId:R.item.id,toolName:s.toCustomToolName("image_generation"),result:{result:R.item.result}});else if(R.item.type==="mcp_call"){N[R.output_index]=void 0;const ie=(ke=R.item.approval_request_id)!=null?ke:void 0,Me=ie!=null&&(ee=(ae=T.get(ie))!=null?ae:y[ie])!=null?ee:R.item.id,Ze=`mcp.${R.item.name}`;E.enqueue({type:"tool-call",toolCallId:Me,toolName:Ze,input:R.item.arguments,providerExecuted:!0,dynamic:!0}),E.enqueue({type:"tool-result",toolCallId:Me,toolName:Ze,result:{type:"call",serverLabel:R.item.server_label,name:R.item.name,arguments:R.item.arguments,...R.item.output!=null?{output:R.item.output}:{},...R.item.error!=null?{error:R.item.error}:{}},providerMetadata:{[d]:{itemId:R.item.id}}})}else if(R.item.type==="mcp_list_tools")N[R.output_index]=void 0;else if(R.item.type==="apply_patch_call"){const ie=N[R.output_index];ie?.applyPatch&&!ie.applyPatch.endEmitted&&R.item.operation.type!=="delete_file"&&(ie.applyPatch.hasDiff||E.enqueue({type:"tool-input-delta",id:ie.toolCallId,delta:Do(R.item.operation.diff)}),E.enqueue({type:"tool-input-delta",id:ie.toolCallId,delta:'"}}'}),E.enqueue({type:"tool-input-end",id:ie.toolCallId}),ie.applyPatch.endEmitted=!0),ie&&R.item.status==="completed"&&E.enqueue({type:"tool-call",toolCallId:ie.toolCallId,toolName:s.toCustomToolName("apply_patch"),input:JSON.stringify({callId:R.item.call_id,operation:R.item.operation}),providerMetadata:{[d]:{itemId:R.item.id}}}),N[R.output_index]=void 0}else if(R.item.type==="mcp_approval_request"){N[R.output_index]=void 0;const ie=(te=(se=(ue=h.config).generateId)==null?void 0:se.call(ue))!=null?te:Gt(),Me=(k=R.item.approval_request_id)!=null?k:R.item.id;T.set(Me,ie);const Ze=`mcp.${R.item.name}`;E.enqueue({type:"tool-call",toolCallId:ie,toolName:Ze,input:R.item.arguments,providerExecuted:!0,dynamic:!0}),E.enqueue({type:"tool-approval-request",approvalId:Me,toolCallId:ie})}else if(R.item.type==="local_shell_call")N[R.output_index]=void 0,E.enqueue({type:"tool-call",toolCallId:R.item.call_id,toolName:s.toCustomToolName("local_shell"),input:JSON.stringify({action:{type:"exec",command:R.item.action.command,timeoutMs:R.item.action.timeout_ms,user:R.item.action.user,workingDirectory:R.item.action.working_directory,env:R.item.action.env}}),providerMetadata:{[d]:{itemId:R.item.id}}});else if(R.item.type==="shell_call")N[R.output_index]=void 0,E.enqueue({type:"tool-call",toolCallId:R.item.call_id,toolName:s.toCustomToolName("shell"),input:JSON.stringify({action:{commands:R.item.action.commands}}),providerMetadata:{[d]:{itemId:R.item.id}}});else if(R.item.type==="reasoning"){const ie=x[R.item.id],Me=Object.entries(ie.summaryParts).filter(([Ze,nt])=>nt==="active"||nt==="can-conclude").map(([Ze])=>Ze);for(const Ze of Me)E.enqueue({type:"reasoning-end",id:`${R.item.id}:${Ze}`,providerMetadata:{[d]:{itemId:R.item.id,reasoningEncryptedContent:(B=R.item.encrypted_content)!=null?B:null}}});delete x[R.item.id]}}else if(tz(R)){const ie=N[R.output_index];ie!=null&&E.enqueue({type:"tool-input-delta",id:ie.toolCallId,delta:R.delta})}else if(iz(R)){const ie=N[R.output_index];ie?.applyPatch&&(E.enqueue({type:"tool-input-delta",id:ie.toolCallId,delta:Do(R.delta)}),ie.applyPatch.hasDiff=!0)}else if(lz(R)){const ie=N[R.output_index];ie?.applyPatch&&!ie.applyPatch.endEmitted&&(ie.applyPatch.hasDiff||(E.enqueue({type:"tool-input-delta",id:ie.toolCallId,delta:Do(R.diff)}),ie.applyPatch.hasDiff=!0),E.enqueue({type:"tool-input-delta",id:ie.toolCallId,delta:'"}}'}),E.enqueue({type:"tool-input-end",id:ie.toolCallId}),ie.applyPatch.endEmitted=!0)}else if(nz(R))E.enqueue({type:"tool-result",toolCallId:R.item_id,toolName:s.toCustomToolName("image_generation"),result:{result:R.partial_image_b64},preliminary:!0});else if(az(R)){const ie=N[R.output_index];ie!=null&&E.enqueue({type:"tool-input-delta",id:ie.toolCallId,delta:Do(R.delta)})}else if(oz(R)){const ie=N[R.output_index];ie!=null&&(E.enqueue({type:"tool-input-delta",id:ie.toolCallId,delta:'"}'}),E.enqueue({type:"tool-input-end",id:ie.toolCallId}),E.enqueue({type:"tool-call",toolCallId:ie.toolCallId,toolName:s.toCustomToolName("code_interpreter"),input:JSON.stringify({code:R.code,containerId:ie.codeInterpreter.containerId}),providerExecuted:!0}))}else if(ez(R))O=R.response.id,E.enqueue({type:"response-metadata",id:R.response.id,timestamp:new Date(R.response.created_at*1e3),modelId:R.response.model});else if(PN(R))E.enqueue({type:"text-delta",id:R.item_id,delta:R.delta}),(we=(P=t.providerOptions)==null?void 0:P[d])!=null&&we.logprobs&&R.logprobs&&z.push(R.logprobs);else if(R.type==="response.reasoning_summary_part.added"){if(R.summary_index>0){const ie=x[R.item_id];ie.summaryParts[R.summary_index]="active";for(const Me of Object.keys(ie.summaryParts))ie.summaryParts[Me]==="can-conclude"&&(E.enqueue({type:"reasoning-end",id:`${R.item_id}:${Me}`,providerMetadata:{[d]:{itemId:R.item_id}}}),ie.summaryParts[Me]="concluded");E.enqueue({type:"reasoning-start",id:`${R.item_id}:${R.summary_index}`,providerMetadata:{[d]:{itemId:R.item_id,reasoningEncryptedContent:(C=(ce=x[R.item_id])==null?void 0:ce.encryptedContent)!=null?C:null}}})}}else R.type==="response.reasoning_summary_text.delta"?E.enqueue({type:"reasoning-delta",id:`${R.item_id}:${R.summary_index}`,delta:R.delta,providerMetadata:{[d]:{itemId:R.item_id}}}):R.type==="response.reasoning_summary_part.done"?u?(E.enqueue({type:"reasoning-end",id:`${R.item_id}:${R.summary_index}`,providerMetadata:{[d]:{itemId:R.item_id}}}),x[R.item_id].summaryParts[R.summary_index]="concluded"):x[R.item_id].summaryParts[R.summary_index]="can-conclude":WN(R)?(b={unified:Fg({finishReason:(L=R.response.incomplete_details)==null?void 0:L.reason,hasFunctionCall:K}),raw:(re=(oe=R.response.incomplete_details)==null?void 0:oe.reason)!=null?re:void 0},w=R.response.usage,typeof R.response.service_tier=="string"&&(W=R.response.service_tier)):rz(R)?(X.push(R.annotation),R.annotation.type==="url_citation"?E.enqueue({type:"source",sourceType:"url",id:(xe=(pe=(Q=h.config).generateId)==null?void 0:pe.call(Q))!=null?xe:Gt(),url:R.annotation.url,title:R.annotation.title}):R.annotation.type==="file_citation"?E.enqueue({type:"source",sourceType:"document",id:(tn=(tt=(Ee=h.config).generateId)==null?void 0:tt.call(Ee))!=null?tn:Gt(),mediaType:"text/plain",title:R.annotation.filename,filename:R.annotation.filename,providerMetadata:{[d]:{type:R.annotation.type,fileId:R.annotation.file_id,index:R.annotation.index}}}):R.annotation.type==="container_file_citation"?E.enqueue({type:"source",sourceType:"document",id:(ho=(na=(fa=h.config).generateId)==null?void 0:na.call(fa))!=null?ho:Gt(),mediaType:"text/plain",title:R.annotation.filename,filename:R.annotation.filename,providerMetadata:{[d]:{type:R.annotation.type,fileId:R.annotation.file_id,containerId:R.annotation.container_id}}}):R.annotation.type==="file_path"&&E.enqueue({type:"source",sourceType:"document",id:(Vt=(Hn=(An=h.config).generateId)==null?void 0:Hn.call(An))!=null?Vt:Gt(),mediaType:"application/octet-stream",title:R.annotation.file_id,filename:R.annotation.file_id,providerMetadata:{[d]:{type:R.annotation.type,fileId:R.annotation.file_id,index:R.annotation.index}}})):sz(R)&&E.enqueue({type:"error",error:R})},flush(ne){const E={[d]:{responseId:O}};z.length>0&&(E[d].logprobs=z),W!==void 0&&(E[d].serviceTier=W),ne.enqueue({type:"finish",finishReason:b,usage:Kg(w),providerMetadata:E})}})),request:{body:a},response:{headers:p}}}};function PN(t){return t.type==="response.output_text.delta"}function FN(t){return t.type==="response.output_item.done"}function WN(t){return t.type==="response.completed"||t.type==="response.incomplete"}function ez(t){return t.type==="response.created"}function tz(t){return t.type==="response.function_call_arguments.delta"}function nz(t){return t.type==="response.image_generation_call.partial_image"}function az(t){return t.type==="response.code_interpreter_call_code.delta"}function oz(t){return t.type==="response.code_interpreter_call_code.done"}function iz(t){return t.type==="response.apply_patch_call_operation_diff.delta"}function lz(t){return t.type==="response.apply_patch_call_operation_diff.done"}function ty(t){return t.type==="response.output_item.added"}function rz(t){return t.type==="response.output_text.annotation.added"}function sz(t){return t.type==="error"}function ny(t){var a;switch(t.type){case"search":return{action:{type:"search",query:(a=t.query)!=null?a:void 0},...t.sources!=null&&{sources:t.sources}};case"open_page":return{action:{type:"openPage",url:t.url}};case"find_in_page":return{action:{type:"findInPage",url:t.url,pattern:t.pattern}}}}function Do(t){return JSON.stringify(t).slice(1,-1)}var uz=ye(()=>ve(S({instructions:v().nullish(),speed:D().min(.25).max(4).default(1).nullish()}))),cz=class{constructor(t,a){this.modelId=t,this.config=a,this.specificationVersion="v3"}get provider(){return this.config.provider}async getArgs({text:t,voice:a="alloy",outputFormat:i="mp3",speed:l,instructions:s,language:u,providerOptions:d}){const p=[],m=await En({provider:"openai",providerOptions:d,schema:uz}),h={model:this.modelId,input:t,voice:a,response_format:"mp3",speed:l,instructions:s};if(i&&(["mp3","opus","aac","flac","wav","pcm"].includes(i)?h.response_format=i:p.push({type:"unsupported",feature:"outputFormat",details:`Unsupported output format: ${i}. Using mp3 instead.`})),m){const y={};for(const T in y){const b=y[T];b!==void 0&&(h[T]=b)}}return u&&p.push({type:"unsupported",feature:"language",details:`OpenAI speech models do not support language selection. Language parameter "${u}" was ignored.`}),{requestBody:h,warnings:p}}async doGenerate(t){var a,i,l;const s=(l=(i=(a=this.config._internal)==null?void 0:a.currentDate)==null?void 0:i.call(a))!=null?l:new Date,{requestBody:u,warnings:d}=await this.getArgs(t),{value:p,responseHeaders:m,rawValue:h}=await Zt({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:It(this.config.headers(),t.headers),body:u,failedResponseHandler:ea,successfulResponseHandler:cC(),abortSignal:t.abortSignal,fetch:this.config.fetch});return{audio:p,warnings:d,request:{body:JSON.stringify(u)},response:{timestamp:s,modelId:this.modelId,headers:m,body:h}}}},dz=ye(()=>ve(S({text:v(),language:v().nullish(),duration:D().nullish(),words:F(S({word:v(),start:D(),end:D()})).nullish(),segments:F(S({id:D(),seek:D(),start:D(),end:D(),text:v(),tokens:F(D()),temperature:D(),avg_logprob:D(),compression_ratio:D(),no_speech_prob:D()})).nullish()}))),fz=ye(()=>ve(S({include:F(v()).optional(),language:v().optional(),prompt:v().optional(),temperature:D().min(0).max(1).default(0).optional(),timestampGranularities:F(Ae(["word","segment"])).default(["segment"]).optional()}))),ay={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},pz=class{constructor(t,a){this.modelId=t,this.config=a,this.specificationVersion="v3"}get provider(){return this.config.provider}async getArgs({audio:t,mediaType:a,providerOptions:i}){const l=[],s=await En({provider:"openai",providerOptions:i,schema:fz}),u=new FormData,d=t instanceof Uint8Array?new Blob([t]):new Blob([Zi(t)]);u.append("model",this.modelId);const p=fO(a);if(u.append("file",new File([d],"audio",{type:a}),`audio.${p}`),s){const m={include:s.include,language:s.language,prompt:s.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:s.temperature,timestamp_granularities:s.timestampGranularities};for(const[h,y]of Object.entries(m))if(y!=null)if(Array.isArray(y))for(const T of y)u.append(`${h}[]`,String(T));else u.append(h,String(y))}return{formData:u,warnings:l}}async doGenerate(t){var a,i,l,s,u,d,p,m;const h=(l=(i=(a=this.config._internal)==null?void 0:a.currentDate)==null?void 0:i.call(a))!=null?l:new Date,{formData:y,warnings:T}=await this.getArgs(t),{value:b,responseHeaders:w,rawValue:z}=await B_({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:It(this.config.headers(),t.headers),formData:y,failedResponseHandler:ea,successfulResponseHandler:Kt(dz),abortSignal:t.abortSignal,fetch:this.config.fetch}),O=b.language!=null&&b.language in ay?ay[b.language]:void 0;return{text:b.text,segments:(p=(d=(s=b.segments)==null?void 0:s.map(N=>({text:N.text,startSecond:N.start,endSecond:N.end})))!=null?d:(u=b.words)==null?void 0:u.map(N=>({text:N.word,startSecond:N.start,endSecond:N.end})))!=null?p:[],language:O,durationInSeconds:(m=b.duration)!=null?m:void 0,warnings:T,response:{timestamp:h,modelId:this.modelId,headers:w,body:z}}}},mz="3.0.12";function hb(t={}){var a,i;const l=(a=Gd(Bl({settingValue:t.baseURL,environmentVariableName:"OPENAI_BASE_URL"})))!=null?a:"https://api.openai.com/v1",s=(i=t.name)!=null?i:"openai",u=()=>$i({Authorization:`Bearer ${U_({apiKey:t.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":t.organization,"OpenAI-Project":t.project,...t.headers},`ai-sdk/openai/${mz}`),d=O=>new WM(O,{provider:`${s}.chat`,url:({path:N})=>`${l}${N}`,headers:u,fetch:t.fetch}),p=O=>new aN(O,{provider:`${s}.completion`,url:({path:N})=>`${l}${N}`,headers:u,fetch:t.fetch}),m=O=>new lN(O,{provider:`${s}.embedding`,url:({path:N})=>`${l}${N}`,headers:u,fetch:t.fetch}),h=O=>new cN(O,{provider:`${s}.image`,url:({path:N})=>`${l}${N}`,headers:u,fetch:t.fetch}),y=O=>new pz(O,{provider:`${s}.transcription`,url:({path:N})=>`${l}${N}`,headers:u,fetch:t.fetch}),T=O=>new cz(O,{provider:`${s}.speech`,url:({path:N})=>`${l}${N}`,headers:u,fetch:t.fetch}),b=O=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return w(O)},w=O=>new KN(O,{provider:`${s}.responses`,url:({path:N})=>`${l}${N}`,headers:u,fetch:t.fetch,fileIdPrefixes:["file-"]}),z=function(O){return b(O)};return z.specificationVersion="v3",z.languageModel=b,z.chat=d,z.completion=p,z.responses=w,z.embedding=m,z.embeddingModel=m,z.textEmbedding=m,z.textEmbeddingModel=m,z.image=h,z.imageModel=h,z.transcription=y,z.transcriptionModel=y,z.speech=T,z.speechModel=T,z.tools=GN,z}hb();const hz={read_content:{description:"Read the text content of the current active tab",parameters:S({}),execute:async()=>{if(typeof chrome>"u"||!chrome.tabs)return"Browser API not available";const[t]=await chrome.tabs.query({active:!0,currentWindow:!0});return t.id?(await chrome.tabs.sendMessage(t.id,{action:"read_content"})).content||"No content found":"No active tab found"}},click_element:{description:"Click on a DOM element using a CSS selector",parameters:S({selector:v().describe("The CSS selector of the element to click")}),execute:async({selector:t})=>{if(typeof chrome>"u"||!chrome.tabs)return"Browser API not available";const[a]=await chrome.tabs.query({active:!0,currentWindow:!0});return a.id?(await chrome.tabs.sendMessage(a.id,{action:"click_element",selector:t})).message:"No active tab found"}},input_text:{description:"Input text into a form field using a CSS selector",parameters:S({selector:v().describe("The CSS selector of the input field"),text:v().describe("The text to input")}),execute:async({selector:t,text:a})=>{if(typeof chrome>"u"||!chrome.tabs)return"Browser API not available";const[i]=await chrome.tabs.query({active:!0,currentWindow:!0});return i.id?(await chrome.tabs.sendMessage(i.id,{action:"input_text",selector:t,text:a})).message:"No active tab found"}}};function vz(){const[t,a]=Mt.useState([]),[i,l]=Mt.useState(""),[s,u]=Mt.useState(!1),[d,p]=Mt.useState(null);Mt.useEffect(()=>{typeof chrome<"u"&&chrome.storage&&chrome.storage.local.get(["apiKey","baseUrl","model","language"],h=>{p({apiKey:h.apiKey||"",baseUrl:h.baseUrl||"",model:h.model||"gemini-2.0-flash-exp",language:h.language||"en"})})},[]);const m=Mt.useCallback(async h=>{if(h?.preventDefault(),!i.trim()||!d)return;u(!0);const y={role:"user",content:i};a(T=>[...T,y]),l("");try{let T;d.model.includes("gpt")?T=hb({apiKey:d.apiKey,baseURL:d.baseUrl||void 0}):T=ib({apiKey:d.apiKey,baseURL:d.baseUrl||void 0});const b=d.language==="zh"?" (Baize)AI":"You are Baize, a powerful browser AI assistant. You can read page content, click buttons, and input text. Use tools as needed to fulfill user requests.",w=await _M({model:T(d.model),system:b,messages:[...t,y],tools:hz,maxSteps:5});let z="",O={};a(N=>[...N,{role:"assistant",content:""}]);for await(const N of w.fullStream){if(N.type==="text-delta")z+=N.textDelta;else if(N.type==="tool-call"){const X=N;O[X.toolCallId]={toolCallId:X.toolCallId,toolName:X.toolName,args:X.args}}a(X=>{const K=[...X],x=K[K.length-1];if(x.role==="assistant")if(Object.keys(O).length>0){const W=[];z&&W.push({type:"text",text:z}),Object.values(O).forEach(ne=>{W.push({type:"tool-call",...ne})}),K[K.length-1]={...x,content:W}}else K[K.length-1]={...x,content:z};return K})}}catch(T){console.error(T),a(b=>[...b,{role:"assistant",content:"Error: "+T.message}])}finally{u(!1)}},[i,d,t]);return{messages:t,input:i,handleInputChange:h=>l(h.target.value),handleSubmit:m,isLoading:s,config:d}}const gz=({onOpenSettings:t})=>{const{messages:a,input:i,handleInputChange:l,handleSubmit:s,isLoading:u,config:d}=vz(),p=Mt.useRef(null),m=()=>{p.current?.scrollIntoView({behavior:"smooth"})};Mt.useEffect(()=>{m()},[a]);const h=y=>typeof y.content=="string"?Se.jsx("div",{children:y.content}):Array.isArray(y.content)?Se.jsx("div",{children:y.content.map((T,b)=>T.type==="text"?Se.jsx("div",{children:T.text},b):T.type==="tool-call"?Se.jsxs("div",{className:"tool-call-indicator",style:{marginTop:"8px",padding:"8px",background:"rgba(0,0,0,0.05)",borderRadius:"4px",fontSize:"0.9em"},children:[Se.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontWeight:"bold"},children:[Se.jsx(JT,{size:14}),"Using tool: ",T.toolName]}),Se.jsxs("details",{children:[Se.jsx("summary",{style:{cursor:"pointer",outline:"none",marginTop:"4px"},children:"View Details"}),Se.jsx("pre",{style:{overflowX:"auto",fontSize:"0.85em",marginTop:"4px"},children:JSON.stringify(T.args,null,2)})]})]},b):(T.type==="tool-result",null))}):null;return d?.apiKey?Se.jsxs("div",{className:"container",children:[Se.jsxs("div",{style:{padding:"12px",borderBottom:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-color)"},children:[Se.jsxs("h1",{style:{margin:0,fontSize:"18px",display:"flex",alignItems:"center",gap:"8px"},children:["Baize",Se.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",background:"#e0e7ff",color:"#3730a3",borderRadius:"10px"},children:"Beta"})]}),Se.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"var(--text-color)"},children:Se.jsx(WT,{size:20})})]}),Se.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px",display:"flex",flexDirection:"column",gap:"16px"},children:[a.map((y,T)=>Se.jsx("div",{style:{alignSelf:y.role==="user"?"flex-end":"flex-start",maxWidth:"85%",padding:"12px",borderRadius:"12px",backgroundColor:y.role==="user"?"var(--chat-bg-user)":"var(--chat-bg-ai)",color:y.role==="user"?"white":"var(--text-color)",border:"1px solid transparent"},children:h(y)},T)),Se.jsx("div",{ref:p})]}),Se.jsx("form",{onSubmit:s,style:{padding:"12px",borderTop:"1px solid var(--border-color)",background:"var(--bg-color)"},children:Se.jsxs("div",{style:{display:"flex",gap:"8px"},children:[Se.jsx("input",{value:i,onChange:l,placeholder:"Ask Baize to do something...",style:{flex:1,padding:"10px",borderRadius:"8px",border:"1px solid var(--border-color)",background:"var(--input-bg)",color:"inherit",outline:"none"},disabled:u}),Se.jsx("button",{type:"submit",disabled:u||!i.trim(),style:{background:"var(--primary-color)",color:"white",border:"none",borderRadius:"8px",padding:"0 12px",display:"flex",alignItems:"center",justifyContent:"center",opacity:u||!i.trim()?.6:1},children:u?Se.jsx(VT,{size:20,className:"animate-spin"}):Se.jsx(PT,{size:20})})]})})]}):Se.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px",textAlign:"center"},children:[Se.jsx("h2",{children:"Welcome to Baize"}),Se.jsx("p",{children:"Please configure your AI provider to get started."}),Se.jsx("button",{onClick:t,style:{marginTop:"20px",padding:"10px 20px",backgroundColor:"var(--primary-color)",color:"white",borderRadius:"6px",border:"none",fontWeight:"bold"},children:"Go to Settings"})]})},yz=({onBack:t})=>{const[a,i]=Mt.useState(""),[l,s]=Mt.useState(""),[u,d]=Mt.useState("gemini-2.0-flash-exp"),[p,m]=Mt.useState("en");Mt.useEffect(()=>{chrome.storage.local.get(["apiKey","baseUrl","model","language"],y=>{y.apiKey&&i(y.apiKey),y.baseUrl&&s(y.baseUrl),y.model&&d(y.model),y.language&&m(y.language)})},[]);const h=()=>{chrome.storage.local.set({apiKey:a,baseUrl:l,model:u,language:p},()=>{alert("Settings saved!")})};return Se.jsxs("div",{className:"settings-page",style:{padding:"20px"},children:[Se.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px"},children:[Se.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"inherit",padding:0,marginRight:"10px"},children:Se.jsx(LT,{size:24})}),Se.jsx("h2",{children:"Settings"})]}),Se.jsxs("div",{style:{marginBottom:"16px"},children:[Se.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"API Key"}),Se.jsx("input",{type:"password",value:a,onChange:y=>i(y.target.value),placeholder:"Enter your API Key",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid var(--border-color)",background:"var(--input-bg)",color:"inherit"}})]}),Se.jsxs("div",{style:{marginBottom:"16px"},children:[Se.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Base URL (Optional)"}),Se.jsx("input",{type:"text",value:l,onChange:y=>s(y.target.value),placeholder:"https://api.openai.com/v1",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid var(--border-color)",background:"var(--input-bg)",color:"inherit"}})]}),Se.jsxs("div",{style:{marginBottom:"16px"},children:[Se.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Model Name"}),Se.jsx("input",{type:"text",value:u,onChange:y=>d(y.target.value),placeholder:"gemini-2.0-flash-exp",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid var(--border-color)",background:"var(--input-bg)",color:"inherit"}})]}),Se.jsxs("div",{style:{marginBottom:"24px"},children:[Se.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Language"}),Se.jsxs("select",{value:p,onChange:y=>m(y.target.value),style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid var(--border-color)",background:"var(--input-bg)",color:"inherit"},children:[Se.jsx("option",{value:"en",children:"English"}),Se.jsx("option",{value:"zh",children:"Chinese (Simplified)"})]})]}),Se.jsxs("button",{onClick:h,style:{width:"100%",padding:"10px",backgroundColor:"var(--primary-color)",color:"white",border:"none",borderRadius:"6px",display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",fontWeight:"bold"},children:[Se.jsx(QT,{size:18}),"Save Settings"]})]})};function _z(){const[t,a]=Mt.useState("chat");return Se.jsx("div",{style:{minHeight:"100vh",backgroundColor:"var(--bg-color)",color:"var(--text-color)"},children:t==="chat"?Se.jsx(gz,{onOpenSettings:()=>a("settings")}):Se.jsx(yz,{onBack:()=>a("chat")})})}UT.createRoot(document.getElementById("root")).render(Se.jsx(CT.StrictMode,{children:Se.jsx(_z,{})}));
